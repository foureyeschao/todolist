(()=>{var e={942:(e,t,n)=>{"use strict";n(9554),n(4747),n(9826),n(2772),n(6992),n(1249),n(7042),n(5268),n(3710),n(9070),n(1539),n(8674),n(9714),n(8783),n(3948);var o=n(7651),i=n(176),r=document.querySelector(".todolist__sync-state"),a=document.querySelector(".todolist__tasks"),s=document.querySelector(".detail__paragraph"),l=document.querySelector(".detail__title"),c={get_input_element:function(){return document.querySelector(".site-header__search-box__input")},get_level_element:function(){return document.querySelector(".icon__level")},inActColor:function(e){return e.classList.toggle("act-color")},toggleLevel:function(e,t,n){c.get_level_element().classList.remove(e),c.get_level_element().classList.add(t),c.get_level_element().setAttribute("level",n),c.get_input_element().focus()},freshPage:function(){r.innerText="",a.innerText="",l.innerText="",s.innerText=""}};const u=c;n(2222);function d(e){var t='<li id="things_'.concat(e._id,'" class="todolist__content ').concat(e.level,'" idnum="').concat(e._id,"\">\n                            <div>\n                              <span class='todolist__title' contenteditable='true' idnum=").concat(e._id,"> ").concat(e.title," </span>\n                            </div>\n                            <div class='icon__todo'>\n                              <svg class='icon icon__nofinish' aria-hidden='true' name='search' idnum=").concat(e._id,">\n                                <use class='icon__finish' xlink:href='#icon-eglass-finish1'></use>\n                                <use xlink:href='#icon-eglass-finish'></use>\n                              </svg>\n                              <svg class='icon icon__delete' aria-hidden='true' name='search' idnum=").concat(e._id,">\n                                <use xlink:href='#icon-delete'></use>\n                              </svg>\n                            </div>\n                          </li>");return document.createRange().createContextualFragment(t)}function p(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}o.Z.plugin(i.Z);var _,h=(new Date).toString(),f=u.get_input_element(),v=u.get_level_element(),m=document.querySelector(".todolist__tasks"),g=document.querySelector(".detail__paragraph"),y=document.querySelector(".detail__title"),b=new o.Z("userDB"),k=new o.Z("visitorDB"),S=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.db=t}var t,n,o;return t=e,(n=[{key:"addTask",value:function(e,t){var n,o=f.value,i=v.getAttribute("level"),r=(new Date).toLocaleDateString(),a=document.querySelector(".sidebar__act").getAttribute("taskType"),s=h.slice.call(h,0,3).toUpperCase();n=arguments[0]?{_id:(new Date).toISOString(),title:e,level:t,taskTime:r,taskType:a,taskWeek:s,detail:null}:{_id:(new Date).toISOString(),title:o,level:i,taskTime:r,taskType:a,taskWeek:s,detail:null},this.db.put(n).then((function(){console.log("添加到数据库成功！")})).catch((function(e){console.log(e)}))}},{key:"showTask",value:function(e,t){var n=this;return this.db.createIndex({index:{fields:[e]}}).then((function(){return"taskType"===e?n.db.find({selector:{taskType:t},sort:[{taskType:"desc"}]}).then((function(e){n.redrawTasksUI(e.docs)})):n.db.find({selector:{level:t},sort:[{level:"desc"}]}).then((function(e){n.redrawTasksUI(e.docs)}))}))}},{key:"showCurrentTask",value:function(){var e=document.querySelector(".sidebar__act").getAttribute("taskType");this.showTask("taskType",e)}},{key:"redrawTasksUI",value:function(e){var t="",n=document.createElement("ul");n.classList.add("todolist__list"),e.forEach((function(e){if(t!==e.taskTime){t=e.taskTime;var o=function(e){var t=e.taskTime,n=e.taskWeek,o="<li class=\"todolist__time\">\n                            <span class='todolist__week'>".concat(n,"</span>\n                            <span class='todolist__date'>").concat(t,"</span>\n                          </li>");return document.createRange().createContextualFragment(o)}(e);n.appendChild(o)}var i=d(e);n.appendChild(i)})),m.innerHTML="",m.appendChild(n),n.firstChild?(n.firstChild.nextSibling.classList.add("todolist__focus"),this.showDetail(e[length]._id)):this.showDetail()}},{key:"searchTask",value:function(e){var t,n=this,o=document.createElement("ul");o.classList.add("todolist__list"),this.db.allDocs({include_docs:!0,descending:!0}).then((function(i){if(i.rows.forEach((function(i){if((i=i.doc).title&&-1!==i.title.indexOf(e)){t!==i.taskTime&&(t=i.taskTime,o.appendChild(n.createTimeStamp(i)));var r=d(i);o.appendChild(r)}})),m.innerHTML="",m.appendChild(o),o.firstChild){var r=o.firstChild.nextSibling;r.classList.add("todolist__focus"),n.showDetail(r.getAttribute("idnum"))}else n.showDetail()}))}},{key:"modifyTask",value:function(e,t,n){var o=this;this.db.get(e).then((function(e){e[t]=n,o.db.put(e)}))}},{key:"showDetail",value:function(e){e?this.db.get(e).then((function(e){var t=e.title,n=e.detail;y.innerText=t,g.value=n,g.placeholder="添加任务详情..."})):(y.innerText="",g.value="",g.placeholder="此分类目前没有任务哦~")}},{key:"deleteAllTasks",value:function(){var e=this;this.db.allDocs().then((function(t){return Promise.all(t.rows.map((function(t){return e.db.remove(t.id,t.value.rev)})))})).then((function(){u.freshPage()})).catch((function(e){console.log(e+"删除数据库失败！")}))}}])&&p(t.prototype,n),o&&p(t,o),e}(),T=new S(b),w=new S(k);_=localStorage.getItem("DB-name")&&localStorage.getItem("CouchDB-auth")?T:w;var L=function(e,t){_.addTask(e,t)},q=function(e,t){_.showTask(e,t)},x=function(e){_.searchTask(e)},A=function(e,t,n){_.modifyTask(e,t,n)},C=function(e){_.showDetail(e)},E=function(){_.deleteAllTasks()},D=[0,1,2];function I(){E(),N()}function B(){N()}function N(){document.querySelector(".deleteAll-popup").remove()}const P='<div class="login fade">\n                      <div class="login__box">\n                        '.concat('<div class="login__signin">\n      <p class="login__signin__welcome">欢迎登陆PureTodo!</p>\n      <form class="login__signin__form">\n        <div class="form-control">\n          <input\n            class="username login__signin__input"\n            name="username"\n            type="text"\n            placeholder="用户名"\n          />\n          <p></p>\n        </div>\n        <div class="form-control">\n          <input\n            class="password login__signin__input"\n            name="password"\n            type="password"\n            placeholder="密码"\n          />\n          <p></p>\n        </div>\n        <button class=\'login__signin__button\' type="submit">登录</button>\n      </form>\n      <div class="login__bottom">\n        <a class="login__exit login__signin__exit" href="# ">退出</a>\n        <span>|</span>\n        <a class="login__changeState" href="# ">注册新账号</a>\n      </div>\n    </div>',"\n                        ").concat('<div class="login__signup hidden">\n      <p class="login__signup__welcome">欢迎注册新账户!</p>\n      <form class="login__signup__form">\n        <div class="form-control">\n          <input\n            class="username login__signup__input"\n            name="username"\n            type="text"\n            placeholder="用户名"\n          />\n          <p></p>\n        </div>\n        <div class="form-control">\n          <input\n            class="email login__signup__input"\n            name="email"\n            type="text"\n            placeholder="邮箱"\n          />\n          <p></p>\n        </div>\n        \n        <div class="form-control">\n          <input\n            class="password login__signup__input"\n            name="password"\n            type="password"\n            placeholder="密码"\n          />\n          <p></p>\n        </div>\n\n        <div class="form-control">\n          <input\n            class="confirmPassword login__signup__input"\n            name="confirmPassword"\n            type="password"\n            placeholder="确认密码"\n          />\n          <p></p>\n        </div>\n\n        <button class=\'login__signup__button\' type="submit">注册</button>\n      </form>\n      <div class="login__bottom">\n        <a class="login__exit login__signup__exit" href="# ">退出</a>\n        <span>|</span>\n        <a class="login__changeState" href="# ">返回登陆栏</a>\n      </div>\n    </div>',"\n                      </div>\n                    </div>");n(6541),n(1038);var Z=n(9669),U=n.n(Z);n(3210);function j(e,t){var n=e.parentElement;n.classList.contains("form-error")||(n.className="form-control form-error",n.querySelector("p").innerText=t)}function O(e){var t=e.parentElement;t.className="form-control",t.querySelector("p").innerText=""}function M(e){e.forEach((function(e){""===e.value.trim()?j(e,"".concat(e.placeholder,"不能为空")):O(e)}))}function H(e,t,n){var o=e.value.trim().length;o<t?j(e,"".concat(e.placeholder,"长度至少为").concat(t,"个字符")):o>n?j(e,"".concat(e.placeholder,"长度不超过").concat(n,"个字符")):O(e)}function z(e){/^[a-zA-Z]+[a-zA-Z0-9]*$/.test(e.value.trim())||j(e,"".concat(e.placeholder,"开头必须为字母，全称只能包含字母、数字"))}function X(e){/^([a-zA-Z0-9]+[a-zA-Z0-9~!@#$%^&*()_+-=])*$/.test(e.value.trim())||j(e,"".concat(e.placeholder,"开头必须为字母或数字，全称只能包含字母、数字、和常见字符"))}function $(e){return"userdb-".concat(function(e){e=unescape(encodeURIComponent(e));for(var t="",n=0;n<e.length;n++)t+=e.charCodeAt(n).toString(16);return t}(e))}var F,R="http://192.168.206.143:4000",W=document.querySelector(".todolist__sync-state");const J=function(){var e=localStorage.getItem("User-name");return'<div class="profile-popup fade">\n                      <b class="profile-popup__container">\n                        <span class="profile-popup__close close">X</span>\n                        <div class="profile-popup__content">\n                          <h2>你好，'.concat(e,'！</span></h2>\n                          <button class="profile-popup__btn profile-popup__btn--change-username button">修改用户名</button>\n                          <button class="profile-popup__btn profile-popup__btn--change-password button">修改密码</button>\n                          <button class="profile-popup__btn profile-popup__btn--logout button">登出</button>\n                        </divc>\n                      </div>\n                    </div>')};function G(){var e=document.querySelector(".site-header__login"),t=document.querySelector(".site-header__profile"),n=localStorage.getItem("User-name").slice(0,1).toUpperCase();t.firstElementChild.innerText=n,e.classList.add("hidden"),t.classList.remove("hidden"),t.addEventListener("click",K)}function K(){var e,t;document.body.insertAdjacentHTML("beforeend",J()),e=document.querySelector(".profile-popup__close"),t=document.querySelector(".profile-popup__btn--logout"),e.addEventListener("click",V),t.addEventListener("click",Q)}function Q(){var e;localStorage.removeItem("User-name"),localStorage.removeItem("DB-name"),localStorage.removeItem("CouchDB-auth"),e=document.querySelector(".site-header__login"),document.querySelector(".site-header__profile").classList.add("hidden"),e.classList.remove("hidden"),V(),F.cancel(),(_=w).deleteAllTasks(),u.freshPage()}function V(){var e=document.querySelector(".profile-popup");document.body.removeChild(e)}function Y(e,t){G(),_=T,function(e,t,n){var i=$(t),r=new o.Z(R,{fetch:function(e,t){return t.headers.set("X-Auth-CouchDB-Token",n),t.headers.set("X-CouchDB-dbName",i),t.credentials="omit",o.Z.fetch(e,t)},skip_setup:!0});F=o.Z.sync(e,r,{live:!0,heartbeat:!1,timeout:!1,retry:!0}).on("active",(function(e){console.log(e),W.innerText="与云端硬盘同步数据中..."})).on("change",(function(e){console.log(e),T.showCurrentTask(),W.innerText="数据同步完成!"})).on("paused",(function(e){console.log(e)})).on("error",(function(e){console.log(e),localStorage.clear()}))}(T.db,e,t),T.showTask("taskType","work")}var ee=function(e){var t=document.querySelector(".login__signin__form"),n=t.querySelector(".username"),o=t.querySelector(".password");e.preventDefault(),M([n,o]),H(n,3,10),H(o,6,25),z(n),X(o),function(e,t){var n=document.querySelector(".login__signin"),o=n.querySelectorAll(".form-control"),i=n.querySelector(".login__signin__welcome");Array.from(o).every((function(e){return!e.classList.contains("form-error")}))&&U().post("http://192.168.206.143:3000/api/user/login",{username:e,password:t}).then((function(t){var n=t.data.token,o=$(e);localStorage.setItem("CouchDB-auth",n),localStorage.setItem("User-name",e),localStorage.setItem("DB-name",o),i.innerText="登录成功！",i.classList.remove("error"),ie(),Y(e,n),console.log("Sync success!")})).catch((function(e){i.innerText="用户名或密码错误！",i.classList.add("error"),console.log(e.response)}))}(n.value,o.value)};var te=function(e){var t,n=document.querySelector(".login__signup__form"),o=n.querySelector(".username"),i=n.querySelector(".password"),r=n.querySelector(".confirmPassword"),a=n.querySelector(".email");e.preventDefault(),M([o,i,r,a]),H(o,3,10),H(i,6,25),function(e){/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.value.trim())?O(e):j(e,"请输入正确的".concat(e.placeholder,"格式"))}(a),t=r,i.value!==t.value&&j(t,"两次输入的密码不一致"),z(o),X(i),function(e,t,n){var o=document.querySelector(".login__signup"),i=o.querySelectorAll(".form-control"),r=o.querySelector(".login__signup__welcome");Array.from(i).every((function(e){return!e.classList.contains("form-error")}))&&U().post("http://192.168.206.143:3000/api/user/register",{username:e,password:t,email:n}).then((function(e){console.log(e.data)})).catch((function(e){r.innerText="用户名已存在！",r.classList.add("error"),console.log(e.response.data)}))}(o.value,i.value,a.value)};function ne(){var e,t,n,o,i,r,a,s,l;document.body.insertAdjacentHTML("beforeend",P),e=document.querySelector(".login__signin"),t=document.querySelector(".login__signup"),n=document.querySelectorAll(".form-control"),o=document.querySelector(".login__signin__welcome"),n.forEach((function(e){var t=e.querySelector("input"),n=e.querySelector("p");t.value="",e.classList.remove("form-error"),n.innerText=""})),e.classList.remove("hidden"),t.classList.add("hidden"),o.innerText="欢迎登陆PureTodo!",o.classList.remove("error"),i=document.querySelector(".login__box"),r=document.querySelector(".login__signin__form"),a=document.querySelector(".login__signup__form"),s=document.querySelector(".login__signin__exit"),l=document.querySelector(".login__signup__exit"),r.addEventListener("submit",ee),a.addEventListener("submit",te),i.addEventListener("click",oe),s.addEventListener("click",ie),l.addEventListener("click",ie)}function oe(e){var t=document.querySelector(".login__signin"),n=document.querySelector(".login__signup");e.target.classList.contains("login__changeState")&&(t.classList.toggle("hidden"),n.classList.toggle("hidden"))}function ie(){document.querySelector(".login").remove()}var re=document.querySelector(".site-header__loginButton"),ae=document.querySelector(".site-header__loginIcon"),se=document.querySelector(".sidebar__content"),le=document.querySelector(".sidebar__delete"),ce=document.querySelector(".todolist"),ue=document.querySelector(".detail__paragraph");re.addEventListener("click",ne),ae.addEventListener("click",ne),se.addEventListener("click",(function(e){var t=document.querySelectorAll(".sidebar__list-type"),n=e.target;if(n.classList.contains("sidebar__list-type")){t.forEach((function(e){e.classList.remove("sidebar__act")})),n.classList.add("sidebar__act");var o=n.getAttribute("taskType");q("taskType",o)}else if(n.classList.contains("sidebar__list-level")){D.push(D.shift());var i=n.children,r=i[D[0]],a=r.getAttribute("level");Array.prototype.forEach.call(i,(function(e){e.classList.remove("active")})),r.classList.add("active"),q("level",a)}})),le.addEventListener("click",(function(){var e,t;document.body.insertAdjacentHTML("beforeend","<div class=\"deleteAll-popup fade\">\n                            <div class='deleteAll-popup__box'>\n                              <p class='deleteAll-popup__aware'>删除全部数据</p>\n                              <div class='deleteAll-popup__delete'>\n                                <button class='button deleteAll-popup__btn deleteAll-popup__btn-yes'>是的</button>\n                                <button class='button deleteAll-popup__btn deleteAll-popup__btn-no'>再想想</button>\n                              </div>\n                            </div>\n                           </div>"),e=document.querySelector(".deleteAll-popup__btn-yes"),t=document.querySelector(".deleteAll-popup__btn-no"),e.addEventListener("click",I),t.addEventListener("click",B)})),ce.addEventListener("focusout",(function(e){if("SPAN"===e.target.tagName.toUpperCase()){var t=e.target,n=t.getAttribute("idnum"),o=t.innerText;A(n,"title",o)}})),ce.addEventListener("click",(function(e){var t=document.querySelector(".todolist__list"),n=document.querySelector(".todolist__focus");if(e.target.classList.contains("icon__nofinish")){var o=e.target.getAttribute("idnum");A(o,"taskType","finish");var i=e.target.parentNode.parentNode,r=i.previousSibling.classList.contains("todolist__content"),a=i.nextSibling;if((!r&&null==a||!r&&!a.classList.contains("todolist__content"))&&i.parentNode.removeChild(i.previousSibling),i.parentNode.removeChild(i),t.firstChild){if(i===n){var s=t.firstChild.nextSibling;s.classList.add("todolist__focus"),C(s.getAttribute("idnum"))}}else C()}})),ce.addEventListener("click",(function(e){var t=document.querySelector(".todolist__list"),n=document.querySelector(".todolist__focus");if(e.target.classList.contains("icon__delete")){var o=e.target.getAttribute("idnum");A(o,"taskType","bin");var i=e.target.parentNode.parentNode,r=i.previousSibling.classList.contains("todolist__content"),a=i.nextSibling;if((!r&&null==a||!r&&!a.classList.contains("todolist__content"))&&i.parentNode.removeChild(i.previousSibling),i.parentNode.removeChild(i),t.firstChild){if(i===n){var s=t.firstChild.nextSibling;s.classList.add("todolist__focus"),C(s.getAttribute("idnum"))}}else C()}})),ce.addEventListener("click",(function(e){if(e.target.classList.contains("todolist__content")){var t=e.target.parentNode.childNodes,n=e.target.getAttribute("idnum");t.forEach((function(e){e.classList.remove("todolist__focus")})),e.target.classList.add("todolist__focus"),C(n)}})),ue.addEventListener("focusout",(function(){var e=document.querySelector(".todolist__focus").getAttribute("idnum"),t=this.value;A(e,"detail",t)}));n(4812),n(1058);function de(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var pe=document.querySelector(".site-header__random-task__fire"),_e=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.randomTaskBtn=t,this.randomContent=n,this.randomLevel=o,this.event()}var t,n,o;return t=e,(n=[{key:"event",value:function(){this.randomTaskBtn.addEventListener("click",this.randomTask.bind(this))}},{key:"randomTask",value:function(){var e=parseInt(Math.random()*this.randomContent.length),t=parseInt(3*Math.random()),n=document.querySelector(".sidebar__act").getAttribute("taskType");L(this.randomContent[e],this.randomLevel[t]),q("taskType",n)}}])&&de(t.prototype,n),o&&de(t,o),e}();new _e(pe,["读完那本英文原著","中午去睡个好觉","日语入门学习","尝试做些家常菜","了解一些设计常识"],["bgc-light","bgc-usual","bgc-heavy"]);function he(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var fe=document.querySelector(".site-header__search-box__content"),ve=document.querySelector(".icon__add"),me=u.get_input_element(),ge=u.inActColor,ye=function(){function e(t,n,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.searchBox=t,this.addBtn=n,this.input=o,this.inActColor=i,this.event()}var t,n,o;return t=e,(n=[{key:"event",value:function(){this.searchBox.addEventListener("click",this.openSearchTask.bind(this)),this.input.addEventListener("keyup",this.searchTask),this.input.addEventListener("keyup",this.addTask2.bind(this)),this.addBtn.addEventListener("click",this.addTask1.bind(this))}},{key:"openSearchTask",value:function(e){var t=document.querySelector(".sidebar__act").getAttribute("taskType");e.target.classList.contains("icon__search")&&(this.inActColor(e.target),this.inActColor(this.input),this.inActColor(this.searchBox),this.input.focus(),this.input.value="",this.input.classList.contains("act-color")||q("taskType",t))}},{key:"searchTask",value:function(e){e.target.classList.contains("act-color")&&x(this.value)}},{key:"addTask1",value:function(){var e=document.querySelector(".sidebar__act").getAttribute("taskType");this.input.value&&(L(),q("taskType",e),this.input.value="")}},{key:"addTask2",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.event,t=e.which||e.keyCode||e.charCode,n=document.querySelector(".sidebar__act").getAttribute("taskType");document.activeElement.value&&13==t&&"INPUT"===document.activeElement.tagName.toUpperCase()&&(L(),q("taskType",n),this.input.value="")}}])&&he(t.prototype,n),o&&he(t,o),e}();new ye(fe,ve,me,ge);function be(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var ke=u.toggleLevel,Se=u.get_level_element(),Te={green:{dotPressed:function(){ke("level-light","level-usual","bgc-usual"),this.state=Te.purple}},purple:{dotPressed:function(){ke("level-usual","level-heavy","bgc-heavy"),this.state=Te.red}},red:{dotPressed:function(){ke("level-heavy","level-light","bgc-light"),this.state=Te.green}}},we=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state=n,this.levelDot=t,this.event()}var t,n,o;return t=e,(n=[{key:"event",value:function(){var e=this;this.levelDot.addEventListener("click",(function(){e.state.dotPressed.call(e)}))}}])&&be(t.prototype,n),o&&be(t,o),e}();new we(Se,Te.green);function Le(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var qe=document.querySelector(".site-header"),xe=document.querySelector(".site-header__theme-btn"),Ae=function(){function e(t,n,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.theme=t,this.themeIconName=n,this.siteHeader=o,this.themeBtn=i,this.event()}var t,n,o;return t=e,(n=[{key:"event",value:function(){this.themeBtn.addEventListener("click",this.changeTheme.bind(this))}},{key:"changeTheme",value:function(){var e=this.themeBtn.children[0].children[0];this.theme.push(this.theme.shift()),this.themeIconName.push(this.themeIconName.shift()),this.siteHeader.setAttribute("class","site-header "+this.theme[0]),e.setAttribute("xlink:href",this.themeIconName[0])}}])&&Le(t.prototype,n),o&&Le(t,o),e}();new Ae(["","theme-green","theme-purple","theme-gradual"],["#icon-theme","#icon-theme1","#icon-theme2","#icon-theme3"],qe,xe);var Ce,Ee,De;n(6664);Ce=localStorage.getItem("DB-name"),Ee=localStorage.getItem("CouchDB-auth"),De=localStorage.getItem("User-name"),Ce&&Ee&&De?(function(e){var t=localStorage.getItem("DB-name"),n=localStorage.getItem("CouchDB-auth"),i=new o.Z(R,{fetch:function(e,i){return i.headers.set("X-Auth-CouchDB-Token",n),i.headers.set("X-CouchDB-dbName",t),i.credentials="omit",o.Z.fetch(e,i)},skip_setup:!0});F=o.Z.sync(e,i,{live:!0,heartbeat:!1,timeout:!1,retry:!0}).on("active",(function(e){console.log(e),W.innerText="与云端硬盘同步数据中..."})).on("change",(function(e){console.log(e),T.showCurrentTask(),W.innerText="数据同步完成!"})).on("paused",(function(e){console.log(e)})).on("error",(function(e){console.log(e),localStorage.clear()}))}(T.db),G(),q("taskType","work")):q("taskType","work")},6664:()=>{}},t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={709:0},t=[[942,626,20,651]],o=()=>{};function i(){for(var o,i=0;i<t.length;i++){for(var r=t[i],a=!0,s=1;s<r.length;s++){var l=r[s];0!==e[l]&&(a=!1)}a&&(t.splice(i--,1),o=n(n.s=r[0]))}return 0===t.length&&(n.x(),n.x=()=>{}),o}function r(i){for(var r,a,s=i[0],c=i[1],u=i[2],d=i[3],p=0,_=[];p<s.length;p++)a=s[p],n.o(e,a)&&e[a]&&_.push(e[a][0]),e[a]=0;for(r in c)n.o(c,r)&&(n.m[r]=c[r]);for(d&&d(n),l&&l(i);_.length;)_.shift()();return u&&t.push.apply(t,u),o()}n.x=()=>{n.x=()=>{},a=a.slice();for(var e=0;e<a.length;e++)r(a[e]);return(o=i)()};var a=window.webpackJsonp=window.webpackJsonp||[],s=a.push.bind(a);a.push=r;var l=s})(),n.x()})();