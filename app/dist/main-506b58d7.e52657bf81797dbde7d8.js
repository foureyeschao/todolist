!function(e){function t(t){for(var r,c,s=t[0],l=t[1],u=t[2],d=t[3]||[],f=0,h=[];f<s.length;f++)c=s[f],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&h.push(o[c][0]),o[c]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(p&&p(t),i.push.apply(i,d);h.length;)h.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,l=1;l<n.length;l++){var u=n[l];0!==o[u]&&(r=!1)}r&&(a.splice(t--,1),e=s(s.s=n[0]))}return 0===a.length&&(i.forEach((function(e){if(void 0===o[e]){o[e]=null;var t=document.createElement("link");s.nc&&t.setAttribute("nonce",s.nc),t.rel="prefetch",t.as="script",t.href=c(e),document.head.appendChild(t)}})),i.length=0),e}var r={},o={7:0},a=[],i=[];function c(e){return s.p+""+({4:"delete-all-b6ffd4cb",6:"login-d1547949"}[e]||e)+"."+{4:"80504e5a803c453f13e9",6:"875c9b40df06dcaa5614"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n=o[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=o[e]=[t,r]}));t.push(n[2]=r);var a,i=document.createElement("script");i.charset="utf-8",i.timeout=120,s.nc&&i.setAttribute("nonce",s.nc),i.src=c(e);var l=new Error;a=function(t){i.onerror=i.onload=null,clearTimeout(u);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",l.name="ChunkLoadError",l.type=r,l.request=a,n[1](l)}o[e]=void 0}};var u=setTimeout((function(){a({type:"timeout",target:i})}),12e4);i.onerror=i.onload=a,document.head.appendChild(i)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw console.error(e),e};var l=window.webpackJsonp=window.webpackJsonp||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var p=u,f=(a.push([387,0,2,3,1]),n());t([[],{},0,[4,6]])}({14:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.events={}}var t,n,o;return t=e,(n=[{key:"on",value:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)}},{key:"emit",value:function(e,t){this.events[e]&&this.events[e].forEach((function(e){e(t)}))}}])&&r(t.prototype,n),o&&r(t,o),e}());t.a=o},152:function(e,t,n){"use strict";function r(e){return"userdb-".concat(function(e){e=unescape(encodeURIComponent(e));for(var t="",n=0;n<e.length;n++)t+=e.charCodeAt(n).toString(16);return t}(e))}n.d(t,"a",(function(){return r}))},161:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return T}));var r,o=n(152),a=n(40),i=n(30),c=n(64);function s(e,t,n){return new a.a(e.syncUrl,{fetch:function(e,r){return r.headers.set("X-CouchDB-dbName",t),r.headers.set("X-Auth-CouchDB-Token",n),r.credentials="omit",a.a.fetch(e,r)},skip_setup:!0})}function l(e,t){var n=document.querySelector(".todolist__sync-state");return a.a.sync(e,t,{live:!0,heartbeat:!1,timeout:!1,retry:!0}).on("active",(function(e){console.log(e),n.innerText="与云端硬盘同步数据中..."})).on("change",(function(e){console.log(e),i.a.renderByCurrentTask(),n.innerText="数据同步完成!"})).on("paused",(function(e){console.log(e)})).on("error",(function(e){console.log(e),localStorage.clear()}))}var u=n(4);var d=function(){var e=localStorage.getItem("User-name");return'<div class="profile-popup fade">\n                  <div class="profile-popup__container">\n                    <div class="profile-popup__utils">\n                      <span class="profile-popup__utils__return hidden">&larr;</span>\n                      <span class="profile-popup__utils__gap"></span>\n                      <span class="profile-popup__utils__close close">X</span>\n                    </div>\n                    <div class="profile-popup__content">\n                      <h2>你好，'.concat(e,'！</h2>\n                      <button class="profile-popup__btn profile-popup__btn--change-username button">修改用户名</button>\n                      <button class="profile-popup__btn profile-popup__btn--change-password button">修改密码</button>\n                      <button class="profile-popup__btn profile-popup__btn--logout button">登出</button>\n                    </div>\n                  </div>\n                </div>')};function p(){var e=document.querySelector(".todolist__sync-state"),t=document.querySelector(".todolist__tasks"),n=document.querySelector(".detail__paragraph"),r=document.querySelector(".detail__title");e.innerText="",t.innerText="",r.innerText="",n.innerText=""}n(14).a.on("deleteAllTasks",p);var f=p,h=n(110),v=n.n(h);function m(e){var t=document.querySelector(".current-username"),n=document.querySelector(".new-username"),r=document.querySelector(".profile-popup__welcome");e.preventDefault(),v.a.post(c.a.changeUsernameUrl,{currentUsername:t,newUsername:n}).then((function(e){console.log(e.data)})).catch((function(e){r.innerText="用户名已存在！",r.classList.add("error"),console.log(e.response.data)}))}var _=function(){document.querySelector(".form__change-username").addEventListener("submit",m)};function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),g(this,"initPopup",(function(){document.body.insertAdjacentHTML("beforeend",d()),t.ProfileHandler()})),g(this,"changeUsername",(function(){var e=document.querySelector(".profile-popup__container"),n=document.querySelector(".profile-popup__content");t.showUtilReturn(),n.classList.add("hidden"),e.insertAdjacentHTML("beforeend",'<div class="profile-popup__change-username">\n                          <h2 class="profile-popup__welcome">修改用户名</h2>\n                          <form class="profile-popup__form form form__change-username">\n                            <div class="form-control">\n                              <input\n                                class="current-username profile-popup__input"\n                                name="username"\n                                type="text"\n                                placeholder="当前用户名"\n                              />\n                              <p></p>\n                            </div>\n                            <div class="form-control">\n                              <input\n                                class="new-username profile-popup__input"\n                                name="newUsername"\n                                type="text"\n                                placeholder="新用户名"\n                              />\n                              <p></p>\n                            </div>\n                            <button class=\'profile-popup__button change-username__submit\' type="submit">提交</button>\n                          </form>\n                        </div>'),_()})),g(this,"changePassword",(function(){var e=document.querySelector(".profile-popup__container"),n=document.querySelector(".profile-popup__content");t.showUtilReturn(),n.classList.add("hidden"),e.insertAdjacentHTML("beforeend",'<div class="profile-popup__change-password">\n                          <h2 class="profile-popup__welcome">修改密码</h2>\n                          <form class="profile-popup__form form form__change-password">\n                            <div class="form-control">\n                              <input\n                                class="password profile-popup__input"\n                                name="password"\n                                type="text"\n                                placeholder="当前密码"\n                              />\n                              <p></p>\n                            </div>\n                            <div class="form-control">\n                              <input\n                                class="new-password profile-popup__input"\n                                name="new-password"\n                                type="password"\n                                placeholder="输入新密码"\n                              />\n                              <p></p>\n                            </div>\n                            <div class="form-control">\n                              <input\n                                class="confirm-new-password profile-popup__input"\n                                name="confirm-new-password"\n                                type="password"\n                                placeholder="确认新密码"\n                              />\n                              <p></p>\n                            </div>\n                            <button class=\'profile-popup__button change-password__submit\' type="submit">提交</button>\n                          </form>\n                        </div>')})),g(this,"logout",(function(){localStorage.removeItem("User-name"),localStorage.removeItem("DB-name"),localStorage.removeItem("CouchDB-auth"),t.hideProfile(),t.removeHTML(),r.cancel(),Object(u.c)(),f()})),g(this,"returnProfile",(function(){var e=document.querySelector(".profile-popup__container");document.querySelector(".profile-popup__content").classList.remove("hidden");var n=document.querySelector(".profile-popup__change-username"),r=document.querySelector(".profile-popup__change-password");if(t.hideUtilReturn(),n)return e.removeChild(n);e.removeChild(r)}))}var t,n,o;return t=e,(n=[{key:"showProfileIcon",value:function(){var e=document.querySelector(".site-header__login"),t=document.querySelector(".site-header__profile"),n=localStorage.getItem("User-name").slice(0,1).toUpperCase();t.firstElementChild.innerText=n,e.classList.add("hidden"),t.classList.remove("hidden"),t.addEventListener("click",this.initPopup)}},{key:"ProfileHandler",value:function(){var e=document.querySelector(".profile-popup__utils__close"),t=document.querySelector(".profile-popup__utils__return"),n=document.querySelector(".profile-popup__btn--logout"),r=document.querySelector(".profile-popup__btn--change-username"),o=document.querySelector(".profile-popup__btn--change-password");r.addEventListener("click",this.changeUsername),o.addEventListener("click",this.changePassword),n.addEventListener("click",this.logout),e.addEventListener("click",this.removeHTML),t.addEventListener("click",this.returnProfile)}},{key:"removeHTML",value:function(){var e=document.querySelector(".profile-popup");document.body.removeChild(e)}},{key:"showUtilReturn",value:function(){document.querySelector(".profile-popup__utils__return").classList.remove("hidden")}},{key:"hideUtilReturn",value:function(){document.querySelector(".profile-popup__utils__return").classList.add("hidden")}},{key:"hideProfile",value:function(){var e=document.querySelector(".site-header__login");document.querySelector(".site-header__profile").classList.add("hidden"),e.classList.remove("hidden")}}])&&y(t.prototype,n),o&&y(t,o),e}());function b(e,t){localStorage.setItem("currentLevel","level-light"),localStorage.setItem("currentType","work"),k.showProfileIcon(),Object(u.b)(),function(e,t,n){var a=Object(o.a)(t),i=s(c.a,a,n);r=l(e,i)}(i.a.db,e,t),i.a.renderByTaskType("work")}function T(){var e=localStorage.getItem("DB-name"),t=localStorage.getItem("CouchDB-auth"),n=localStorage.getItem("User-name");localStorage.setItem("currentLevel","level-light"),localStorage.setItem("currentType","work"),e&&t&&n?(!function(e){var t=localStorage.getItem("DB-name"),n=localStorage.getItem("CouchDB-auth"),o=s(c.a,t,n);r=l(e,o)}(i.a.db),k.showProfileIcon(),u.a.renderByTaskType("work")):u.a.renderByTaskType("work")}},30:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p}));var r=n(40),o=n(162);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._input=document.querySelector(".site-header__search-box__input"),this._levelIcon=document.querySelector(".icon__level"),this._templateTitles=["读完那本英文原著","中午去睡个好觉","日语入门学习","尝试做些家常菜","了解一些设计常识"],this._templateLevels=["level-light","level-usual","level-heavy"]}var t,n,r;return t=e,(n=[{key:"createTask",value:function(){return{_id:(new Date).toISOString(),title:this.title,level:this.taskLevel,taskTime:this.taskTime,taskType:this.taskType,taskWeek:this.taskWeek,detail:null}}},{key:"createRandomTask",value:function(){return{_id:(new Date).toISOString(),title:this.randomTitle,level:this.randomLevel,taskTime:this.taskTime,taskType:this.taskType,taskWeek:this.taskWeek,detail:null}}},{key:"shuffle",value:function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=[e[n],e[t]];e[t]=r[0],e[n]=r[1]}return e}},{key:"title",get:function(){return this._input.value}},{key:"taskLevel",get:function(){return localStorage.getItem("currentLevel")}},{key:"taskTime",get:function(){return(new Date).toLocaleDateString()}},{key:"taskType",get:function(){return localStorage.getItem("currentType")}},{key:"taskWeek",get:function(){var e=(new Date).toString();return e.slice.call(e,0,3).toUpperCase()}},{key:"randomTitle",get:function(){return this.shuffle(this._templateTitles.slice())[0]}},{key:"randomLevel",get:function(){return this.shuffle(this._templateLevels.slice())[0]}}])&&a(t.prototype,n),r&&a(t,r),e}());function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.a.plugin(o.a);var s=new r.a("userDB"),l=new r.a("visitorDB"),u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.db=t,this.taskCreater=i}var t,n,r;return t=e,(n=[{key:"addTask",value:function(){var e=this.taskCreater.createTask();this.db.put(e).then((function(){console.log("添加到数据库成功！")})).catch((function(e){console.log(e)}))}},{key:"addRandomTask",value:function(){var e=this.taskCreater.createRandomTask();this.db.put(e).then((function(){console.log("添加到数据库成功！")})).catch((function(e){console.log(e)}))}},{key:"renderByTaskType",value:function(e){var t=this;return this.db.createIndex({index:{fields:["taskType"]}}).then((function(){return t.db.find({selector:{taskType:e},sort:[{taskType:"desc"}]}).then((function(e){return e.docs}))}))}},{key:"renderByTaskLevel",value:function(e){var t=this;return this.db.createIndex({index:{fields:["level"]}}).then((function(){return t.db.find({selector:{level:e},sort:[{level:"desc"}]}).then((function(e){return e.docs}))}))}},{key:"renderByCurrentTask",value:function(){var e=document.querySelector(".sidebar__act").getAttribute("taskType");this.renderByTaskType(e)}},{key:"renderBySearch",value:function(){return this.db.allDocs({include_docs:!0,descending:!0}).then((function(e){return e}))}},{key:"modifyTask",value:function(e,t,n){var r=this;this.db.get(e).then((function(e){e[t]=n,r.db.put(e)}))}},{key:"showDetail",value:function(e){return this.db.get(e).then((function(e){return{title:e.title,detail:e.detail}}))}},{key:"deleteAllTasks",value:function(){var e=this;this.db.allDocs().then((function(t){return Promise.all(t.rows.map((function(t){return e.db.remove(t.id,t.value.rev)})))})).catch((function(e){console.log(e+"删除数据库失败！")}))}}])&&c(t.prototype,n),r&&c(t,r),e}(),d=new u(s),p=new u(l)},370:function(e,t,n){},387:function(e,t,n){"use strict";n.r(t);var r=n(4);var o=[0,1,2];var a=n(14),i=document.querySelector(".detail__paragraph"),c=document.querySelector(".detail__title");function s(){c.innerText="",i.placeholder="此分类目前没有任务哦~",i.value=""}function l(e){var t=e.taskTime,n=e.taskWeek,r="<li class=\"todolist__time\">\n                            <span class='todolist__week'>".concat(n,"</span>\n                            <span class='todolist__date'>").concat(t,"</span>\n                          </li>");return document.createRange().createContextualFragment(r)}function u(e){var t='<li id="things_'.concat(e._id,'" class="todolist__content" idnum="').concat(e._id,'" level="').concat(e.level,"\" >\n                            <div>\n                              <span class='todolist__title' contenteditable='true' idnum=").concat(e._id,"> ").concat(e.title," </span>\n                            </div>\n                            <div class='icon__todo'>\n                              <svg class='icon icon__nofinish' aria-hidden='true' name='search' idnum=").concat(e._id,">\n                                <use class='icon__finish' xlink:href='#icon-eglass-finish1'></use>\n                                <use xlink:href='#icon-eglass-finish'></use>\n                              </svg>\n                              <svg class='icon icon__delete' aria-hidden='true' name='search' idnum=").concat(e._id,">\n                                <use xlink:href='#icon-delete'></use>\n                              </svg>\n                            </div>\n                          </li>");return document.createRange().createContextualFragment(t)}function d(e){var t="",n=document.querySelector(".todolist__tasks"),o=document.createElement("ul");o.classList.add("todolist__list"),e.forEach((function(e){if(t!==e.taskTime){t=e.taskTime;var n=l(e);o.appendChild(n)}var r=u(e);o.appendChild(r)})),n.innerHTML="",n.appendChild(o),o.firstChild?(o.firstChild.nextSibling.classList.add("todolist__focus"),r.a.showDetail(e[length]._id)):s()}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}a.a.on("showDetail",(function(e){var t=e.title,n=e.detail;c.innerText=t,i.placeholder="添加任务详情...",i.value=n})),a.a.on("renderByTaskType",d),a.a.on("renderByTaskLevel",d),a.a.on("renderBySearch",(function(e){var t,n=e.input,o=e.result,a=document.querySelector(".todolist__tasks"),i=document.createElement("ul");if(i.classList.add("todolist__list"),o.rows.forEach((function(e){if((e=e.doc).title&&-1!==e.title.indexOf(n)){t!==e.taskTime&&(t=e.taskTime,i.appendChild(l(e)));var r=u(e);i.appendChild(r)}})),a.innerHTML="",a.appendChild(i),i.firstChild){var c=i.firstChild.nextSibling;c.classList.add("todolist__focus"),r.a.showDetail(c.getAttribute("idnum"))}else s()}));var f=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.levels=["level-light","level-usual","level-heavy"],this.levelChangeBtn=document.querySelector(".icon__level")}var t,n,r;return t=e,(n=[{key:"changeLevel",value:function(){this.shiftLevel(),this.renderLevel(),localStorage.setItem("currentLevel",this.currentLevel)}},{key:"shiftLevel",value:function(){this.levels.push(this.levels.shift())}},{key:"renderLevel",value:function(){this.levelChangeBtn.setAttribute("class","icon icon__level ".concat(this.currentLevel)),this.levelChangeBtn.setAttribute("level",this.currentLevel)}},{key:"currentLevel",get:function(){return this.levels[0]}}])&&p(t.prototype,n),r&&p(t,r),e}());var h=function(){var e=document.querySelector(".sidebar__act").getAttribute("taskType");r.a.addRandomTask(),r.a.renderByTaskType(e)};function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),m(this,"openSearchTask",(function(e){var n=e.target;n.classList.contains("icon__search")&&(t.activeUI(n),t.input.focus(),t.input.value="",t.input.classList.contains("act-color")||r.a.renderByTaskType(t.typeValue))})),m(this,"addTask1",(function(){t.input.value&&(r.a.addTask(),r.a.renderByTaskType(t.typeValue),t.input.value="")})),m(this,"addTask2",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.event,n=e.which||e.keyCode||e.charCode;document.activeElement.value&&13==n&&"INPUT"===document.activeElement.tagName.toUpperCase()&&(r.a.addTask(),r.a.renderByTaskType(t.typeValue),t.input.value="")})),this.searchBox=document.querySelector(".site-header__search-box__content"),this.addBtn=document.querySelector(".icon__add"),this.input=document.querySelector(".site-header__search-box__input")}var t,n,o;return t=e,(n=[{key:"activeUI",value:function(e){e.classList.toggle("act-color"),this.input.classList.toggle("act-color"),this.searchBox.classList.toggle("act-color")}},{key:"searchTask",value:function(e){e.target.classList.contains("act-color")&&r.a.renderBySearch(this.value)}},{key:"typeValue",get:function(){return document.querySelector(".sidebar__act").getAttribute("taskType")}}])&&v(t.prototype,n),o&&v(t,o),e}());function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var g=new(function(){function e(){var t,n,r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(){o.shiftTheme(),o.renderTheme()},(n="changeTheme")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,this.theme={background:["","theme-green","theme-purple","theme-gradual"],iconName:["#icon-theme","#icon-theme1","#icon-theme2","#icon-theme3"]},this.siteHeader=document.querySelector(".site-header"),this.themeIcon=document.querySelector(".site-header__theme-btn").children[0].children[0]}var t,n,r;return t=e,(n=[{key:"shiftTheme",value:function(){for(var e in this.theme){var t=this.theme[e];t.push(t.shift())}}},{key:"renderTheme",value:function(){this.siteHeader.setAttribute("class","site-header "+this.theme.background[0]),this.themeIcon.setAttribute("xlink:href",this.theme.iconName[0])}}])&&y(t.prototype,n),r&&y(t,r),e}()),k=document.querySelector(".icon__level"),b=document.querySelector(".site-header__loginButton"),T=document.querySelector(".site-header__loginIcon"),w=document.querySelector(".sidebar__content"),S=document.querySelector(".sidebar__delete"),L=document.querySelector(".todolist"),q=document.querySelector(".detail__paragraph"),C=document.querySelector(".site-header__random-task__fire"),x=document.querySelector(".site-header__search-box__content"),B=document.querySelector(".site-header__search-box__input"),E=document.querySelector(".icon__add"),P=document.querySelector(".site-header__theme-btn");x.addEventListener("click",_.openSearchTask),B.addEventListener("keyup",_.searchTask),B.addEventListener("keyup",_.addTask2),E.addEventListener("click",_.addTask1),C.addEventListener("click",h),k.addEventListener("click",f.changeLevel.bind(f)),P.addEventListener("click",g.changeTheme),b.addEventListener("click",(function(){n.e(6).then(n.bind(null,388)).then((function(e){e.default.createPopup()}))})),T.addEventListener("click",(function(){n.e(6).then(n.bind(null,388)).then((function(e){e.loginPopup.createPopup()}))})),w.addEventListener("click",(function(e){var t=e.target;t.classList.contains("sidebar__list-type")&&function(e){document.querySelectorAll(".sidebar__list-type").forEach((function(e){e.classList.remove("sidebar__act")})),e.classList.add("sidebar__act");var t=e.getAttribute("taskType");r.a.renderByTaskType(t),localStorage.setItem("currentType",t)}(t),t.classList.contains("sidebar__list-level")&&function(e){o.push(o.shift());var t=e.children;Array.from(t,(function(e){e.classList.remove("active")}));var n=t[o[0]];n.classList.add("active");var a=n.getAttribute("level");r.a.renderByTaskLevel(a)}(t)})),L.addEventListener("focusout",(function(e){var t=e.target;if("SPAN"===t.tagName.toUpperCase()){var n=t.getAttribute("idnum"),o=t.innerText;r.a.modifyTask(n,"title",o)}})),L.addEventListener("click",(function(e){var t=e.target,n=document.querySelector(".todolist__focus");if(t.classList.contains("icon__nofinish")){var o=t.getAttribute("idnum");r.a.modifyTask(o,"taskType","finish");var a=t.parentNode.parentNode;!function(e){var t=e.previousSibling.classList.contains("todolist__content"),n=e.nextSibling;(!t&&null==n||!t&&!n.classList.contains("todolist__content"))&&e.parentNode.removeChild(e.previousSibling)}(a),a.remove(),function(e,t){var n=document.querySelector(".todolist__list");if(n.firstChild){if(e===t){var o=n.firstChild.nextSibling;o.classList.add("todolist__focus"),r.a.showDetail(o.getAttribute("idnum"))}}else s()}(a,n)}})),L.addEventListener("click",(function(e){var t=document.querySelector(".todolist__list"),n=document.querySelector(".todolist__focus");if(e.target.classList.contains("icon__delete")){var o=e.target.getAttribute("idnum");r.a.modifyTask(o,"taskType","bin");var a=e.target.parentNode.parentNode,i=a.previousSibling.classList.contains("todolist__content"),c=a.nextSibling;if((!i&&null==c||!i&&!c.classList.contains("todolist__content"))&&a.parentNode.removeChild(a.previousSibling),a.parentNode.removeChild(a),t.firstChild){if(a===n){var l=t.firstChild.nextSibling;l.classList.add("todolist__focus"),r.a.showDetail(l.getAttribute("idnum"))}}else s()}})),L.addEventListener("click",(function(e){if(e.target.classList.contains("todolist__content")){var t=e.target.parentNode.childNodes,n=e.target.getAttribute("idnum");t.forEach((function(e){e.classList.remove("todolist__focus")})),e.target.classList.add("todolist__focus"),r.a.showDetail(n)}})),q.addEventListener("focusout",(function(){var e=document.querySelector(".todolist__focus").getAttribute("idnum"),t=this.value;r.a.modifyTask(e,"detail",t)})),S.addEventListener("click",(function(){n.e(4).then(n.bind(null,389)).then((function(e){e.deleteAllPopup.createPopup()}))}));n(370);var I=n(161);Object(I.b)()},4:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return l}));n(164);var r,o=n(30),a=n(14);function i(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){i(a,r,o,c,s,"next",e)}function s(e){i(a,r,o,c,s,"throw",e)}c(void 0)}))}}function s(){r=o.a}function l(){(r=o.b).deleteAllTasks()}var u={db:r=localStorage.getItem("DB-name")&&localStorage.getItem("CouchDB-auth")?o.a:o.b,addTask:function(){r.addTask()},addRandomTask:function(){r.addRandomTask()},renderByTaskType:function(e){return c(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.renderByTaskType(e);case 2:n=t.sent,a.a.emit("renderByTaskType",n);case 4:case"end":return t.stop()}}),t)})))()},renderByTaskLevel:function(e){return c(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.renderByTaskLevel(e);case 2:n=t.sent,a.a.emit("renderByTaskLevel",n);case 4:case"end":return t.stop()}}),t)})))()},renderBySearch:function(e){return c(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.renderBySearch();case 2:n=t.sent,a.a.emit("renderBySearch",{input:e,result:n});case 4:case"end":return t.stop()}}),t)})))()},modifyTask:function(e,t,n){r.modifyTask(e,t,n)},showDetail:function(e){return c(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.showDetail(e);case 2:n=t.sent,a.a.emit("showDetail",n);case 4:case"end":return t.stop()}}),t)})))()},deleteAllTasks:function(){r.deleteAllTasks(),a.a.emit("deleteAllTasks")}}},64:function(e,t,n){"use strict";t.a={syncUrl:"http://192.168.229.130:4000",signinUrl:"http://192.168.229.130:3000/api/user/login",registerUrl:"http://192.168.229.130:3000/api/user/register",changeUsernameUrl:"http://192.168.229.130:4000/api/user/changeUsername"}}});