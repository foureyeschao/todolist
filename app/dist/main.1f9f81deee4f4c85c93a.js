!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=26)}([function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function f(e,t,n,r){var i,o,s,a;if(u(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=l(e))>0&&s.length>i&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=s.length,a=c,console&&console.warn&&console.warn(a)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=d.bind(r);return i.listener=n,r.wrapFn=i,i}function p(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):y(i,i.length)}function v(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function y(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=i[e];if(void 0===c)return!1;if("function"==typeof c)o(c,this,t);else{var u=c.length,l=y(c,u);for(n=0;n<u;++n)o(l[n],this,t)}return!0},a.prototype.addListener=function(e,t){return f(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return f(this,e,t,!0)},a.prototype.once=function(e,t){return u(t),this.on(e,h(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,h(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,r,i,o,s;if(u(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},a.prototype.listeners=function(e){return p(this,e,!0)},a.prototype.rawListeners=function(e){return p(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):v.call(e,t)},a.prototype.listenerCount=v,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){"use strict";(function(t){var n,r,i=t.MutationObserver||t.WebKitMutationObserver;if(i){var o=0,s=new i(l),a=t.document.createTextNode("");s.observe(a,{characterData:!0}),n=function(){a.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){l(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(l,0)};else{var c=new t.MessageChannel;c.port1.onmessage=l,n=function(){c.port2.postMessage(0)}}var u=[];function l(){var e,t;r=!0;for(var n=u.length;n;){for(t=u,u=[],e=-1;++e<n;)t[e]();n=u.length}r=!1}e.exports=function(e){1!==u.push(e)||r||n()}}).call(this,n(8))},function(e,t,n){"use strict";e.exports=function(e){return function(){var t=arguments.length;if(t){for(var n=[],r=-1;++r<t;)n[r]=arguments[r];return e.call(this,n)}return e.call(this,[])}}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){e.exports=function(e){"use strict";var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(e,t){var n=e[0],r=e[1],i=e[2],o=e[3];r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&i)+t[1]-389564586|0)<<12|o>>>20)+n|0)&n|~o&r)+t[2]+606105819|0)<<17|i>>>15)+o|0)&o|~i&n)+t[3]-1044525330|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&i)+t[5]+1200080426|0)<<12|o>>>20)+n|0)&n|~o&r)+t[6]-1473231341|0)<<17|i>>>15)+o|0)&o|~i&n)+t[7]-45705983|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&i)+t[9]-1958414417|0)<<12|o>>>20)+n|0)&n|~o&r)+t[10]-42063|0)<<17|i>>>15)+o|0)&o|~i&n)+t[11]-1990404162|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&i)+t[13]-40341101|0)<<12|o>>>20)+n|0)&n|~o&r)+t[14]-1502002290|0)<<17|i>>>15)+o|0)&o|~i&n)+t[15]+1236535329|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[1]-165796510|0)<<5|n>>>27)+r|0)&i|r&~i)+t[6]-1069501632|0)<<9|o>>>23)+n|0)&r|n&~r)+t[11]+643717713|0)<<14|i>>>18)+o|0)&n|o&~n)+t[0]-373897302|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[5]-701558691|0)<<5|n>>>27)+r|0)&i|r&~i)+t[10]+38016083|0)<<9|o>>>23)+n|0)&r|n&~r)+t[15]-660478335|0)<<14|i>>>18)+o|0)&n|o&~n)+t[4]-405537848|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[9]+568446438|0)<<5|n>>>27)+r|0)&i|r&~i)+t[14]-1019803690|0)<<9|o>>>23)+n|0)&r|n&~r)+t[3]-187363961|0)<<14|i>>>18)+o|0)&n|o&~n)+t[8]+1163531501|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[13]-1444681467|0)<<5|n>>>27)+r|0)&i|r&~i)+t[2]-51403784|0)<<9|o>>>23)+n|0)&r|n&~r)+t[7]+1735328473|0)<<14|i>>>18)+o|0)&n|o&~n)+t[12]-1926607734|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[5]-378558|0)<<4|n>>>28)+r|0)^r^i)+t[8]-2022574463|0)<<11|o>>>21)+n|0)^n^r)+t[11]+1839030562|0)<<16|i>>>16)+o|0)^o^n)+t[14]-35309556|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[1]-1530992060|0)<<4|n>>>28)+r|0)^r^i)+t[4]+1272893353|0)<<11|o>>>21)+n|0)^n^r)+t[7]-155497632|0)<<16|i>>>16)+o|0)^o^n)+t[10]-1094730640|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[13]+681279174|0)<<4|n>>>28)+r|0)^r^i)+t[0]-358537222|0)<<11|o>>>21)+n|0)^n^r)+t[3]-722521979|0)<<16|i>>>16)+o|0)^o^n)+t[6]+76029189|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[9]-640364487|0)<<4|n>>>28)+r|0)^r^i)+t[12]-421815835|0)<<11|o>>>21)+n|0)^n^r)+t[15]+530742520|0)<<16|i>>>16)+o|0)^o^n)+t[2]-995338651|0)<<23|r>>>9)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[0]-198630844|0)<<6|n>>>26)+r|0)|~i))+t[7]+1126891415|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[14]-1416354905|0)<<15|i>>>17)+o|0)|~n))+t[5]-57434055|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[12]+1700485571|0)<<6|n>>>26)+r|0)|~i))+t[3]-1894986606|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[10]-1051523|0)<<15|i>>>17)+o|0)|~n))+t[1]-2054922799|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[8]+1873313359|0)<<6|n>>>26)+r|0)|~i))+t[15]-30611744|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[6]-1560198380|0)<<15|i>>>17)+o|0)|~n))+t[13]+1309151649|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[4]-145523070|0)<<6|n>>>26)+r|0)|~i))+t[11]-1120210379|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[2]+718787259|0)<<15|i>>>17)+o|0)|~n))+t[9]-343485551|0)<<21|r>>>11)+i|0,e[0]=n+e[0]|0,e[1]=r+e[1]|0,e[2]=i+e[2]|0,e[3]=o+e[3]|0}function r(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function i(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function o(e){var t,i,o,s,a,c,u=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=u;t+=64)n(l,r(e.substring(t-64,t)));for(i=(e=e.substring(t-64)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<i;t+=1)o[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(n(l,o),t=0;t<16;t+=1)o[t]=0;return s=(s=8*u).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(s[2],16),c=parseInt(s[1],16)||0,o[14]=a,o[15]=c,n(l,o),l}function s(e){var n,r="";for(n=0;n<4;n+=1)r+=t[e>>8*n+4&15]+t[e>>8*n&15];return r}function a(e){var t;for(t=0;t<e.length;t+=1)e[t]=s(e[t]);return e.join("")}function c(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function u(e){var t,n=[],r=e.length;for(t=0;t<r-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function l(){this.reset()}return a(o("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(n,r){var i,o,s,a,c=this.byteLength,u=t(n,c),l=c;return r!==e&&(l=t(r,c)),u>l?new ArrayBuffer(0):(i=l-u,o=new ArrayBuffer(i),s=new Uint8Array(o),a=new Uint8Array(this,u,i),s.set(a),o)}}(),l.prototype.append=function(e){return this.appendBinary(c(e)),this},l.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,i=this._buff.length;for(t=64;t<=i;t+=64)n(this._hash,r(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},l.prototype.end=function(e){var t,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(o,i),n=a(this._hash),e&&(n=u(n)),this.reset(),n},l.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},l.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},l.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},l.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},l.prototype._finish=function(e,t){var r,i,o,s=t;if(e[s>>2]|=128<<(s%4<<3),s>55)for(n(this._hash,e),s=0;s<16;s+=1)e[s]=0;r=(r=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(r[2],16),o=parseInt(r[1],16)||0,e[14]=i,e[15]=o,n(this._hash,e)},l.hash=function(e,t){return l.hashBinary(c(e),t)},l.hashBinary=function(e,t){var n=a(o(e));return t?u(n):n},l.ArrayBuffer=function(){this.reset()},l.ArrayBuffer.prototype.append=function(e){var t,r,o,s,a,c=(r=this._buff.buffer,o=e,s=!0,(a=new Uint8Array(r.byteLength+o.byteLength)).set(new Uint8Array(r)),a.set(new Uint8Array(o),r.byteLength),s?a:a.buffer),u=c.length;for(this._length+=e.byteLength,t=64;t<=u;t+=64)n(this._hash,i(c.subarray(t-64,t)));return this._buff=t-64<u?new Uint8Array(c.buffer.slice(t-64)):new Uint8Array(0),this},l.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=r[t]<<(t%4<<3);return this._finish(o,i),n=a(this._hash),e&&(n=u(n)),this.reset(),n},l.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},l.ArrayBuffer.prototype.getState=function(){var e,t=l.prototype.getState.call(this);return t.buff=(e=t.buff,String.fromCharCode.apply(null,new Uint8Array(e))),t},l.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e,t){var n,r=e.length,i=new ArrayBuffer(r),o=new Uint8Array(i);for(n=0;n<r;n+=1)o[n]=e.charCodeAt(n);return t?o:i}(e.buff,!0),l.prototype.setState.call(this,e)},l.ArrayBuffer.prototype.destroy=l.prototype.destroy,l.ArrayBuffer.prototype._finish=l.prototype._finish,l.ArrayBuffer.hash=function(e,t){var r=a(function(e){var t,r,o,s,a,c,u=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=u;t+=64)n(l,i(e.subarray(t-64,t)));for(e=t-64<u?e.subarray(t-64):new Uint8Array(0),r=e.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<r;t+=1)o[t>>2]|=e[t]<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(n(l,o),t=0;t<16;t+=1)o[t]=0;return s=(s=8*u).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(s[2],16),c=parseInt(s[1],16)||0,o[14]=a,o[15]=c,n(l,o),l}(new Uint8Array(e)));return t?u(r):r},l}()},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));n(6);var r=n(4),i=n.n(r);e.setImmediate||e.setTimeout;function o(e){return i.a.hash(e)}}).call(this,n(8))},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return a}));var r=function(e){return btoa(e)};function i(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}function o(e,t){return function(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}([i(e)],{type:t})}function s(e,t){return o(atob(e),t)}function a(e,t){var n=new FileReader;n.onloadend=function(e){var n=e.target.result||new ArrayBuffer(0);t(n)},n.readAsArrayBuffer(e)}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";(function(e,r){var i,o,s=n(1),a=n.n(s),c=n(10),u=n.n(c),l=n(4),f=n.n(l),d=n(11),h=n.n(d),p=n(2),v=n.n(p),y=n(3),g=n.n(y),m=n(0);function _(e){return"$"+e}function b(e){return e.substring(1)}function w(){this._store={}}function k(e){if(this._store=new w,e&&Array.isArray(e))for(var t=0,n=e.length;t<n;t++)this.add(e[t])}function A(e){if(e instanceof ArrayBuffer)return function(e){if("function"==typeof e.slice)return e.slice(0);var t=new ArrayBuffer(e.byteLength),n=new Uint8Array(t),r=new Uint8Array(e);return n.set(r),t}(e);var t=e.size,n=e.type;return"function"==typeof e.slice?e.slice(0,t,n):e.webkitSlice(0,t,n)}w.prototype.get=function(e){var t=_(e);return this._store[t]},w.prototype.set=function(e,t){var n=_(e);return this._store[n]=t,!0},w.prototype.has=function(e){return _(e)in this._store},w.prototype.delete=function(e){var t=_(e),n=t in this._store;return delete this._store[t],n},w.prototype.forEach=function(e){for(var t=Object.keys(this._store),n=0,r=t.length;n<r;n++){var i=t[n];e(this._store[i],i=b(i))}},Object.defineProperty(w.prototype,"size",{get:function(){return Object.keys(this._store).length}}),k.prototype.add=function(e){return this._store.set(e,!0)},k.prototype.has=function(e){return this._store.has(e)},k.prototype.forEach=function(e){this._store.forEach((function(t,n){e(n)}))},Object.defineProperty(k.prototype,"size",{get:function(){return this._store.size}}),!function(){if("undefined"==typeof Symbol||"undefined"==typeof Map||"undefined"==typeof Set)return!1;var e=Object.getOwnPropertyDescriptor(Map,Symbol.species);return e&&"get"in e&&Map[Symbol.species]===Map}()?(i=k,o=w):(i=Set,o=Map);var x=Function.prototype.toString,q=x.call(Object);function O(e){var t,n,r;if(!e||"object"!=typeof e)return e;if(Array.isArray(e)){for(t=[],n=0,r=e.length;n<r;n++)t[n]=O(e[n]);return t}if(e instanceof Date)return e.toISOString();if(function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer||"undefined"!=typeof Blob&&e instanceof Blob}(e))return A(e);if(!function(e){var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&x.call(n)==q}(e))return e;for(n in t={},e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=O(e[n]);void 0!==i&&(t[n]=i)}return t}function j(e){var t=!1;return v()((function(n){if(t)throw new Error("once called more than once");t=!0,e.apply(this,n)}))}function S(e){return v()((function(t){t=O(t);var n=this,r="function"==typeof t[t.length-1]&&t.pop(),i=new Promise((function(r,i){var o;try{var s=j((function(e,t){e?i(e):r(t)}));t.push(s),(o=e.apply(n,t))&&"function"==typeof o.then&&r(o)}catch(e){i(e)}}));return r&&i.then((function(e){r(null,e)}),r),i}))}function E(e,t){return S(v()((function(n){if(this._closed)return Promise.reject(new Error("database is closed"));if(this._destroyed)return Promise.reject(new Error("database is destroyed"));var r=this;return function(e,t,n){if(e.constructor.listeners("debug").length){for(var r=["api",e.name,t],i=0;i<n.length-1;i++)r.push(n[i]);e.constructor.emit("debug",r);var o=n[n.length-1];n[n.length-1]=function(n,r){var i=["api",e.name,t];i=i.concat(n?["error",n]:["success",r]),e.constructor.emit("debug",i),o(n,r)}}}(r,e,n),this.taskqueue.isReady?t.apply(this,n):new Promise((function(t,i){r.taskqueue.addTask((function(o){o?i(o):t(r[e].apply(r,n))}))}))})))}function L(e,t){for(var n={},r=0,i=t.length;r<i;r++){var o=t[r];o in e&&(n[o]=e[o])}return n}var C;function $(e){return e}function T(e){return[{ok:e}]}function M(e,t,n){var r=t.docs,i=new o;r.forEach((function(e){i.has(e.id)?i.get(e.id).push(e):i.set(e.id,[e])}));var s=i.size,a=0,c=new Array(s);function u(){var e;++a===s&&(e=[],c.forEach((function(t){t.docs.forEach((function(n){e.push({id:t.id,docs:[n]})}))})),n(null,{results:e}))}var l=[];i.forEach((function(e,t){l.push(t)}));var f=0;function d(){if(!(f>=l.length)){var n=Math.min(f+6,l.length),r=l.slice(f,n);!function(n,r){n.forEach((function(n,o){var s=r+o,a=i.get(n),l=L(a[0],["atts_since","attachments"]);l.open_revs=a.map((function(e){return e.rev})),l.open_revs=l.open_revs.filter($);var f=$;0===l.open_revs.length&&(delete l.open_revs,f=T),["revs","attachments","binary","ajax","latest"].forEach((function(e){e in t&&(l[e]=t[e])})),e.get(n,l,(function(e,t){var r,i,o;r=e?[{error:e}]:f(t),i=n,o=r,c[s]={id:i,docs:o},u(),d()}))}))}(r,f),f+=r.length}}d()}try{localStorage.setItem("_pouch_check_localstorage",1),C=!!localStorage.getItem("_pouch_check_localstorage")}catch(e){C=!1}function P(){return C}function D(){var e;m.EventEmitter.call(this),this._listeners={},e=this,P()&&addEventListener("storage",(function(t){e.emit(t.key)}))}function B(e){if("undefined"!=typeof console&&"function"==typeof console[e]){var t=Array.prototype.slice.call(arguments,1);console[e].apply(console,t)}}function z(e){var t=0;return e||(t=2e3),function(e,t){return e=parseInt(e,10)||0,(t=parseInt(t,10))!=t||t<=e?t=(e||1)<<1:t+=1,t>6e5&&(e=3e5,t=6e5),~~((t-e)*Math.random()+e)}(e,t)}function I(e,t){B("info","The above "+e+" is totally normal. "+t)}g()(D,m.EventEmitter),D.prototype.addListener=function(e,t,n,r){if(!this._listeners[t]){var i=this,o=!1;this._listeners[t]=s,this.on(e,s)}function s(){if(i._listeners[t])if(o)o="waiting";else{o=!0;var e=L(r,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary","return_docs"]);n.changes(e).on("change",(function(e){e.seq>r.since&&!r.cancelled&&(r.since=e.seq,r.onChange(e))})).on("complete",(function(){"waiting"===o&&a()(s),o=!1})).on("error",(function(){o=!1}))}}},D.prototype.removeListener=function(e,t){t in this._listeners&&(m.EventEmitter.prototype.removeListener.call(this,e,this._listeners[t]),delete this._listeners[t])},D.prototype.notifyLocalWindows=function(e){P()&&(localStorage[e]="a"===localStorage[e]?"b":"a")},D.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)};var N="function"==typeof Object.assign?Object.assign:function(e){for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t};function R(e,t,n){Error.call(this,n),this.status=e,this.name=t,this.message=n,this.error=!0}g()(R,Error),R.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};new R(401,"unauthorized","Name or password is incorrect.");var H=new R(400,"bad_request","Missing JSON list of 'docs'"),U=new R(404,"not_found","missing"),F=new R(409,"conflict","Document update conflict"),V=new R(400,"bad_request","_id field must contain a string"),J=new R(412,"missing_id","_id is required for puts"),K=new R(400,"bad_request","Only reserved document ids may start with underscore."),W=(new R(412,"precondition_failed","Database not open"),new R(500,"unknown_error","Database encountered an unknown error")),G=new R(500,"badarg","Some query argument is invalid"),Q=(new R(400,"invalid_request","Request was invalid"),new R(400,"query_parse_error","Some query parameter is invalid")),X=new R(500,"doc_validation","Bad special document member"),Y=new R(400,"bad_request","Something wrong with the request"),Z=new R(400,"bad_request","Document must be a JSON object"),ee=(new R(404,"not_found","Database not found"),new R(500,"indexed_db_went_bad","unknown")),te=(new R(500,"web_sql_went_bad","unknown"),new R(500,"levelDB_went_went_bad","unknown"),new R(403,"forbidden","Forbidden by design doc validate_doc_update function"),new R(400,"bad_request","Invalid rev format")),ne=(new R(412,"file_exists","The database could not be created, the file already exists."),new R(412,"missing_stub","A pre-existing attachment stub wasn't found"));new R(413,"invalid_url","Provided URL is invalid");function re(e,t){function n(t){for(var n in e)"function"!=typeof e[n]&&(this[n]=e[n]);void 0!==t&&(this.reason=t)}return n.prototype=R.prototype,new n(t)}function ie(e){if("object"!=typeof e){var t=e;(e=W).data=t}return"error"in e&&"conflict"===e.error&&(e.name="conflict",e.status=409),"name"in e||(e.name=e.error||"unknown"),"status"in e||(e.status=500),"message"in e||(e.message=e.message||e.reason),e}function oe(e){var t={},n=e.filter&&"function"==typeof e.filter;return t.query=e.query_params,function(r){r.doc||(r.doc={});var i=n&&function(e,t,n){try{return!e(t,n)}catch(e){var r="Filter function threw: "+e.toString();return re(Y,r)}}(e.filter,r.doc,t);if("object"==typeof i)return i;if(i)return!1;if(e.include_docs){if(!e.attachments)for(var o in r.doc._attachments)r.doc._attachments.hasOwnProperty(o)&&(r.doc._attachments[o].stub=!0)}else delete r.doc;return!0}}function se(e){for(var t=[],n=0,r=e.length;n<r;n++)t=t.concat(e[n]);return t}function ae(e){var t;if(e?"string"!=typeof e?t=re(V):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(t=re(K)):t=re(J),t)throw t}function ce(e){return"boolean"==typeof e._remote?e._remote:"function"==typeof e.type&&(B("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===e.type())}function ue(e){if(!e)return null;var t=e.split("/");return 2===t.length?t:1===t.length?[e,e]:null}function le(e){var t=ue(e);return t?t.join("/"):null}var fe=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],de=/(?:^|&)([^&=]*)=?([^&]*)/g,he=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;function pe(e){for(var t=he.exec(e),n={},r=14;r--;){var i=fe[r],o=t[r]||"",s=-1!==["user","password"].indexOf(i);n[i]=s?decodeURIComponent(o):o}return n.queryKey={},n[fe[12]].replace(de,(function(e,t,r){t&&(n.queryKey[t]=r)})),n}function ve(e,t){var n=[],r=[];for(var i in t)t.hasOwnProperty(i)&&(n.push(i),r.push(t[i]));return n.push(e),Function.apply(null,n).apply(null,r)}function ye(e,t,n){return new Promise((function(r,i){e.get(t,(function(o,s){if(o){if(404!==o.status)return i(o);s={}}var a=s._rev,c=n(s);if(!c)return r({updated:!1,rev:a});c._id=t,c._rev=a,r(function(e,t,n){return e.put(t).then((function(e){return{updated:!0,rev:e.rev}}),(function(r){if(409!==r.status)throw r;return ye(e,t._id,n)}))}(e,c,n))}))}))}var ge=function(e){return atob(e)},me=function(e){return btoa(e)};function _e(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}function be(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}function we(e,t){return _e([be(e)],{type:t})}function ke(e,t){return we(ge(e),t)}function Ae(e,t){var n=new FileReader,r="function"==typeof n.readAsBinaryString;n.onloadend=function(e){var n=e.target.result||"";if(r)return t(n);t(function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i++)t+=String.fromCharCode(n[i]);return t}(n))},r?n.readAsBinaryString(e):n.readAsArrayBuffer(e)}function xe(e,t){Ae(e,(function(e){t(e)}))}function qe(e,t){xe(e,(function(e){t(me(e))}))}var Oe=e.setImmediate||e.setTimeout;function je(e,t,n,r,i){(n>0||r<t.size)&&(t=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.slice(t,n)}(t,n,r)),function(e,t){var n=new FileReader;n.onloadend=function(e){var n=e.target.result||new ArrayBuffer(0);t(n)},n.readAsArrayBuffer(e)}(t,(function(t){e.append(t),i()}))}function Se(e,t,n,r,i){(n>0||r<t.length)&&(t=t.substring(n,r)),e.appendBinary(t),i()}function Ee(e,t){var n="string"==typeof e,r=n?e.length:e.size,i=Math.min(32768,r),o=Math.ceil(r/i),s=0,a=n?new f.a:new f.a.ArrayBuffer,c=n?Se:je;function u(){Oe(d)}function l(){var e=function(e){return me(e)}(a.end(!0));t(e),a.destroy()}function d(){var t=s*i,n=t+i;s++,c(a,e,t,n,s<o?u:l)}d()}function Le(e){return f.a.hash(e)}function Ce(e,t){var n=O(e);return t?(delete n._rev_tree,Le(JSON.stringify(n))):u.a.v4().replace(/-/g,"").toLowerCase()}var $e=u.a.v4;function Te(e){for(var t,n,r,i,o=e.rev_tree.slice();i=o.pop();){var s=i.ids,a=s[2],c=i.pos;if(a.length)for(var u=0,l=a.length;u<l;u++)o.push({pos:c+1,ids:a[u]});else{var f=!!s[1].deleted,d=s[0];t&&!(r!==f?r:n!==c?n<c:t<d)||(t=d,n=c,r=f)}}return n+"-"+t}function Me(e,t){for(var n,r=e.slice();n=r.pop();)for(var i=n.pos,o=n.ids,s=o[2],a=t(0===s.length,i,o[0],n.ctx,o[1]),c=0,u=s.length;c<u;c++)r.push({pos:i+1,ids:s[c],ctx:a})}function Pe(e,t){return e.pos-t.pos}function De(e){var t=[];Me(e,(function(e,n,r,i,o){e&&t.push({rev:n+"-"+r,pos:n,opts:o})})),t.sort(Pe).reverse();for(var n=0,r=t.length;n<r;n++)delete t[n].pos;return t}function Be(e){for(var t=Te(e),n=De(e.rev_tree),r=[],i=0,o=n.length;i<o;i++){var s=n[i];s.rev===t||s.opts.deleted||r.push(s.rev)}return r}function ze(e){for(var t,n=[],r=e.slice();t=r.pop();){var i=t.pos,o=t.ids,s=o[0],a=o[1],c=o[2],u=0===c.length,l=t.history?t.history.slice():[];l.push({id:s,opts:a}),u&&n.push({pos:i+1-l.length,ids:l});for(var f=0,d=c.length;f<d;f++)r.push({pos:i+1,ids:c[f],history:l})}return n.reverse()}function Ie(e,t){return e.pos-t.pos}function Ne(e,t,n){var r=function(e,t,n){for(var r,i=0,o=e.length;i<o;)n(e[r=i+o>>>1],t)<0?i=r+1:o=r;return i}(e,t,n);e.splice(r,0,t)}function Re(e,t){for(var n,r,i=t,o=e.length;i<o;i++){var s=e[i],a=[s.id,s.opts,[]];r?(r[2].push(a),r=a):n=r=a}return n}function He(e,t){return e[0]<t[0]?-1:1}function Ue(e,t){for(var n=[{tree1:e,tree2:t}],r=!1;n.length>0;){var i=n.pop(),o=i.tree1,s=i.tree2;(o[1].status||s[1].status)&&(o[1].status="available"===o[1].status||"available"===s[1].status?"available":"missing");for(var a=0;a<s[2].length;a++)if(o[2][0]){for(var c=!1,u=0;u<o[2].length;u++)o[2][u][0]===s[2][a][0]&&(n.push({tree1:o[2][u],tree2:s[2][a]}),c=!0);c||(r="new_branch",Ne(o[2],s[2][a],He))}else r="new_leaf",o[2][0]=s[2][a]}return{conflicts:r,tree:e}}function Fe(e,t,n){var r,i=[],o=!1,s=!1;if(!e.length)return{tree:[t],conflicts:"new_leaf"};for(var a=0,c=e.length;a<c;a++){var u=e[a];if(u.pos===t.pos&&u.ids[0]===t.ids[0])r=Ue(u.ids,t.ids),i.push({pos:u.pos,ids:r.tree}),o=o||r.conflicts,s=!0;else if(!0!==n){var l=u.pos<t.pos?u:t,f=u.pos<t.pos?t:u,d=f.pos-l.pos,h=[],p=[];for(p.push({ids:l.ids,diff:d,parent:null,parentIdx:null});p.length>0;){var v=p.pop();if(0!==v.diff)for(var y=v.ids[2],g=0,m=y.length;g<m;g++)p.push({ids:y[g],diff:v.diff-1,parent:v.ids,parentIdx:g});else v.ids[0]===f.ids[0]&&h.push(v)}var _=h[0];_?(r=Ue(_.ids,f.ids),_.parent[2][_.parentIdx]=r.tree,i.push({pos:l.pos,ids:l.ids}),o=o||r.conflicts,s=!0):i.push(u)}else i.push(u)}return s||i.push(t),i.sort(Ie),{tree:i,conflicts:o||"internal_node"}}function Ve(e,t,n){var r=Fe(e,t),i=function(e,t){for(var n,r,i=ze(e),o=0,s=i.length;o<s;o++){var a,c=i[o],u=c.ids;if(u.length>t){n||(n={});var l=u.length-t;a={pos:c.pos+l,ids:Re(u,l)};for(var f=0;f<l;f++){var d=c.pos+f+"-"+u[f].id;n[d]=!0}}else a={pos:c.pos,ids:Re(u,0)};r=r?Fe(r,a,!0).tree:[a]}return n&&Me(r,(function(e,t,r){delete n[t+"-"+r]})),{tree:r,revs:n?Object.keys(n):[]}}(r.tree,n);return{tree:i.tree,stemmedRevs:i.revs,conflicts:r.conflicts}}function Je(e){return e.ids}function Ke(e,t){t||(t=Te(e));for(var n,r=t.substring(t.indexOf("-")+1),i=e.rev_tree.map(Je);n=i.pop();){if(n[0]===r)return!!n[1].deleted;i=i.concat(n[2])}}function We(e){return/^_local/.test(e)}function Ge(e,t,n){m.EventEmitter.call(this);var r=this;this.db=e;var i=(t=t?O(t):{}).complete=j((function(t,n){var i,s;t?(s="error",("listenerCount"in(i=r)?i.listenerCount(s):m.EventEmitter.listenerCount(i,s))>0&&r.emit("error",t)):r.emit("complete",n),r.removeAllListeners(),e.removeListener("destroyed",o)}));function o(){r.cancel()}n&&(r.on("complete",(function(e){n(null,e)})),r.on("error",n)),e.once("destroyed",o),t.onChange=function(e,t,n){r.isCancelled||function(e,t,n,r){try{e.emit("change",t,n,r)}catch(e){B("error",'Error in .on("change", function):',e)}}(r,e,t,n)};var s=new Promise((function(e,n){t.complete=function(t,r){t?n(t):e(r)}}));r.once("cancel",(function(){e.removeListener("destroyed",o),t.complete(null,{status:"cancelled"})})),this.then=s.then.bind(s),this.catch=s.catch.bind(s),this.then((function(e){i(null,e)}),i),e.taskqueue.isReady?r.validateChanges(t):e.taskqueue.addTask((function(e){e?t.complete(e):r.isCancelled?r.emit("cancel"):r.validateChanges(t)}))}function Qe(e,t,n){var r=[{rev:e._rev}];"all_docs"===n.style&&(r=De(t.rev_tree).map((function(e){return{rev:e.rev}})));var i={id:t.id,changes:r,doc:e};return Ke(t,e._rev)&&(i.deleted=!0),n.conflicts&&(i.doc._conflicts=Be(t),i.doc._conflicts.length||delete i.doc._conflicts),i}function Xe(e,t){return e<t?-1:e>t?1:0}function Ye(e,t){return function(n,r){n||r[0]&&r[0].error?((n=n||r[0]).docId=t,e(n)):e(null,r.length?r[0]:r)}}function Ze(e,t){var n=Xe(e._id,t._id);return 0!==n?n:Xe(e._revisions?e._revisions.start:0,t._revisions?t._revisions.start:0)}function et(){for(var e in m.EventEmitter.call(this),et.prototype)"function"==typeof this[e]&&(this[e]=this[e].bind(this))}function tt(){this.isReady=!1,this.failed=!1,this.queue=[]}function nt(e,t){if(!(this instanceof nt))return new nt(e,t);var n=this;if(t=t||{},e&&"object"==typeof e&&(e=(t=e).name,delete t.name),void 0===t.deterministic_revs&&(t.deterministic_revs=!0),this.__opts=t=O(t),n.auto_compaction=t.auto_compaction,n.prefix=nt.prefix,"string"!=typeof e)throw new Error("Missing/invalid DB name");var r=function(e,t){var n=e.match(/([a-z-]*):\/\/(.*)/);if(n)return{name:/https?/.test(n[1])?n[1]+"://"+n[2]:n[2],adapter:n[1]};var r=nt.adapters,i=nt.preferredAdapters,o=nt.prefix,s=t.adapter;if(!s)for(var a=0;a<i.length&&("idb"===(s=i[a])&&"websql"in r&&P()&&localStorage["_pouch__websqldb_"+o+e]);++a)B("log",'PouchDB is downgrading "'+e+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');var c=r[s];return{name:!(c&&"use_prefix"in c)||c.use_prefix?o+e:e,adapter:s}}((t.prefix||"")+e,t);if(t.name=r.name,t.adapter=t.adapter||r.adapter,n.name=e,n._adapter=t.adapter,nt.emit("debug",["adapter","Picked adapter: ",t.adapter]),!nt.adapters[t.adapter]||!nt.adapters[t.adapter].valid())throw new Error("Invalid Adapter: "+t.adapter);et.call(n),n.taskqueue=new tt,n.adapter=t.adapter,nt.adapters[t.adapter].call(n,t,(function(e){if(e)return n.taskqueue.fail(e);!function(e){function t(t){e.removeListener("closed",n),t||e.constructor.emit("destroyed",e.name)}function n(){e.removeListener("destroyed",t),e.constructor.emit("unref",e)}e.once("destroyed",t),e.once("closed",n),e.constructor.emit("ref",e)}(n),n.emit("created",n),nt.emit("created",n.name),n.taskqueue.ready(n)}))}g()(Ge,m.EventEmitter),Ge.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},Ge.prototype.validateChanges=function(e){var t=e.complete,n=this;nt._changesFilterPlugin?nt._changesFilterPlugin.validate(e,(function(r){if(r)return t(r);n.doChanges(e)})):n.doChanges(e)},Ge.prototype.doChanges=function(e){var t=this,n=e.complete;if("live"in(e=O(e))&&!("continuous"in e)&&(e.continuous=e.live),e.processChange=Qe,"latest"===e.since&&(e.since="now"),e.since||(e.since=0),"now"!==e.since){if(nt._changesFilterPlugin){if(nt._changesFilterPlugin.normalize(e),nt._changesFilterPlugin.shouldFilter(this,e))return nt._changesFilterPlugin.filter(this,e)}else["doc_ids","filter","selector","view"].forEach((function(t){t in e&&B("warn",'The "'+t+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')}));"descending"in e||(e.descending=!1),e.limit=0===e.limit?1:e.limit,e.complete=n;var r=this.db._changes(e);if(r&&"function"==typeof r.cancel){var i=t.cancel;t.cancel=v()((function(e){r.cancel(),i.apply(this,e)}))}}else this.db.info().then((function(r){t.isCancelled?n(null,{status:"cancelled"}):(e.since=r.update_seq,t.doChanges(e))}),n)},g()(et,m.EventEmitter),et.prototype.post=E("post",(function(e,t,n){if("function"==typeof t&&(n=t,t={}),"object"!=typeof e||Array.isArray(e))return n(re(Z));this.bulkDocs({docs:[e]},t,Ye(n,e._id))})),et.prototype.put=E("put",(function(e,t,n){if("function"==typeof t&&(n=t,t={}),"object"!=typeof e||Array.isArray(e))return n(re(Z));if(ae(e._id),We(e._id)&&"function"==typeof this._putLocal)return e._deleted?this._removeLocal(e,n):this._putLocal(e,n);var r,i,o,s,a=this;function c(n){"function"==typeof a._put&&!1!==t.new_edits?a._put(e,t,n):a.bulkDocs({docs:[e]},t,Ye(n,e._id))}t.force&&e._rev?(r=e._rev.split("-"),i=r[1],o=parseInt(r[0],10)+1,s=Ce(),e._revisions={start:o,ids:[s,i]},e._rev=o+"-"+s,t.new_edits=!1,c((function(t){var r=t?null:{ok:!0,id:e._id,rev:e._rev};n(t,r)}))):c(n)})),et.prototype.putAttachment=E("putAttachment",(function(e,t,n,r,i){var o=this;function s(e){var n="_rev"in e?parseInt(e._rev,10):0;return e._attachments=e._attachments||{},e._attachments[t]={content_type:i,data:r,revpos:++n},o.put(e)}return"function"==typeof i&&(i=r,r=n,n=null),void 0===i&&(i=r,r=n,n=null),i||B("warn","Attachment",t,"on document",e,"is missing content_type"),o.get(e).then((function(e){if(e._rev!==n)throw re(F);return s(e)}),(function(t){if(t.reason===U.message)return s({_id:e});throw t}))})),et.prototype.removeAttachment=E("removeAttachment",(function(e,t,n,r){var i=this;i.get(e,(function(e,o){if(e)r(e);else if(o._rev===n){if(!o._attachments)return r();delete o._attachments[t],0===Object.keys(o._attachments).length&&delete o._attachments,i.put(o,r)}else r(re(F))}))})),et.prototype.remove=E("remove",(function(e,t,n,r){var i;"string"==typeof t?(i={_id:e,_rev:t},"function"==typeof n&&(r=n,n={})):(i=e,"function"==typeof t?(r=t,n={}):(r=n,n=t)),(n=n||{}).was_delete=!0;var o={_id:i._id,_rev:i._rev||n.rev,_deleted:!0};if(We(o._id)&&"function"==typeof this._removeLocal)return this._removeLocal(i,r);this.bulkDocs({docs:[o]},n,Ye(r,o._id))})),et.prototype.revsDiff=E("revsDiff",(function(e,t,n){"function"==typeof t&&(n=t,t={});var r=Object.keys(e);if(!r.length)return n(null,{});var i=0,s=new o;function a(e,t){s.has(e)||s.set(e,{missing:[]}),s.get(e).missing.push(t)}r.map((function(t){this._getRevisionTree(t,(function(o,c){if(o&&404===o.status&&"missing"===o.message)s.set(t,{missing:e[t]});else{if(o)return n(o);!function(t,n){var r=e[t].slice(0);Me(n,(function(e,n,i,o,s){var c=n+"-"+i,u=r.indexOf(c);-1!==u&&(r.splice(u,1),"available"!==s.status&&a(t,c))})),r.forEach((function(e){a(t,e)}))}(t,c)}if(++i===r.length){var u={};return s.forEach((function(e,t){u[t]=e})),n(null,u)}}))}),this)})),et.prototype.bulkGet=E("bulkGet",(function(e,t){M(this,e,t)})),et.prototype.compactDocument=E("compactDocument",(function(e,t,n){var r=this;this._getRevisionTree(e,(function(i,o){if(i)return n(i);var s=function(e){var t={},n=[];return Me(e,(function(e,r,i,o){var s=r+"-"+i;return e&&(t[s]=0),void 0!==o&&n.push({from:o,to:s}),s})),n.reverse(),n.forEach((function(e){void 0===t[e.from]?t[e.from]=1+t[e.to]:t[e.from]=Math.min(t[e.from],1+t[e.to])})),t}(o),a=[],c=[];Object.keys(s).forEach((function(e){s[e]>t&&a.push(e)})),Me(o,(function(e,t,n,r,i){var o=t+"-"+n;"available"===i.status&&-1!==a.indexOf(o)&&c.push(o)})),r._doCompaction(e,c,n)}))})),et.prototype.compact=E("compact",(function(e,t){"function"==typeof e&&(t=e,e={});e=e||{},this._compactionQueue=this._compactionQueue||[],this._compactionQueue.push({opts:e,callback:t}),1===this._compactionQueue.length&&function e(t){var n=t._compactionQueue[0],r=n.opts,i=n.callback;t.get("_local/compaction").catch((function(){return!1})).then((function(n){n&&n.last_seq&&(r.last_seq=n.last_seq),t._compact(r,(function(n,r){n?i(n):i(null,r),a()((function(){t._compactionQueue.shift(),t._compactionQueue.length&&e(t)}))}))}))}(this)})),et.prototype._compact=function(e,t){var n=this,r={return_docs:!1,last_seq:e.last_seq||0},i=[];n.changes(r).on("change",(function(e){i.push(n.compactDocument(e.id,0))})).on("complete",(function(e){var r=e.last_seq;Promise.all(i).then((function(){return ye(n,"_local/compaction",(function(e){return(!e.last_seq||e.last_seq<r)&&(e.last_seq=r,e)}))})).then((function(){t(null,{ok:!0})})).catch(t)})).on("error",t)},et.prototype.get=E("get",(function(e,t,n){if("function"==typeof t&&(n=t,t={}),"string"!=typeof e)return n(re(V));if(We(e)&&"function"==typeof this._getLocal)return this._getLocal(e,n);var r=[],i=this;function o(){var o=[],s=r.length;if(!s)return n(null,o);r.forEach((function(r){i.get(e,{rev:r,revs:t.revs,latest:t.latest,attachments:t.attachments,binary:t.binary},(function(e,t){if(e)o.push({missing:r});else{for(var i,a=0,c=o.length;a<c;a++)if(o[a].ok&&o[a].ok._rev===t._rev){i=!0;break}i||o.push({ok:t})}--s||n(null,o)}))}))}if(!t.open_revs)return this._get(e,t,(function(r,o){if(r)return r.docId=e,n(r);var s=o.doc,a=o.metadata,c=o.ctx;if(t.conflicts){var u=Be(a);u.length&&(s._conflicts=u)}if(Ke(a,s._rev)&&(s._deleted=!0),t.revs||t.revs_info){for(var l=s._rev.split("-"),f=parseInt(l[0],10),d=l[1],h=ze(a.rev_tree),p=null,v=0;v<h.length;v++){var y=h[v],g=y.ids.map((function(e){return e.id})).indexOf(d);(g===f-1||!p&&-1!==g)&&(p=y)}if(!p)return(r=new Error("invalid rev tree")).docId=e,n(r);var m=p.ids.map((function(e){return e.id})).indexOf(s._rev.split("-")[1])+1,_=p.ids.length-m;if(p.ids.splice(m,_),p.ids.reverse(),t.revs&&(s._revisions={start:p.pos+p.ids.length-1,ids:p.ids.map((function(e){return e.id}))}),t.revs_info){var b=p.pos+p.ids.length;s._revs_info=p.ids.map((function(e){return{rev:--b+"-"+e.id,status:e.opts.status}}))}}if(t.attachments&&s._attachments){var w=s._attachments,k=Object.keys(w).length;if(0===k)return n(null,s);Object.keys(w).forEach((function(e){this._getAttachment(s._id,e,w[e],{rev:s._rev,binary:t.binary,ctx:c},(function(t,r){var i=s._attachments[e];i.data=r,delete i.stub,delete i.length,--k||n(null,s)}))}),i)}else{if(s._attachments)for(var A in s._attachments)s._attachments.hasOwnProperty(A)&&(s._attachments[A].stub=!0);n(null,s)}}));if("all"===t.open_revs)this._getRevisionTree(e,(function(e,t){if(e)return n(e);r=De(t).map((function(e){return e.rev})),o()}));else{if(!Array.isArray(t.open_revs))return n(re(W,"function_clause"));r=t.open_revs;for(var s=0;s<r.length;s++){var a=r[s];if("string"!=typeof a||!/^\d+-/.test(a))return n(re(te))}o()}})),et.prototype.getAttachment=E("getAttachment",(function(e,t,n,r){var i=this;n instanceof Function&&(r=n,n={}),this._get(e,n,(function(o,s){return o?r(o):s.doc._attachments&&s.doc._attachments[t]?(n.ctx=s.ctx,n.binary=!0,void i._getAttachment(e,t,s.doc._attachments[t],n,r)):r(re(U))}))})),et.prototype.allDocs=E("allDocs",(function(e,t){if("function"==typeof e&&(t=e,e={}),e.skip=void 0!==e.skip?e.skip:0,e.start_key&&(e.startkey=e.start_key),e.end_key&&(e.endkey=e.end_key),"keys"in e){if(!Array.isArray(e.keys))return t(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter((function(t){return t in e}))[0];if(n)return void t(re(Q,"Query parameter `"+n+"` is not compatible with multi-get"));if(!ce(this)&&(function(e){var t="limit"in e?e.keys.slice(e.skip,e.limit+e.skip):e.skip>0?e.keys.slice(e.skip):e.keys;e.keys=t,e.skip=0,delete e.limit,e.descending&&(t.reverse(),e.descending=!1)}(e),0===e.keys.length))return this._allDocs({limit:0},t)}return this._allDocs(e,t)})),et.prototype.changes=function(e,t){return"function"==typeof e&&(t=e,e={}),(e=e||{}).return_docs="return_docs"in e?e.return_docs:!e.live,new Ge(this,e,t)},et.prototype.close=E("close",(function(e){return this._closed=!0,this.emit("closed"),this._close(e)})),et.prototype.info=E("info",(function(e){var t=this;this._info((function(n,r){if(n)return e(n);r.db_name=r.db_name||t.name,r.auto_compaction=!(!t.auto_compaction||ce(t)),r.adapter=t.adapter,e(null,r)}))})),et.prototype.id=E("id",(function(e){return this._id(e)})),et.prototype.type=function(){return"function"==typeof this._type?this._type():this.adapter},et.prototype.bulkDocs=E("bulkDocs",(function(e,t,n){if("function"==typeof t&&(n=t,t={}),t=t||{},Array.isArray(e)&&(e={docs:e}),!e||!e.docs||!Array.isArray(e.docs))return n(re(H));for(var r=0;r<e.docs.length;++r)if("object"!=typeof e.docs[r]||Array.isArray(e.docs[r]))return n(re(Z));var i;if(e.docs.forEach((function(e){e._attachments&&Object.keys(e._attachments).forEach((function(t){i=i||function(e){return"_"===e.charAt(0)&&e+" is not a valid attachment name, attachment names cannot start with '_'"}(t),e._attachments[t].content_type||B("warn","Attachment",t,"on document",e._id,"is missing content_type")}))})),i)return n(re(Y,i));"new_edits"in t||(t.new_edits=!("new_edits"in e)||e.new_edits);var o=this;t.new_edits||ce(o)||e.docs.sort(Ze),function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n._deleted)delete n._attachments;else if(n._attachments)for(var r=Object.keys(n._attachments),i=0;i<r.length;i++){var o=r[i];n._attachments[o]=L(n._attachments[o],["data","digest","content_type","length","revpos","stub"])}}}(e.docs);var s=e.docs.map((function(e){return e._id}));return this._bulkDocs(e,t,(function(e,r){if(e)return n(e);if(t.new_edits||(r=r.filter((function(e){return e.error}))),!ce(o))for(var i=0,a=r.length;i<a;i++)r[i].id=r[i].id||s[i];n(null,r)}))})),et.prototype.registerDependentDatabase=E("registerDependentDatabase",(function(e,t){var n=new this.constructor(e,this.__opts);ye(this,"_local/_pouch_dependentDbs",(function(t){return t.dependentDbs=t.dependentDbs||{},!t.dependentDbs[e]&&(t.dependentDbs[e]=!0,t)})).then((function(){t(null,{db:n})})).catch(t)})),et.prototype.destroy=E("destroy",(function(e,t){"function"==typeof e&&(t=e,e={});var n=this,r=!("use_prefix"in n)||n.use_prefix;function i(){n._destroy(e,(function(e,r){if(e)return t(e);n._destroyed=!0,n.emit("destroyed"),t(null,r||{ok:!0})}))}if(ce(n))return i();n.get("_local/_pouch_dependentDbs",(function(e,o){if(e)return 404!==e.status?t(e):i();var s=o.dependentDbs,a=n.constructor,c=Object.keys(s).map((function(e){var t=r?e.replace(new RegExp("^"+a.prefix),""):e;return new a(t,n.__opts).destroy()}));Promise.all(c).then(i,t)}))})),tt.prototype.execute=function(){var e;if(this.failed)for(;e=this.queue.shift();)e(this.failed);else for(;e=this.queue.shift();)e()},tt.prototype.fail=function(e){this.failed=e,this.execute()},tt.prototype.ready=function(e){this.isReady=!0,this.db=e,this.execute()},tt.prototype.addTask=function(e){this.queue.push(e),this.failed&&this.execute()},g()(nt,et);var rt="undefined"!=typeof AbortController?AbortController:function(){return{abort:function(){}}},it=fetch,ot=Headers;nt.adapters={},nt.preferredAdapters=[],nt.prefix="_pouch_";var st=new m.EventEmitter;!function(e){Object.keys(m.EventEmitter.prototype).forEach((function(t){"function"==typeof m.EventEmitter.prototype[t]&&(e[t]=st[t].bind(st))}));var t=e._destructionListeners=new o;e.on("ref",(function(e){t.has(e.name)||t.set(e.name,[]),t.get(e.name).push(e)})),e.on("unref",(function(e){if(t.has(e.name)){var n=t.get(e.name),r=n.indexOf(e);r<0||(n.splice(r,1),n.length>1?t.set(e.name,n):t.delete(e.name))}})),e.on("destroyed",(function(e){if(t.has(e)){var n=t.get(e);t.delete(e),n.forEach((function(e){e.emit("destroyed",!0)}))}}))}(nt),nt.adapter=function(e,t,n){t.valid()&&(nt.adapters[e]=t,n&&nt.preferredAdapters.push(e))},nt.plugin=function(e){if("function"==typeof e)e(nt);else{if("object"!=typeof e||0===Object.keys(e).length)throw new Error('Invalid plugin: got "'+e+'", expected an object or a function');Object.keys(e).forEach((function(t){nt.prototype[t]=e[t]}))}return this.__defaults&&(nt.__defaults=N({},this.__defaults)),nt},nt.defaults=function(e){function t(e,n){if(!(this instanceof t))return new t(e,n);n=n||{},e&&"object"==typeof e&&(e=(n=e).name,delete n.name),n=N({},t.__defaults,n),nt.call(this,e,n)}return g()(t,nt),t.preferredAdapters=nt.preferredAdapters.slice(),Object.keys(nt).forEach((function(e){e in t||(t[e]=nt[e])})),t.__defaults=N({},this.__defaults,e),t},nt.fetch=function(e,t){return it(e,t)};function at(e,t){for(var n=e,r=0,i=t.length;r<i;r++){if(!(n=n[t[r]]))break}return n}function ct(e){for(var t=[],n="",r=0,i=e.length;r<i;r++){var o=e[r];"."===o?r>0&&"\\"===e[r-1]?n=n.substring(0,n.length-1)+".":(t.push(n),n=""):n+=o}return t.push(n),t}var ut=["$or","$nor","$not"];function lt(e){return ut.indexOf(e)>-1}function ft(e){return Object.keys(e)[0]}function dt(e){var t={};return e.forEach((function(e){Object.keys(e).forEach((function(n){var r=e[n];if("object"!=typeof r&&(r={$eq:r}),lt(n))t[n]=r instanceof Array?r.map((function(e){return dt([e])})):dt([r]);else{var i=t[n]=t[n]||{};Object.keys(r).forEach((function(e){var t=r[e];return"$gt"===e||"$gte"===e?function(e,t,n){if(void 0!==n.$eq)return;void 0!==n.$gte?"$gte"===e?t>n.$gte&&(n.$gte=t):t>=n.$gte&&(delete n.$gte,n.$gt=t):void 0!==n.$gt?"$gte"===e?t>n.$gt&&(delete n.$gt,n.$gte=t):t>n.$gt&&(n.$gt=t):n[e]=t}(e,t,i):"$lt"===e||"$lte"===e?function(e,t,n){if(void 0!==n.$eq)return;void 0!==n.$lte?"$lte"===e?t<n.$lte&&(n.$lte=t):t<=n.$lte&&(delete n.$lte,n.$lt=t):void 0!==n.$lt?"$lte"===e?t<n.$lt&&(delete n.$lt,n.$lte=t):t<n.$lt&&(n.$lt=t):n[e]=t}(e,t,i):"$ne"===e?function(e,t){"$ne"in t?t.$ne.push(e):t.$ne=[e]}(t,i):"$eq"===e?function(e,t){delete t.$gt,delete t.$gte,delete t.$lt,delete t.$lte,delete t.$ne,t.$eq=e}(t,i):void(i[e]=t)}))}}))})),t}function ht(e){var t=O(e),n=!1;(function e(t,n){for(var r in t){"$and"===r&&(n=!0);var i=t[r];"object"==typeof i&&(n=e(i,n))}return n})(t,!1)&&("$and"in(t=function e(t){for(var n in t){if(Array.isArray(t))for(var r in t)t[r].$and&&(t[r]=dt(t[r].$and));var i=t[n];"object"==typeof i&&e(i)}return t}(t))&&(t=dt(t.$and)),n=!0),["$or","$nor"].forEach((function(e){e in t&&t[e].forEach((function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var r=t[n],i=e[r];"object"==typeof i&&null!==i||(e[r]={$eq:i})}}))})),"$not"in t&&(t.$not=dt([t.$not]));for(var r=Object.keys(t),i=0;i<r.length;i++){var o=r[i],s=t[o];"object"!=typeof s||null===s?s={$eq:s}:"$ne"in s&&!n&&(s.$ne=[s.$ne]),t[o]=s}return t}function pt(e,t){if(e===t)return 0;e=vt(e),t=vt(t);var n=bt(e),r=bt(t);if(n-r!=0)return n-r;switch(typeof e){case"number":return e-t;case"boolean":return e<t?-1:1;case"string":return function(e,t){return e===t?0:e>t?1:-1}(e,t)}return Array.isArray(e)?function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=pt(e[r],t[r]);if(0!==i)return i}return e.length===t.length?0:e.length>t.length?1:-1}(e,t):function(e,t){for(var n=Object.keys(e),r=Object.keys(t),i=Math.min(n.length,r.length),o=0;o<i;o++){var s=pt(n[o],r[o]);if(0!==s)return s;if(0!==(s=pt(e[n[o]],t[r[o]])))return s}return n.length===r.length?0:n.length>r.length?1:-1}(e,t)}function vt(e){switch(typeof e){case"undefined":return null;case"number":return e===1/0||e===-1/0||isNaN(e)?null:e;case"object":var t=e;if(Array.isArray(e)){var n=e.length;e=new Array(n);for(var r=0;r<n;r++)e[r]=vt(t[r])}else{if(e instanceof Date)return e.toJSON();if(null!==e)for(var i in e={},t)if(t.hasOwnProperty(i)){var o=t[i];void 0!==o&&(e[i]=vt(o))}}}return e}function yt(e){if(null!==e)switch(typeof e){case"boolean":return e?1:0;case"number":return function(e){if(0===e)return"1";var t=e.toExponential().split(/e\+?/),n=parseInt(t[1],10),r=e<0,i=r?"0":"2",o=(s=((r?-n:n)- -324).toString(),a="0",c=3,function(e,t,n){for(var r="",i=n-e.length;r.length<i;)r+=t;return r}(s,a,c)+s);var s,a,c;i+=""+o;var u=Math.abs(parseFloat(t[0]));r&&(u=10-u);var l=u.toFixed(20);return l=l.replace(/\.?0+$/,""),i+=""+l}(e);case"string":return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var t=Array.isArray(e),n=t?e:Object.keys(e),r=-1,i=n.length,o="";if(t)for(;++r<i;)o+=gt(n[r]);else for(;++r<i;){var s=n[r];o+=gt(s)+gt(e[s])}return o}return""}function gt(e){return bt(e=vt(e))+""+yt(e)+"\0"}function mt(e,t){var n,r=t;if("1"===e[t])n=0,t++;else{var i="0"===e[t];t++;var o="",s=e.substring(t,t+3),a=parseInt(s,10)+-324;for(i&&(a=-a),t+=3;;){var c=e[t];if("\0"===c)break;o+=c,t++}n=1===(o=o.split(".")).length?parseInt(o,10):parseFloat(o[0]+"."+o[1]),i&&(n-=10),0!==a&&(n=parseFloat(n+"e"+a))}return{num:n,length:t-r}}function _t(e,t){var n=e.pop();if(t.length){var r=t[t.length-1];n===r.element&&(t.pop(),r=t[t.length-1]);var i=r.element,o=r.index;if(Array.isArray(i))i.push(n);else if(o===e.length-2){i[e.pop()]=n}else e.push(n)}}function bt(e){var t=["boolean","number","string","object"].indexOf(typeof e);return~t?null===e?1:Array.isArray(e)?5:t<3?t+2:t+3:Array.isArray(e)?5:void 0}function wt(e,t,n){if(e=e.filter((function(e){return kt(e.doc,t.selector,n)})),t.sort){var r=function(e){function t(t){return e.map((function(e){var n=ct(ft(e));return at(t,n)}))}return function(e,n){var r,i,o=pt(t(e.doc),t(n.doc));return 0!==o?o:(r=e.doc._id,i=n.doc._id,r<i?-1:r>i?1:0)}}(t.sort);e=e.sort(r),"string"!=typeof t.sort[0]&&"desc"===(i=t.sort[0])[ft(i)]&&(e=e.reverse())}var i;if("limit"in t||"skip"in t){var o=t.skip||0,s=("limit"in t?t.limit:e.length)+o;e=e.slice(o,s)}return e}function kt(e,t,n){return n.every((function(n){var r=t[n],i=ct(n),o=at(e,i);return lt(n)?function(e,t,n){if("$or"===e)return t.some((function(e){return kt(n,e,Object.keys(e))}));if("$not"===e)return!kt(n,t,Object.keys(t));return!t.find((function(e){return kt(n,e,Object.keys(e))}))}(n,r,e):At(r,e,i,o)}))}function At(e,t,n,r){return!e||("object"==typeof e?Object.keys(e).every((function(i){var o=e[i];return function(e,t,n,r,i){if(!jt[e])throw new Error('unknown operator "'+e+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return jt[e](t,n,r,i)}(i,t,o,n,r)})):e===r)}function xt(e){return null!=e}function qt(e){return void 0!==e}function Ot(e,t){return t.some((function(t){return e instanceof Array?e.indexOf(t)>-1:e===t}))}var jt={$elemMatch:function(e,t,n,r){return!!Array.isArray(r)&&(0!==r.length&&("object"==typeof r[0]?r.some((function(e){return kt(e,t,Object.keys(t))})):r.some((function(r){return At(t,e,n,r)}))))},$allMatch:function(e,t,n,r){return!!Array.isArray(r)&&(0!==r.length&&("object"==typeof r[0]?r.every((function(e){return kt(e,t,Object.keys(t))})):r.every((function(r){return At(t,e,n,r)}))))},$eq:function(e,t,n,r){return qt(r)&&0===pt(r,t)},$gte:function(e,t,n,r){return qt(r)&&pt(r,t)>=0},$gt:function(e,t,n,r){return qt(r)&&pt(r,t)>0},$lte:function(e,t,n,r){return qt(r)&&pt(r,t)<=0},$lt:function(e,t,n,r){return qt(r)&&pt(r,t)<0},$exists:function(e,t,n,r){return t?qt(r):!qt(r)},$mod:function(e,t,n,r){return xt(r)&&function(e,t){var n=t[0],r=t[1];if(0===n)throw new Error("Bad divisor, cannot divide by zero");if(parseInt(n,10)!==n)throw new Error("Divisor is not an integer");if(parseInt(r,10)!==r)throw new Error("Modulus is not an integer");return parseInt(e,10)===e&&e%n===r}(r,t)},$ne:function(e,t,n,r){return t.every((function(e){return 0!==pt(r,e)}))},$in:function(e,t,n,r){return xt(r)&&Ot(r,t)},$nin:function(e,t,n,r){return xt(r)&&!Ot(r,t)},$size:function(e,t,n,r){return xt(r)&&function(e,t){return e.length===t}(r,t)},$all:function(e,t,n,r){return Array.isArray(r)&&function(e,t){return t.every((function(t){return e.indexOf(t)>-1}))}(r,t)},$regex:function(e,t,n,r){return xt(r)&&function(e,t){return new RegExp(t).test(e)}(r,t)},$type:function(e,t,n,r){return function(e,t){switch(t){case"null":return null===e;case"boolean":return"boolean"==typeof e;case"number":return"number"==typeof e;case"string":return"string"==typeof e;case"array":return e instanceof Array;case"object":return"[object Object]"==={}.toString.call(e)}throw new Error(t+" not supported as a type.Please use one of object, string, array, number, boolean or null.")}(r,t)}};function St(e,t){if(e.selector&&e.filter&&"_selector"!==e.filter){var n="string"==typeof e.filter?e.filter:"function";return t(new Error('selector invalid for filter "'+n+'"'))}t()}function Et(e){e.view&&!e.filter&&(e.filter="_view"),e.selector&&!e.filter&&(e.filter="_selector"),e.filter&&"string"==typeof e.filter&&("_view"===e.filter?e.view=le(e.view):e.filter=le(e.filter))}function Lt(e,t){return t.filter&&"string"==typeof t.filter&&!t.doc_ids&&!ce(e.db)}function Ct(e,t){var n=t.complete;if("_view"===t.filter){if(!t.view||"string"!=typeof t.view){var r=re(Y,"`view` filter parameter not found or invalid.");return n(r)}var i=ue(t.view);e.db.get("_design/"+i[0],(function(r,o){if(e.isCancelled)return n(null,{status:"cancelled"});if(r)return n(ie(r));var s=o&&o.views&&o.views[i[1]]&&o.views[i[1]].map;if(!s)return n(re(U,o.views?"missing json key: "+i[1]:"missing json key: views"));t.filter=ve(["return function(doc) {",'  "use strict";',"  var emitted = false;","  var emit = function (a, b) {","    emitted = true;","  };","  var view = "+s+";","  view(doc);","  if (emitted) {","    return true;","  }","};"].join("\n"),{}),e.doChanges(t)}))}else if(t.selector)t.filter=function(e){return function(e,t){if("object"!=typeof t)throw new Error("Selector error: expected a JSON object");var n=wt([{doc:e}],{selector:t=ht(t)},Object.keys(t));return n&&1===n.length}(e,t.selector)},e.doChanges(t);else{var o=ue(t.filter);e.db.get("_design/"+o[0],(function(r,i){if(e.isCancelled)return n(null,{status:"cancelled"});if(r)return n(ie(r));var s=i&&i.filters&&i.filters[o[1]];if(!s)return n(re(U,i&&i.filters?"missing json key: "+o[1]:"missing json key: filters"));t.filter=ve('"use strict";\nreturn '+s+";",{}),e.doChanges(t)}))}}function $t(e){return e.reduce((function(e,t){return e[t]=!0,e}),{})}nt.plugin((function(e){e._changesFilterPlugin={validate:St,normalize:Et,shouldFilter:Lt,filter:Ct}})),nt.version="7.1.1";var Tt=$t(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),Mt=$t(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);function Pt(e){if(!/^\d+-./.test(e))return re(te);var t=e.indexOf("-"),n=e.substring(0,t),r=e.substring(t+1);return{prefix:parseInt(n,10),id:r}}function Dt(e,t,n){var r,i,o;n||(n={deterministic_revs:!0});var s={status:"available"};if(e._deleted&&(s.deleted=!0),t)if(e._id||(e._id=$e()),i=Ce(e,n.deterministic_revs),e._rev){if((o=Pt(e._rev)).error)return o;e._rev_tree=[{pos:o.prefix,ids:[o.id,{status:"missing"},[[i,s,[]]]]}],r=o.prefix+1}else e._rev_tree=[{pos:1,ids:[i,s,[]]}],r=1;else if(e._revisions&&(e._rev_tree=function(e,t){for(var n=e.start-e.ids.length+1,r=e.ids,i=[r[0],t,[]],o=1,s=r.length;o<s;o++)i=[r[o],{status:"missing"},[i]];return[{pos:n,ids:i}]}(e._revisions,s),r=e._revisions.start,i=e._revisions.ids[0]),!e._rev_tree){if((o=Pt(e._rev)).error)return o;r=o.prefix,i=o.id,e._rev_tree=[{pos:r,ids:[i,s,[]]}]}ae(e._id),e._rev=r+"-"+i;var a={metadata:{},data:{}};for(var c in e)if(Object.prototype.hasOwnProperty.call(e,c)){var u="_"===c[0];if(u&&!Tt[c]){var l=re(X,c);throw l.message=X.message+": "+c,l}u&&!Mt[c]?a.metadata[c.slice(1)]=e[c]:a.data[c]=e[c]}return a}function Bt(e,t,n){var r=function(e){try{return ge(e)}catch(e){return{error:re(G,"Attachment is not a valid base64 string")}}}(e.data);if(r.error)return n(r.error);e.length=r.length,e.data="blob"===t?we(r,e.content_type):"base64"===t?me(r):r,Ee(r,(function(t){e.digest="md5-"+t,n()}))}function zt(e,t,n){if(e.stub)return n();"string"==typeof e.data?Bt(e,t,n):function(e,t,n){Ee(e.data,(function(r){e.digest="md5-"+r,e.length=e.data.size||e.data.length||0,"binary"===t?xe(e.data,(function(t){e.data=t,n()})):"base64"===t?qe(e.data,(function(t){e.data=t,n()})):n()}))}(e,t,n)}function It(e,t,n,r,i,o,s,a){if(function(e,t){for(var n,r=e.slice(),i=t.split("-"),o=parseInt(i[0],10),s=i[1];n=r.pop();){if(n.pos===o&&n.ids[0]===s)return!0;for(var a=n.ids[2],c=0,u=a.length;c<u;c++)r.push({pos:n.pos+1,ids:a[c]})}return!1}(t.rev_tree,n.metadata.rev)&&!a)return r[i]=n,o();var c=t.winningRev||Te(t),u="deleted"in t?t.deleted:Ke(t,c),l="deleted"in n.metadata?n.metadata.deleted:Ke(n.metadata),f=/^1-/.test(n.metadata.rev);if(u&&!l&&a&&f){var d=n.data;d._rev=c,d._id=n.metadata.id,n=Dt(d,a)}var h=Ve(t.rev_tree,n.metadata.rev_tree[0],e);if(a&&(u&&l&&"new_leaf"!==h.conflicts||!u&&"new_leaf"!==h.conflicts||u&&!l&&"new_branch"===h.conflicts)){var p=re(F);return r[i]=p,o()}var v=n.metadata.rev;n.metadata.rev_tree=h.tree,n.stemmedRevs=h.stemmedRevs||[],t.rev_map&&(n.metadata.rev_map=t.rev_map);var y=Te(n.metadata),g=Ke(n.metadata,y),m=u===g?0:u<g?-1:1;s(n,y,g,v===y?g:Ke(n.metadata,v),!0,m,i,o)}function Nt(e,t,n,r,i,s,a,c,u){e=e||1e3;var l=c.new_edits,f=new o,d=0,h=t.length;function p(){++d===h&&u&&u()}t.forEach((function(e,t){if(e._id&&We(e._id)){var r=e._deleted?"_removeLocal":"_putLocal";n[r](e,{ctx:i},(function(e,n){s[t]=e||n,p()}))}else{var o=e.metadata.id;f.has(o)?(h--,f.get(o).push([e,t])):f.set(o,[[e,t]])}})),f.forEach((function(t,n){var i=0;function o(){++i<t.length?u():p()}function u(){var u=t[i],f=u[0],d=u[1];if(r.has(n))It(e,r.get(n),f,s,d,o,a,l);else{var h=Ve([],f.metadata.rev_tree[0],e);f.metadata.rev_tree=h.tree,f.stemmedRevs=h.stemmedRevs||[],function(e,t,n){var r=Te(e.metadata),i=Ke(e.metadata,r);if("was_delete"in c&&i)return s[t]=re(U,"deleted"),n();if(l&&function(e){return"missing"===e.metadata.rev_tree[0].ids[1].status}(e)){var o=re(F);return s[t]=o,n()}a(e,r,i,i,!1,i?0:1,t,n)}(f,d,o)}}u()}))}var Rt="document-store",Ht="meta-store";function Ut(e){try{return JSON.stringify(e)}catch(t){return h.a.stringify(e)}}function Ft(e){return function(t){var n="unknown_error";t.target&&t.target.error&&(n=t.target.error.name||t.target.error.message),e(re(ee,n,t.type))}}function Vt(e,t,n){return{data:Ut(e),winningRev:t,deletedOrLocal:n?"1":"0",seq:e.seq,id:e.id}}function Jt(e){if(!e)return null;var t=function(e){try{return JSON.parse(e)}catch(t){return h.a.parse(e)}}(e.data);return t.winningRev=e.winningRev,t.deleted="1"===e.deletedOrLocal,t.seq=e.seq,t}function Kt(e){if(!e)return e;var t=e._doc_id_rev.lastIndexOf(":");return e._id=e._doc_id_rev.substring(0,t-1),e._rev=e._doc_id_rev.substring(t+1),delete e._doc_id_rev,e}function Wt(e,t,n,r){n?r(e?"string"!=typeof e?e:ke(e,t):_e([""],{type:t})):e?"string"!=typeof e?Ae(e,(function(e){r(me(e))})):r(e):r("")}function Gt(e,t,n,r){var i=Object.keys(e._attachments||{});if(!i.length)return r&&r();var o=0;function s(){++o===i.length&&r&&r()}i.forEach((function(r){t.attachments&&t.include_docs?function(e,t){var r=e._attachments[t],i=r.digest;n.objectStore("attach-store").get(i).onsuccess=function(e){r.body=e.target.result.body,s()}}(e,r):(e._attachments[r].stub=!0,s())}))}function Qt(e,t){return Promise.all(e.map((function(e){if(e.doc&&e.doc._attachments){var n=Object.keys(e.doc._attachments);return Promise.all(n.map((function(n){var r=e.doc._attachments[n];if("body"in r){var i=r.body,o=r.content_type;return new Promise((function(s){Wt(i,o,t,(function(t){e.doc._attachments[n]=N(L(r,["digest","content_type"]),{data:t}),s()}))}))}})))}})))}function Xt(e,t,n){var r=[],i=n.objectStore("by-sequence"),o=n.objectStore("attach-store"),s=n.objectStore("attach-seq-store"),a=e.length;function c(){--a||function(){if(!r.length)return;r.forEach((function(e){s.index("digestSeq").count(IDBKeyRange.bound(e+"::",e+"::￿",!1,!1)).onsuccess=function(t){t.target.result||o.delete(e)}}))}()}e.forEach((function(e){var n=i.index("_doc_id_rev"),o=t+"::"+e;n.getKey(o).onsuccess=function(e){var t=e.target.result;if("number"!=typeof t)return c();i.delete(t),s.index("seq").openCursor(IDBKeyRange.only(t)).onsuccess=function(e){var t=e.target.result;if(t){var n=t.value.digestSeq.split("::")[0];r.push(n),s.delete(t.primaryKey),t.continue()}else c()}}}))}function Yt(e,t,n){try{return{txn:e.transaction(t,n)}}catch(e){return{error:e}}}var Zt=new D;function en(e,t,n,r,i,s){for(var a,c,u,l,f,d,h,p,v=t.docs,y=0,g=v.length;y<g;y++){var m=v[y];m._id&&We(m._id)||(m=v[y]=Dt(m,n.new_edits,e)).error&&!h&&(h=m)}if(h)return s(h);var _=!1,b=0,w=new Array(v.length),k=new o,A=!1,x=r._meta.blobSupport?"blob":"base64";function q(){_=!0,O()}function O(){p&&_&&(p.docCount+=b,d.put(p))}function j(){A||(Zt.notify(r._meta.name),s(null,w))}function S(e,t,n,r,i,o,s,a){e.metadata.winningRev=t,e.metadata.deleted=n;var c=e.data;if(c._id=e.metadata.id,c._rev=e.metadata.rev,r&&(c._deleted=!0),c._attachments&&Object.keys(c._attachments).length)return function(e,t,n,r,i,o){var s=e.data,a=0,c=Object.keys(s._attachments);function u(){a===c.length&&E(e,t,n,r,i,o)}function f(){a++,u()}c.forEach((function(n){var r=e.data._attachments[n];if(r.stub)a++,u();else{var i=r.data;delete r.data,r.revpos=parseInt(t,10),function(e,t,n){l.count(e).onsuccess=function(r){if(r.target.result)return n();var i={digest:e,body:t};l.put(i).onsuccess=n}}(r.digest,i,f)}}))}(e,t,n,i,s,a);b+=o,O(),E(e,t,n,i,s,a)}function E(e,t,n,i,o,s){var l=e.data,d=e.metadata;function h(o){var s=e.stemmedRevs||[];i&&r.auto_compaction&&(s=s.concat(function(e){var t=[];return Me(e.rev_tree,(function(e,n,r,i,o){"available"!==o.status||e||(t.push(n+"-"+r),o.status="missing")})),t}(e.metadata))),s&&s.length&&Xt(s,e.metadata.id,a),d.seq=o.target.result;var u=Vt(d,t,n);c.put(u).onsuccess=p}function p(){w[o]={ok:!0,id:d.id,rev:d.rev},k.set(e.metadata.id,e.metadata),function(e,t,n){var r=0,i=Object.keys(e.data._attachments||{});if(!i.length)return n();function o(){++r===i.length&&n()}function s(n){var r=e.data._attachments[n].digest,i=f.put({seq:t,digestSeq:r+"::"+t});i.onsuccess=o,i.onerror=function(e){e.preventDefault(),e.stopPropagation(),o()}}for(var a=0;a<i.length;a++)s(i[a])}(e,d.seq,s)}l._doc_id_rev=d.id+"::"+d.rev,delete l._id,delete l._rev;var v=u.put(l);v.onsuccess=h,v.onerror=function(e){e.preventDefault(),e.stopPropagation(),u.index("_doc_id_rev").getKey(l._doc_id_rev).onsuccess=function(e){u.put(l,e.target.result).onsuccess=h}}}!function(e,t,n){if(!e.length)return n();var r,i=0;function o(){i++,e.length===i&&(r?n(r):n())}e.forEach((function(e){var n=e.data&&e.data._attachments?Object.keys(e.data._attachments):[],i=0;if(!n.length)return o();function s(e){r=e,++i===n.length&&o()}for(var a in e.data._attachments)e.data._attachments.hasOwnProperty(a)&&zt(e.data._attachments[a],t,s)}))}(v,x,(function(t){if(t)return s(t);!function(){var t=Yt(i,[Rt,"by-sequence","attach-store","local-store","attach-seq-store",Ht],"readwrite");if(t.error)return s(t.error);(a=t.txn).onabort=Ft(s),a.ontimeout=Ft(s),a.oncomplete=j,c=a.objectStore(Rt),u=a.objectStore("by-sequence"),l=a.objectStore("attach-store"),f=a.objectStore("attach-seq-store"),(d=a.objectStore(Ht)).get(Ht).onsuccess=function(e){p=e.target.result,O()},function(e){var t=[];if(v.forEach((function(e){e.data&&e.data._attachments&&Object.keys(e.data._attachments).forEach((function(n){var r=e.data._attachments[n];r.stub&&t.push(r.digest)}))})),!t.length)return e();var n,r=0;t.forEach((function(i){!function(e,t){l.get(e).onsuccess=function(n){if(n.target.result)t();else{var r=re(ne,"unknown stub attachment with digest "+e);r.status=412,t(r)}}}(i,(function(i){i&&!n&&(n=i),++r===t.length&&e(n)}))}))}((function(t){if(t)return A=!0,s(t);!function(){if(!v.length)return;var t=0;function i(){++t===v.length&&Nt(e.revs_limit,v,r,k,a,w,S,n,q)}function o(e){var t=Jt(e.target.result);t&&k.set(t.id,t),i()}for(var s=0,u=v.length;s<u;s++){var l=v[s];if(l._id&&We(l._id))i();else c.get(l.metadata.id).onsuccess=o}}()}))}()}))}function tn(e,t,n,r,i){var o,s,a;function c(e){s=e.target.result,o&&i(o,s,a)}function u(e){o=e.target.result,s&&i(o,s,a)}function l(e){var t=e.target.result;if(!t)return i();i([t.key],[t.value],t)}-1===r&&(r=1e3),"function"==typeof e.getAll&&"function"==typeof e.getAllKeys&&r>1&&!n?(a={continue:function(){if(!o.length)return i();var n,a=o[o.length-1];if(t&&t.upper)try{n=IDBKeyRange.bound(a,t.upper,!0,t.upperOpen)}catch(e){if("DataError"===e.name&&0===e.code)return i()}else n=IDBKeyRange.lowerBound(a,!0);t=n,o=null,s=null,e.getAll(t,r).onsuccess=c,e.getAllKeys(t,r).onsuccess=u}},e.getAll(t,r).onsuccess=c,e.getAllKeys(t,r).onsuccess=u):n?e.openCursor(t,"prev").onsuccess=l:e.openCursor(t).onsuccess=l}function nn(e,t,n){var r,i,o="startkey"in e&&e.startkey,s="endkey"in e&&e.endkey,a="key"in e&&e.key,c="keys"in e&&e.keys,u=e.skip||0,l="number"==typeof e.limit?e.limit:-1,f=!1!==e.inclusive_end;if(!c&&(i=(r=function(e,t,n,r,i){try{if(e&&t)return i?IDBKeyRange.bound(t,e,!n,!1):IDBKeyRange.bound(e,t,!1,!n);if(e)return i?IDBKeyRange.upperBound(e):IDBKeyRange.lowerBound(e);if(t)return i?IDBKeyRange.lowerBound(t,!n):IDBKeyRange.upperBound(t,!n);if(r)return IDBKeyRange.only(r)}catch(e){return{error:e}}return null}(o,s,f,a,e.descending))&&r.error)&&("DataError"!==i.name||0!==i.code))return n(re(ee,i.name,i.message));var d=[Rt,"by-sequence",Ht];e.attachments&&d.push("attach-store");var h=Yt(t,d,"readonly");if(h.error)return n(h.error);var p=h.txn;p.oncomplete=function(){e.attachments?Qt(k,e.binary).then(O):O()},p.onabort=Ft(n);var v,y,g,m=p.objectStore(Rt),_=p.objectStore("by-sequence"),b=p.objectStore(Ht),w=_.index("_doc_id_rev"),k=[];function A(t,n){var r={id:n.id,key:n.id,value:{rev:t}};n.deleted?c&&(k.push(r),r.value.deleted=!0,r.doc=null):u--<=0&&(k.push(r),e.include_docs&&function(t,n,r){var i=t.id+"::"+r;w.get(i).onsuccess=function(r){if(n.doc=Kt(r.target.result)||{},e.conflicts){var i=Be(t);i.length&&(n.doc._conflicts=i)}Gt(n.doc,e,p)}}(n,r,t))}function x(e){for(var t=0,n=e.length;t<n&&k.length!==l;t++){var r=e[t];if(r.error&&c)k.push(r);else{var i=Jt(r);A(i.winningRev,i)}}}function q(e,t,n){n&&(x(t),k.length<l&&n.continue())}function O(){var t={total_rows:v,offset:e.skip,rows:k};e.update_seq&&void 0!==y&&(t.update_seq=y),n(null,t)}return b.get(Ht).onsuccess=function(e){v=e.target.result.docCount},e.update_seq&&(g=function(e){e.target.result&&e.target.result.length>0&&(y=e.target.result[0])},_.openCursor(null,"prev").onsuccess=function(e){var t=e.target.result,n=void 0;return t&&t.key&&(n=t.key),g({target:{result:[n]}})}),i||0===l?void 0:c?function(e,t,n){var r=new Array(e.length),i=0;e.forEach((function(o,s){t.get(o).onsuccess=function(t){t.target.result?r[s]=t.target.result:r[s]={key:o,error:"not_found"},++i===e.length&&n(e,r,{})}}))}(e.keys,m,q):-1===l?function(e,t,n){if("function"!=typeof e.getAll){var r=[];e.openCursor(t).onsuccess=function(e){var t=e.target.result;t?(r.push(t.value),t.continue()):n({target:{result:r}})}}else e.getAll(t).onsuccess=n}(m,r,(function(t){var n=t.target.result;e.descending&&(n=n.reverse()),x(n)})):void tn(m,r,e.descending,l+u,q)}var rn=!1,on=[];function sn(){!rn&&on.length&&(rn=!0,on.shift()())}function an(e,t,n,r){if((e=O(e)).continuous){var s=n+":"+$e();return Zt.addListener(n,s,t,e),Zt.notify(n),{cancel:function(){Zt.removeListener(n,s)}}}var a=e.doc_ids&&new i(e.doc_ids);e.since=e.since||0;var c=e.since,u="limit"in e?e.limit:-1;0===u&&(u=1);var l,f,d,h,p=[],v=0,y=oe(e),g=new o;function m(e,t,n,r){if(n.seq!==t)return r();if(n.winningRev===e._rev)return r(n,e);var i=e._id+"::"+n.winningRev;h.get(i).onsuccess=function(e){r(n,Kt(e.target.result))}}function _(){e.complete(null,{results:p,last_seq:c})}var b=[Rt,"by-sequence"];e.attachments&&b.push("attach-store");var w=Yt(r,b,"readonly");if(w.error)return e.complete(w.error);(l=w.txn).onabort=Ft(e.complete),l.oncomplete=function(){!e.continuous&&e.attachments?Qt(p).then(_):_()},f=l.objectStore("by-sequence"),d=l.objectStore(Rt),h=f.index("_doc_id_rev"),tn(f,e.since&&!e.descending?IDBKeyRange.lowerBound(e.since,!0):null,e.descending,u,(function(t,n,r){if(r&&t.length){var i=new Array(t.length),o=new Array(t.length),s=0;n.forEach((function(n,c){!function(e,t,n){if(a&&!a.has(e._id))return n();var r=g.get(e._id);if(r)return m(e,t,r,n);d.get(e._id).onsuccess=function(i){r=Jt(i.target.result),g.set(e._id,r),m(e,t,r,n)}}(Kt(n),t[c],(function(n,a){o[c]=n,i[c]=a,++s===t.length&&function(){for(var t=[],n=0,s=i.length;n<s&&v!==u;n++){var a=i[n];if(a){var c=o[n];t.push(f(c,a))}}Promise.all(t).then((function(t){for(var n=0,r=t.length;n<r;n++)t[n]&&e.onChange(t[n])})).catch(e.complete),v!==u&&r.continue()}()}))}))}function f(t,n){var r=e.processChange(n,t,e);c=r.seq=t.seq;var i=y(r);return"object"==typeof i?Promise.reject(i):i?(v++,e.return_docs&&p.push(r),e.attachments&&e.include_docs?new Promise((function(t){Gt(n,e,l,(function(){Qt([r],e.binary).then((function(){t(r)}))}))})):Promise.resolve(r)):Promise.resolve()}}))}var cn,un=new o,ln=new o;function fn(e,t){var n=this;!function(e,t,n){on.push((function(){e((function(e,r){!function(e,t,n,r){try{e(t,n)}catch(t){r.emit("error",t)}}(t,e,r,n),rn=!1,a()((function(){sn()}))}))})),sn()}((function(t){!function(e,t,n){var r=t.name,i=null;function o(e,t){var n=e.objectStore(Rt);n.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),n.openCursor().onsuccess=function(e){var r=e.target.result;if(r){var i=r.value,o=Ke(i);i.deletedOrLocal=o?"1":"0",n.put(i),r.continue()}else t()}}function s(e,t){var n=e.objectStore("local-store"),r=e.objectStore(Rt),i=e.objectStore("by-sequence");r.openCursor().onsuccess=function(e){var o=e.target.result;if(o){var s=o.value,a=s.id,c=We(a),u=Te(s);if(c){var l=a+"::"+u,f=a+"::",d=a+"::~",h=i.index("_doc_id_rev"),p=IDBKeyRange.bound(f,d,!1,!1),v=h.openCursor(p);v.onsuccess=function(e){if(v=e.target.result){var t=v.value;t._doc_id_rev===l&&n.put(t),i.delete(v.primaryKey),v.continue()}else r.delete(o.primaryKey),o.continue()}}else o.continue()}else t&&t()}}function c(e,t){var n=e.objectStore("by-sequence"),r=e.objectStore("attach-store"),i=e.objectStore("attach-seq-store");r.count().onsuccess=function(e){if(!e.target.result)return t();n.openCursor().onsuccess=function(e){var n=e.target.result;if(!n)return t();for(var r=n.value,o=n.primaryKey,s=Object.keys(r._attachments||{}),a={},c=0;c<s.length;c++){a[r._attachments[s[c]].digest]=!0}var u=Object.keys(a);for(c=0;c<u.length;c++){var l=u[c];i.put({seq:o,digestSeq:l+"::"+o})}n.continue()}}}function u(e){var t=e.objectStore("by-sequence"),n=e.objectStore(Rt);n.openCursor().onsuccess=function(e){var r=e.target.result;if(r){var i,o=(i=r.value).data?Jt(i):(i.deleted="1"===i.deletedOrLocal,i);if(o.winningRev=o.winningRev||Te(o),o.seq)return s();!function(){var e=o.id+"::",n=o.id+"::￿",r=t.index("_doc_id_rev").openCursor(IDBKeyRange.bound(e,n)),i=0;r.onsuccess=function(e){var t=e.target.result;if(!t)return o.seq=i,s();var n=t.primaryKey;n>i&&(i=n),t.continue()}}()}function s(){var e=Vt(o,o.winningRev,o.deleted);n.put(e).onsuccess=function(){r.continue()}}}}e._meta=null,e._remote=!1,e.type=function(){return"idb"},e._id=S((function(t){t(null,e._meta.instanceId)})),e._bulkDocs=function(n,r,o){en(t,n,r,e,i,o)},e._get=function(e,t,n){var r,o,s,a=t.ctx;if(!a){var c=Yt(i,[Rt,"by-sequence","attach-store"],"readonly");if(c.error)return n(c.error);a=c.txn}function u(){n(s,{doc:r,metadata:o,ctx:a})}a.objectStore(Rt).get(e).onsuccess=function(e){if(!(o=Jt(e.target.result)))return s=re(U,"missing"),u();var n;if(t.rev)n=t.latest?function(e,t){for(var n,r=t.rev_tree.slice();n=r.pop();){var i=n.pos,o=n.ids,s=o[0],a=o[1],c=o[2],u=0===c.length,l=n.history?n.history.slice():[];if(l.push({id:s,pos:i,opts:a}),u)for(var f=0,d=l.length;f<d;f++){var h=l[f];if(h.pos+"-"+h.id===e)return i+"-"+s}for(var p=0,v=c.length;p<v;p++)r.push({pos:i+1,ids:c[p],history:l})}throw new Error("Unable to resolve latest revision for id "+t.id+", rev "+e)}(t.rev,o):t.rev;else if(n=o.winningRev,Ke(o))return s=re(U,"deleted"),u();var i=a.objectStore("by-sequence"),c=o.id+"::"+n;i.index("_doc_id_rev").get(c).onsuccess=function(e){if((r=e.target.result)&&(r=Kt(r)),!r)return s=re(U,"missing"),u();u()}}},e._getAttachment=function(e,t,n,r,o){var s;if(r.ctx)s=r.ctx;else{var a=Yt(i,[Rt,"by-sequence","attach-store"],"readonly");if(a.error)return o(a.error);s=a.txn}var c=n.digest,u=n.content_type;s.objectStore("attach-store").get(c).onsuccess=function(e){Wt(e.target.result.body,u,r.binary,(function(e){o(null,e)}))}},e._info=function(t){var n,r,o=Yt(i,[Ht,"by-sequence"],"readonly");if(o.error)return t(o.error);var s=o.txn;s.objectStore(Ht).get(Ht).onsuccess=function(e){r=e.target.result.docCount},s.objectStore("by-sequence").openCursor(null,"prev").onsuccess=function(e){var t=e.target.result;n=t?t.key:0},s.oncomplete=function(){t(null,{doc_count:r,update_seq:n,idb_attachment_format:e._meta.blobSupport?"binary":"base64"})}},e._allDocs=function(e,t){nn(e,i,t)},e._changes=function(t){return an(t,e,r,i)},e._close=function(e){i.close(),un.delete(r),e()},e._getRevisionTree=function(e,t){var n=Yt(i,[Rt],"readonly");if(n.error)return t(n.error);n.txn.objectStore(Rt).get(e).onsuccess=function(e){var n=Jt(e.target.result);n?t(null,n.rev_tree):t(re(U))}},e._doCompaction=function(e,t,n){var r=Yt(i,[Rt,"by-sequence","attach-store","attach-seq-store"],"readwrite");if(r.error)return n(r.error);var o=r.txn;o.objectStore(Rt).get(e).onsuccess=function(n){var r=Jt(n.target.result);Me(r.rev_tree,(function(e,n,r,i,o){var s=n+"-"+r;-1!==t.indexOf(s)&&(o.status="missing")})),Xt(t,e,o);var i=r.winningRev,s=r.deleted;o.objectStore(Rt).put(Vt(r,i,s))},o.onabort=Ft(n),o.oncomplete=function(){n()}},e._getLocal=function(e,t){var n=Yt(i,["local-store"],"readonly");if(n.error)return t(n.error);var r=n.txn.objectStore("local-store").get(e);r.onerror=Ft(t),r.onsuccess=function(e){var n=e.target.result;n?(delete n._doc_id_rev,t(null,n)):t(re(U))}},e._putLocal=function(e,t,n){"function"==typeof t&&(n=t,t={}),delete e._revisions;var r=e._rev,o=e._id;e._rev=r?"0-"+(parseInt(r.split("-")[1],10)+1):"0-1";var s,a=t.ctx;if(!a){var c=Yt(i,["local-store"],"readwrite");if(c.error)return n(c.error);(a=c.txn).onerror=Ft(n),a.oncomplete=function(){s&&n(null,s)}}var u,l=a.objectStore("local-store");r?(u=l.get(o)).onsuccess=function(i){var o=i.target.result;o&&o._rev===r?l.put(e).onsuccess=function(){s={ok:!0,id:e._id,rev:e._rev},t.ctx&&n(null,s)}:n(re(F))}:((u=l.add(e)).onerror=function(e){n(re(F)),e.preventDefault(),e.stopPropagation()},u.onsuccess=function(){s={ok:!0,id:e._id,rev:e._rev},t.ctx&&n(null,s)})},e._removeLocal=function(e,t,n){"function"==typeof t&&(n=t,t={});var r,o=t.ctx;if(!o){var s=Yt(i,["local-store"],"readwrite");if(s.error)return n(s.error);(o=s.txn).oncomplete=function(){r&&n(null,r)}}var a=e._id,c=o.objectStore("local-store"),u=c.get(a);u.onerror=Ft(n),u.onsuccess=function(i){var o=i.target.result;o&&o._rev===e._rev?(c.delete(a),r={ok:!0,id:a,rev:"0-0"},t.ctx&&n(null,r)):n(re(U))}},e._destroy=function(e,t){Zt.removeAllListeners(r);var n=ln.get(r);n&&n.result&&(n.result.close(),un.delete(r));var i=indexedDB.deleteDatabase(r);i.onsuccess=function(){ln.delete(r),P()&&r in localStorage&&delete localStorage[r],t(null,{ok:!0})},i.onerror=Ft(t)};var l=un.get(r);if(l)return i=l.idb,e._meta=l.global,a()((function(){n(null,e)}));var f=indexedDB.open(r,5);ln.set(r,f),f.onupgradeneeded=function(e){var t=e.target.result;if(e.oldVersion<1)return function(e){var t=e.createObjectStore(Rt,{keyPath:"id"});e.createObjectStore("by-sequence",{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),e.createObjectStore("attach-store",{keyPath:"digest"}),e.createObjectStore(Ht,{keyPath:"id",autoIncrement:!1}),e.createObjectStore("detect-blob-support"),t.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),e.createObjectStore("local-store",{keyPath:"_id"});var n=e.createObjectStore("attach-seq-store",{autoIncrement:!0});n.createIndex("seq","seq"),n.createIndex("digestSeq","digestSeq",{unique:!0})}(t);var n=e.currentTarget.transaction;e.oldVersion<3&&function(e){e.createObjectStore("local-store",{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}(t),e.oldVersion<4&&function(e){var t=e.createObjectStore("attach-seq-store",{autoIncrement:!0});t.createIndex("seq","seq"),t.createIndex("digestSeq","digestSeq",{unique:!0})}(t);var r=[o,s,c,u],i=e.oldVersion;!function e(){var t=r[i-1];i++,t&&t(n,e)}()},f.onsuccess=function(t){(i=t.target.result).onversionchange=function(){i.close(),un.delete(r)},i.onabort=function(e){B("error","Database has a global failure",e.target.error),i.close(),un.delete(r)};var o,s,a,c,u=i.transaction([Ht,"detect-blob-support",Rt],"readwrite"),l=!1;function f(){void 0!==a&&l&&(e._meta={name:r,instanceId:c,blobSupport:a},un.set(r,{idb:i,global:e._meta}),n(null,e))}function d(){if(void 0!==s&&void 0!==o){var e=r+"_id";e in o?c=o[e]:o[e]=c=$e(),o.docCount=s,u.objectStore(Ht).put(o)}}u.objectStore(Ht).get(Ht).onsuccess=function(e){o=e.target.result||{id:Ht},d()},function(e,t){e.objectStore(Rt).index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(e){t(e.target.result)}}(u,(function(e){s=e,d()})),cn||(cn=function(e){return new Promise((function(t){var n=_e([""]),r=e.objectStore("detect-blob-support").put(n,"key");r.onsuccess=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)},r.onerror=e.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)}})).catch((function(){return!1}))}(u)),cn.then((function(e){a=e,f()})),u.oncomplete=function(){l=!0,f()},u.onabort=Ft(n)},f.onerror=function(){var e="Failed to open indexedDB, are you in private browsing mode?";B("error",e),n(re(ee,e))}}(n,e,t)}),t,n.constructor)}fn.valid=function(){try{return"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}};var dn={};function hn(e){var t=e.doc||e.ok,n=t&&t._attachments;n&&Object.keys(n).forEach((function(e){var t=n[e];t.data=ke(t.data,t.content_type)}))}function pn(e){return/^_design/.test(e)?"_design/"+encodeURIComponent(e.slice(8)):/^_local/.test(e)?"_local/"+encodeURIComponent(e.slice(7)):encodeURIComponent(e)}function vn(e){return e._attachments&&Object.keys(e._attachments)?Promise.all(Object.keys(e._attachments).map((function(t){var n=e._attachments[t];if(n.data&&"string"!=typeof n.data)return new Promise((function(e){qe(n.data,e)})).then((function(e){n.data=e}))}))):Promise.resolve()}function yn(e,t){if(function(e){if(!e.prefix)return!1;var t=pe(e.prefix).protocol;return"http"===t||"https"===t}(t)){var n=t.name.substr(t.prefix.length);e=t.prefix.replace(/\/?$/,"/")+encodeURIComponent(n)}var r=pe(e);(r.user||r.password)&&(r.auth={username:r.user,password:r.password});var i=r.path.replace(/(^\/|\/$)/g,"").split("/");return r.db=i.pop(),-1===r.db.indexOf("%")&&(r.db=encodeURIComponent(r.db)),r.path=i.join("/"),r}function gn(e,t){return mn(e,e.db+"/"+t)}function mn(e,t){var n=e.path?"/":"";return e.protocol+"://"+e.host+(e.port?":"+e.port:"")+"/"+e.path+n+t}function _n(e){return"?"+Object.keys(e).map((function(t){return t+"="+encodeURIComponent(e[t])})).join("&")}function bn(e,t){var n=this,i=yn(e.name,e),o=gn(i,"");e=O(e);var s,c=function(t,n){if((n=n||{}).headers=n.headers||new ot,n.credentials="include",e.auth||i.auth){var r=e.auth||i.auth,o=r.username+":"+r.password,s=me(unescape(encodeURIComponent(o)));n.headers.set("Authorization","Basic "+s)}var a=e.headers||{};return Object.keys(a).forEach((function(e){n.headers.append(e,a[e])})),function(e){var t="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",n=-1!==t.indexOf("msie"),r=-1!==t.indexOf("trident"),i=-1!==t.indexOf("edge"),o=!("method"in e)||"GET"===e.method;return(n||r||i)&&o}(n)&&(t+=(-1===t.indexOf("?")?"?":"&")+"_nonce="+Date.now()),(e.fetch||it)(t,n)};function u(e,t){return E(e,v()((function(e){f().then((function(){return t.apply(this,e)})).catch((function(t){e.pop()(t)}))}))).bind(n)}function l(e,t,n){var r={};return(t=t||{}).headers=t.headers||new ot,t.headers.get("Content-Type")||t.headers.set("Content-Type","application/json"),t.headers.get("Accept")||t.headers.set("Accept","application/json"),c(e,t).then((function(e){return r.ok=e.ok,r.status=e.status,e.json()})).then((function(e){if(r.data=e,!r.ok){r.data.status=r.status;var t=ie(r.data);if(n)return n(t);throw t}if(Array.isArray(r.data)&&(r.data=r.data.map((function(e){return e.error||e.missing?ie(e):e}))),!n)return r;n(null,r.data)}))}function f(){return e.skip_setup?Promise.resolve():s||((s=l(o).catch((function(e){return e&&e.status&&404===e.status?(I(404,"PouchDB is just detecting if the remote exists."),l(o,{method:"PUT"})):Promise.reject(e)})).catch((function(e){return!(!e||!e.status||412!==e.status)||Promise.reject(e)}))).catch((function(){s=null})),s)}function d(e){return e.split("/").map(encodeURIComponent).join("/")}a()((function(){t(null,n)})),n._remote=!0,n.type=function(){return"http"},n.id=u("id",(function(e){c(mn(i,"")).then((function(e){return e.json()})).catch((function(){return{}})).then((function(t){var n=t&&t.uuid?t.uuid+i.db:gn(i,"");e(null,n)}))})),n.compact=u("compact",(function(e,t){"function"==typeof e&&(t=e,e={}),e=O(e),l(gn(i,"_compact"),{method:"POST"}).then((function(){!function r(){n.info((function(n,i){i&&!i.compact_running?t(null,{ok:!0}):setTimeout(r,e.interval||200)}))}()}))})),n.bulkGet=E("bulkGet",(function(e,t){var n=this;function r(t){var n={};e.revs&&(n.revs=!0),e.attachments&&(n.attachments=!0),e.latest&&(n.latest=!0),l(gn(i,"_bulk_get"+_n(n)),{method:"POST",body:JSON.stringify({docs:e.docs})}).then((function(n){e.attachments&&e.binary&&n.data.results.forEach((function(e){e.docs.forEach(hn)})),t(null,n.data)})).catch(t)}function o(){var r=Math.ceil(e.docs.length/50),i=0,o=new Array(r);function s(e){return function(n,s){o[e]=s.results,++i===r&&t(null,{results:se(o)})}}for(var a=0;a<r;a++){var c=L(e,["revs","attachments","binary","latest"]);c.docs=e.docs.slice(50*a,Math.min(e.docs.length,50*(a+1))),M(n,c,s(a))}}var s=mn(i,""),a=dn[s];"boolean"!=typeof a?r((function(e,n){e?(dn[s]=!1,I(e.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),o()):(dn[s]=!0,t(null,n))})):a?r(t):o()})),n._info=function(e){f().then((function(){return c(gn(i,""))})).then((function(e){return e.json()})).then((function(t){t.host=gn(i,""),e(null,t)})).catch(e)},n.fetch=function(e,t){return f().then((function(){var n="/"===e.substring(0,1)?mn(i,e.substring(1)):gn(i,e);return c(n,t)}))},n.get=u("get",(function(e,t,n){"function"==typeof t&&(n=t,t={});var o={};function s(e){var n=e._attachments,o=n&&Object.keys(n);if(n&&o.length)return function(e,t){return new Promise((function(n,r){var i,o=0,s=0,a=0,c=e.length;function u(){++a===c?i?r(i):n():d()}function l(){o--,u()}function f(e){o--,i=i||e,u()}function d(){for(;o<t&&s<c;)o++,e[s++]().then(l,f)}d()}))}(o.map((function(o){return function(){return function(o){var s=n[o],a=pn(e._id)+"/"+d(o)+"?rev="+e._rev;return c(gn(i,a)).then((function(e){return void 0===r||r.browser?e.blob():e.buffer()})).then((function(e){return t.binary?(void 0===r||r.browser||(e.type=s.content_type),e):new Promise((function(t){qe(e,t)}))})).then((function(e){delete s.stub,delete s.length,s.data=e}))}(o)}})),5)}(t=O(t)).revs&&(o.revs=!0),t.revs_info&&(o.revs_info=!0),t.latest&&(o.latest=!0),t.open_revs&&("all"!==t.open_revs&&(t.open_revs=JSON.stringify(t.open_revs)),o.open_revs=t.open_revs),t.rev&&(o.rev=t.rev),t.conflicts&&(o.conflicts=t.conflicts),t.update_seq&&(o.update_seq=t.update_seq),e=pn(e),l(gn(i,e+_n(o))).then((function(e){return Promise.resolve().then((function(){if(t.attachments)return n=e.data,Array.isArray(n)?Promise.all(n.map((function(e){if(e.ok)return s(e.ok)}))):s(n);var n})).then((function(){n(null,e.data)}))})).catch((function(t){t.docId=e,n(t)}))})),n.remove=u("remove",(function(e,t,n,r){var o;"string"==typeof t?(o={_id:e,_rev:t},"function"==typeof n&&(r=n,n={})):(o=e,"function"==typeof t?(r=t,n={}):(r=n,n=t));var s=o._rev||n.rev;l(gn(i,pn(o._id))+"?rev="+s,{method:"DELETE"},r).catch(r)})),n.getAttachment=u("getAttachment",(function(e,t,n,o){"function"==typeof n&&(o=n,n={});var s,a=n.rev?"?rev="+n.rev:"",u=gn(i,pn(e))+"/"+d(t)+a;c(u,{method:"GET"}).then((function(e){if(s=e.headers.get("content-type"),e.ok)return void 0===r||r.browser?e.blob():e.buffer();throw e})).then((function(e){void 0===r||r.browser||(e.type=s),o(null,e)})).catch((function(e){o(e)}))})),n.removeAttachment=u("removeAttachment",(function(e,t,n,r){l(gn(i,pn(e)+"/"+d(t))+"?rev="+n,{method:"DELETE"},r).catch(r)})),n.putAttachment=u("putAttachment",(function(e,t,n,r,o,s){"function"==typeof o&&(s=o,o=r,r=n,n=null);var a=pn(e)+"/"+d(t),c=gn(i,a);if(n&&(c+="?rev="+n),"string"==typeof r){var u;try{u=ge(r)}catch(e){return s(re(G,"Attachment is not a valid base64 string"))}r=u?we(u,o):""}l(c,{headers:new ot({"Content-Type":o}),method:"PUT",body:r},s).catch(s)})),n._bulkDocs=function(e,t,n){e.new_edits=t.new_edits,f().then((function(){return Promise.all(e.docs.map(vn))})).then((function(){return l(gn(i,"_bulk_docs"),{method:"POST",body:JSON.stringify(e)},n)})).catch(n)},n._put=function(e,t,n){f().then((function(){return vn(e)})).then((function(){return l(gn(i,pn(e._id)),{method:"PUT",body:JSON.stringify(e)})})).then((function(e){n(null,e.data)})).catch((function(t){t.docId=e&&e._id,n(t)}))},n.allDocs=u("allDocs",(function(e,t){"function"==typeof e&&(t=e,e={});var n,r={},o="GET";(e=O(e)).conflicts&&(r.conflicts=!0),e.update_seq&&(r.update_seq=!0),e.descending&&(r.descending=!0),e.include_docs&&(r.include_docs=!0),e.attachments&&(r.attachments=!0),e.key&&(r.key=JSON.stringify(e.key)),e.start_key&&(e.startkey=e.start_key),e.startkey&&(r.startkey=JSON.stringify(e.startkey)),e.end_key&&(e.endkey=e.end_key),e.endkey&&(r.endkey=JSON.stringify(e.endkey)),void 0!==e.inclusive_end&&(r.inclusive_end=!!e.inclusive_end),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.skip&&(r.skip=e.skip);var s=_n(r);void 0!==e.keys&&(o="POST",n={keys:e.keys}),l(gn(i,"_all_docs"+s),{method:o,body:JSON.stringify(n)}).then((function(n){e.include_docs&&e.attachments&&e.binary&&n.data.rows.forEach(hn),t(null,n.data)})).catch(t)})),n._changes=function(e){var t="batch_size"in e?e.batch_size:25;!(e=O(e)).continuous||"heartbeat"in e||(e.heartbeat=1e4);var n="timeout"in e?e.timeout:3e4;"timeout"in e&&e.timeout&&n-e.timeout<5e3&&(n=e.timeout+5e3),"heartbeat"in e&&e.heartbeat&&n-e.heartbeat<5e3&&(n=e.heartbeat+5e3);var r={};"timeout"in e&&e.timeout&&(r.timeout=e.timeout);var o=void 0!==e.limit&&e.limit,s=o;if(e.style&&(r.style=e.style),(e.include_docs||e.filter&&"function"==typeof e.filter)&&(r.include_docs=!0),e.attachments&&(r.attachments=!0),e.continuous&&(r.feed="longpoll"),e.seq_interval&&(r.seq_interval=e.seq_interval),e.conflicts&&(r.conflicts=!0),e.descending&&(r.descending=!0),e.update_seq&&(r.update_seq=!0),"heartbeat"in e&&e.heartbeat&&(r.heartbeat=e.heartbeat),e.filter&&"string"==typeof e.filter&&(r.filter=e.filter),e.view&&"string"==typeof e.view&&(r.filter="_view",r.view=e.view),e.query_params&&"object"==typeof e.query_params)for(var c in e.query_params)e.query_params.hasOwnProperty(c)&&(r[c]=e.query_params[c]);var u,d="GET";e.doc_ids?(r.filter="_doc_ids",d="POST",u={doc_ids:e.doc_ids}):e.selector&&(r.filter="_selector",d="POST",u={selector:e.selector});var h,p=new rt,v=function(n,a){if(!e.aborted){r.since=n,"object"==typeof r.since&&(r.since=JSON.stringify(r.since)),e.descending?o&&(r.limit=s):r.limit=!o||s>t?t:s;var c=gn(i,"_changes"+_n(r)),v={signal:p.signal,method:d,body:JSON.stringify(u)};h=n,e.aborted||f().then((function(){return l(c,v,a)})).catch(a)}},y={results:[]},g=function(n,r){if(!e.aborted){var i=0;if(r&&r.results){i=r.results.length,y.last_seq=r.last_seq;var c=null,u=null;"number"==typeof r.pending&&(c=r.pending),"string"!=typeof y.last_seq&&"number"!=typeof y.last_seq||(u=y.last_seq);e.query_params,r.results=r.results.filter((function(t){s--;var n=oe(e)(t);return n&&(e.include_docs&&e.attachments&&e.binary&&hn(t),e.return_docs&&y.results.push(t),e.onChange(t,c,u)),n}))}else if(n)return e.aborted=!0,void e.complete(n);r&&r.last_seq&&(h=r.last_seq);var l=o&&s<=0||r&&i<t||e.descending;(!e.continuous||o&&s<=0)&&l?e.complete(null,y):a()((function(){v(h,g)}))}};return v(e.since||0,g),{cancel:function(){e.aborted=!0,p.abort()}}},n.revsDiff=u("revsDiff",(function(e,t,n){"function"==typeof t&&(n=t,t={}),l(gn(i,"_revs_diff"),{method:"POST",body:JSON.stringify(e)},n).catch(n)})),n._close=function(e){e()},n._destroy=function(e,t){l(gn(i,""),{method:"DELETE"}).then((function(e){t(null,e)})).catch((function(e){404===e.status?t(null,{ok:!0}):t(e)}))}}function wn(e){this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,wn)}catch(e){}}function kn(e){this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,kn)}catch(e){}}function An(e){this.status=500,this.name="invalid_value",this.message=e,this.error=!0;try{Error.captureStackTrace(this,An)}catch(e){}}function xn(e,t){return t&&e.then((function(e){a()((function(){t(null,e)}))}),(function(e){a()((function(){t(e)}))})),e}function qn(e,t){return function(){var n=arguments,r=this;return e.add((function(){return t.apply(r,n)}))}}function On(e){var t=new i(e),n=new Array(t.size),r=-1;return t.forEach((function(e){n[++r]=e})),n}function jn(e){var t=new Array(e.size),n=-1;return e.forEach((function(e,r){t[++n]=r})),t}function Sn(e){return new An("builtin "+e+" function requires map values to be numbers or number arrays")}function En(e){for(var t=0,n=0,r=e.length;n<r;n++){var i=e[n];if("number"!=typeof i){if(!Array.isArray(i))throw Sn("_sum");t="number"==typeof t?[t]:t;for(var o=0,s=i.length;o<s;o++){var a=i[o];if("number"!=typeof a)throw Sn("_sum");void 0===t[o]?t.push(a):t[o]+=a}}else"number"==typeof t?t+=i:t[0]+=i}return t}bn.valid=function(){return!0},g()(wn,Error),g()(kn,Error),g()(An,Error);var Ln=B.bind(null,"log"),Cn=Array.isArray,$n=JSON.parse;function Tn(e,t){return ve("return ("+e.replace(/;\s*$/,"")+");",{emit:t,sum:En,log:Ln,isArray:Cn,toJSON:$n})}function Mn(){this.promise=new Promise((function(e){e()}))}function Pn(e){if(!e)return"undefined";switch(typeof e){case"function":case"string":return e.toString();default:return JSON.stringify(e)}}function Dn(e,t,n,r,i,o){var s,a=function(e,t){return Pn(e)+Pn(t)+"undefined"}(n,r);if(!i&&(s=e._cachedViews=e._cachedViews||{})[a])return s[a];var c=e.info().then((function(c){var u=c.db_name+"-mrview-"+(i?"temp":Le(a));return ye(e,"_local/"+o,(function(e){e.views=e.views||{};var n=t;-1===n.indexOf("/")&&(n=t+"/"+t);var r=e.views[n]=e.views[n]||{};if(!r[u])return r[u]=!0,e})).then((function(){return e.registerDependentDatabase(u).then((function(t){var i=t.db;i.auto_compaction=!0;var o={name:u,db:i,sourceDB:e,adapter:e.adapter,mapFun:n,reduceFun:r};return o.db.get("_local/lastSeq").catch((function(e){if(404!==e.status)throw e})).then((function(e){return o.seq=e?e.seq:0,s&&o.db.once("destroyed",(function(){delete s[a]})),o}))}))}))}));return s&&(s[a]=c),c}Mn.prototype.add=function(e){return this.promise=this.promise.catch((function(){})).then((function(){return e()})),this.promise},Mn.prototype.finish=function(){return this.promise};var Bn={},zn=new Mn;function In(e){return-1===e.indexOf("/")?[e,e]:e.split("/")}function Nn(e,t){try{e.emit("error",t)}catch(e){B("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),B("error",t)}}var Rn=function(e,t){return En(t)},Hn=function(e,t){return t.length},Un=function(e,t){return{sum:En(t),min:Math.min.apply(null,t),max:Math.max.apply(null,t),count:t.length,sumsqr:function(e){for(var t=0,n=0,r=e.length;n<r;n++){var i=e[n];t+=i*i}return t}(t)}};var Fn=function(e,t,n,r){function s(e,t,n){try{t(n)}catch(t){Nn(e,t)}}function c(e,t,n,r,i){try{return{output:t(n,r,i)}}catch(t){return Nn(e,t),{error:t}}}function u(e,t){var n=pt(e.key,t.key);return 0!==n?n:pt(e.value,t.value)}function l(e,t,n){return n=n||0,"number"==typeof t?e.slice(n,t+n):n>0?e.slice(n):e}function f(e){var t=e.value;return t&&"object"==typeof t&&t._id||e.id}function d(e){return function(t){return e.include_docs&&e.attachments&&e.binary&&function(e){e.rows.forEach((function(e){var t=e.doc&&e.doc._attachments;t&&Object.keys(t).forEach((function(e){var n=t[e];t[e].data=ke(n.data,n.content_type)}))}))}(t),t}}function h(e,t,n,r){var i=t[e];void 0!==i&&(r&&(i=encodeURIComponent(JSON.stringify(i))),n.push(e+"="+i))}function p(e){if(void 0!==e){var t=Number(e);return isNaN(t)||t!==parseInt(e,10)?e:t}}function y(e,t){var n=e.descending?"endkey":"startkey",r=e.descending?"startkey":"endkey";if(void 0!==e[n]&&void 0!==e[r]&&pt(e[n],e[r])>0)throw new wn("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(t.reduce&&!1!==e.reduce){if(e.include_docs)throw new wn("{include_docs:true} is invalid for reduce");if(e.keys&&e.keys.length>1&&!e.group&&!e.group_level)throw new wn("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach((function(t){var n=function(e){if(e){if("number"!=typeof e)return new wn('Invalid value for integer: "'+e+'"');if(e<0)return new wn('Invalid value for positive integer: "'+e+'"')}}(e[t]);if(n)throw n}))}function g(e){return function(t){if(404===t.status)return e;throw t}}function m(e,t,n){var r="_local/doc_"+e,o={_id:r,keys:[]},s=n.get(e),a=s[0];return(function(e){return 1===e.length&&/^1-/.test(e[0].rev)}(s[1])?Promise.resolve(o):t.db.get(r).catch(g(o))).then((function(e){return function(e){return e.keys.length?t.db.allDocs({keys:e.keys,include_docs:!0}):Promise.resolve({rows:[]})}(e).then((function(t){return function(e,t){for(var n=[],r=new i,o=0,s=t.rows.length;o<s;o++){var c=t.rows[o].doc;if(c&&(n.push(c),r.add(c._id),c._deleted=!a.has(c._id),!c._deleted)){var u=a.get(c._id);"value"in u&&(c.value=u.value)}}var l=jn(a);return l.forEach((function(e){if(!r.has(e)){var t={_id:e},i=a.get(e);"value"in i&&(t.value=i.value),n.push(t)}})),e.keys=On(l.concat(e.keys)),n.push(e),n}(e,t)}))}))}function _(e){var t="string"==typeof e?e:e.name,n=Bn[t];return n||(n=Bn[t]=new Mn),n}function b(e){return qn(_(e),(function(){return function(e){var n,r;var i=t(e.mapFun,(function(e,t){var i={id:r._id,key:vt(e)};null!=t&&(i.value=vt(t)),n.push(i)})),a=e.seq||0;function c(t,n){return function(){return function(e,t,n){return e.db.get("_local/lastSeq").catch(g({_id:"_local/lastSeq",seq:0})).then((function(r){var i=jn(t);return Promise.all(i.map((function(n){return m(n,e,t)}))).then((function(t){var i=se(t);return r.seq=n,i.push(r),e.db.bulkDocs({docs:i})}))}))}(e,t,n)}}var l=new Mn;function f(){return e.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:a,limit:50}).then(d)}function d(t){var d=t.results;if(d.length){var p=function(t){for(var c=new o,l=0,f=t.length;l<f;l++){var d=t[l];if("_"!==d.doc._id[0]){n=[],(r=d.doc)._deleted||s(e.sourceDB,i,r),n.sort(u);var p=h(n);c.set(d.doc._id,[p,d.changes])}a=d.seq}return c}(d);if(l.add(c(p,a)),!(d.length<50))return f()}}function h(e){for(var t,n=new o,r=0,i=e.length;r<i;r++){var s=e[r],a=[s.key,s.id];r>0&&0===pt(s.key,t)&&a.push(r),n.set(gt(a),s),t=s.key}return n}return f().then((function(){return l.finish()})).then((function(){e.seq=a}))}(e)}))()}function w(e,t){return qn(_(e),(function(){return function(e,t){var r,i=e.reduceFun&&!1!==t.reduce,s=t.skip||0;void 0===t.keys||t.keys.length||(t.limit=0,delete t.keys);function a(t){return t.include_docs=!0,e.db.allDocs(t).then((function(e){return r=e.total_rows,e.rows.map((function(e){if("value"in e.doc&&"object"==typeof e.doc.value&&null!==e.doc.value){var t=Object.keys(e.doc.value).sort(),n=["id","key","value"];if(!(t<n||t>n))return e.doc.value}var r=function(e){for(var t=[],n=[],r=0;;){var i=e[r++];if("\0"!==i)switch(i){case"1":t.push(null);break;case"2":t.push("1"===e[r]),r++;break;case"3":var o=mt(e,r);t.push(o.num),r+=o.length;break;case"4":for(var s="";;){var a=e[r];if("\0"===a)break;s+=a,r++}s=s.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),t.push(s);break;case"5":var c={element:[],index:t.length};t.push(c.element),n.push(c);break;case"6":var u={element:{},index:t.length};t.push(u.element),n.push(u);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+i)}else{if(1===t.length)return t.pop();_t(t,n)}}}(e.doc._id);return{key:r[0],id:r[1],value:"value"in e.doc?e.doc.value:null}}))}))}function u(a){var u;if(u=i?function(e,t,r){0===r.group_level&&delete r.group_level;var i=r.group||r.group_level,o=n(e.reduceFun),s=[],a=isNaN(r.group_level)?Number.POSITIVE_INFINITY:r.group_level;t.forEach((function(e){var t=s[s.length-1],n=i?e.key:null;if(i&&Array.isArray(n)&&(n=n.slice(0,a)),t&&0===pt(t.groupKey,n))return t.keys.push([e.key,e.id]),void t.values.push(e.value);s.push({keys:[[e.key,e.id]],values:[e.value],groupKey:n})})),t=[];for(var u=0,f=s.length;u<f;u++){var d=s[u],h=c(e.sourceDB,o,d.keys,d.values,!1);if(h.error&&h.error instanceof An)throw h.error;t.push({value:h.error?null:h.output,key:d.groupKey})}return{rows:l(t,r.limit,r.skip)}}(e,a,t):{total_rows:r,offset:s,rows:a},t.update_seq&&(u.update_seq=e.seq),t.include_docs){var d=On(a.map(f));return e.sourceDB.allDocs({keys:d,include_docs:!0,conflicts:t.conflicts,attachments:t.attachments,binary:t.binary}).then((function(e){var t=new o;return e.rows.forEach((function(e){t.set(e.id,e.doc)})),a.forEach((function(e){var n=f(e),r=t.get(n);r&&(e.doc=r)})),u}))}return u}if(void 0!==t.keys){var d=t.keys.map((function(e){var n={startkey:gt([e]),endkey:gt([e,{}])};return t.update_seq&&(n.update_seq=!0),a(n)}));return Promise.all(d).then(se).then(u)}var h,p,v={descending:t.descending};if(t.update_seq&&(v.update_seq=!0),"start_key"in t&&(h=t.start_key),"startkey"in t&&(h=t.startkey),"end_key"in t&&(p=t.end_key),"endkey"in t&&(p=t.endkey),void 0!==h&&(v.startkey=t.descending?gt([h,{}]):gt([h])),void 0!==p){var y=!1!==t.inclusive_end;t.descending&&(y=!y),v.endkey=gt(y?[p,{}]:[p])}if(void 0!==t.key){var g=gt([t.key]),m=gt([t.key,{}]);v.descending?(v.endkey=g,v.startkey=m):(v.startkey=g,v.endkey=m)}return i||("number"==typeof t.limit&&(v.limit=t.limit),v.skip=s),a(v).then(u)}(e,t)}))()}function k(t,n,i){if("function"==typeof t._query)return function(e,t,n){return new Promise((function(r,i){e._query(t,n,(function(e,t){if(e)return i(e);r(t)}))}))}(t,n,i);if(ce(t))return function(e,t,n){var r,i,o,s=[],a="GET";if(h("reduce",n,s),h("include_docs",n,s),h("attachments",n,s),h("limit",n,s),h("descending",n,s),h("group",n,s),h("group_level",n,s),h("skip",n,s),h("stale",n,s),h("conflicts",n,s),h("startkey",n,s,!0),h("start_key",n,s,!0),h("endkey",n,s,!0),h("end_key",n,s,!0),h("inclusive_end",n,s),h("key",n,s,!0),h("update_seq",n,s),s=""===(s=s.join("&"))?"":"?"+s,void 0!==n.keys){var c="keys="+encodeURIComponent(JSON.stringify(n.keys));c.length+s.length+1<=2e3?s+=("?"===s[0]?"&":"?")+c:(a="POST","string"==typeof t?r={keys:n.keys}:t.keys=n.keys)}if("string"==typeof t){var u=In(t);return e.fetch("_design/"+u[0]+"/_view/"+u[1]+s,{headers:new ot({"Content-Type":"application/json"}),method:a,body:JSON.stringify(r)}).then((function(e){return i=e.ok,o=e.status,e.json()})).then((function(e){if(!i)throw e.status=o,ie(e);return e.rows.forEach((function(e){if(e.value&&e.value.error&&"builtin_reduce_error"===e.value.error)throw new Error(e.reason)})),e})).then(d(n))}return r=r||{},Object.keys(t).forEach((function(e){Array.isArray(t[e])?r[e]=t[e]:r[e]=t[e].toString()})),e.fetch("_temp_view"+s,{headers:new ot({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(r)}).then((function(e){return i=e.ok,o=e.status,e.json()})).then((function(e){if(!i)throw e.status=o,ie(e);return e})).then(d(n))}(t,n,i);if("string"!=typeof n)return y(i,n),zn.add((function(){return Dn(t,"temp_view/temp_view",n.map,n.reduce,!0,e).then((function(e){return t=b(e).then((function(){return w(e,i)})),n=function(){return e.db.destroy()},t.then((function(e){return n().then((function(){return e}))}),(function(e){return n().then((function(){throw e}))}));var t,n}))})),zn.finish();var o=n,s=In(o),c=s[0],u=s[1];return t.get("_design/"+c).then((function(n){var s=n.views&&n.views[u];if(!s)throw new kn("ddoc "+n._id+" has no view named "+u);return r(n,u),y(i,s),Dn(t,o,s.map,s.reduce,!1,e).then((function(e){return"ok"===i.stale||"update_after"===i.stale?("update_after"===i.stale&&a()((function(){b(e)})),w(e,i)):b(e).then((function(){return w(e,i)}))}))}))}var A;return{query:function(e,t,n){var r=this;"function"==typeof t&&(n=t,t={}),t=t?function(e){return e.group_level=p(e.group_level),e.limit=p(e.limit),e.skip=p(e.skip),e}(t):{},"function"==typeof e&&(e={map:e});var i=Promise.resolve().then((function(){return k(r,e,t)}));return xn(i,n),i},viewCleanup:(A=function(){var t=this;return"function"==typeof t._viewCleanup?function(e){return new Promise((function(t,n){e._viewCleanup((function(e,r){if(e)return n(e);t(r)}))}))}(t):ce(t)?function(e){return e.fetch("_view_cleanup",{headers:new ot({"Content-Type":"application/json"}),method:"POST"}).then((function(e){return e.json()}))}(t):function(t){return t.get("_local/"+e).then((function(e){var n=new o;Object.keys(e.views).forEach((function(e){var t=In(e),r="_design/"+t[0],o=t[1],s=n.get(r);s||(s=new i,n.set(r,s)),s.add(o)}));var r={keys:jn(n),include_docs:!0};return t.allDocs(r).then((function(r){var i={};r.rows.forEach((function(t){var r=t.key.substring(8);n.get(t.key).forEach((function(n){var o=r+"/"+n;e.views[o]||(o=n);var s=Object.keys(e.views[o]),a=t.doc&&t.doc.views&&t.doc.views[n];s.forEach((function(e){i[e]=i[e]||a}))}))}));var o=Object.keys(i).filter((function(e){return!i[e]})).map((function(e){return qn(_(e),(function(){return new t.constructor(e,t.__opts).destroy()}))()}));return Promise.all(o).then((function(){return{ok:!0}}))}))}),g({ok:!0}))}(t)},v()((function(e){var t=e.pop(),n=A.apply(this,e);return"function"==typeof t&&xn(n,t),n})))}}("mrviews",(function(e,t){if("function"==typeof e&&2===e.length){var n=e;return function(e){return n(e,t)}}return Tn(e.toString(),t)}),(function(e){var t=e.toString(),n=function(e){if(/^_sum/.test(e))return Rn;if(/^_count/.test(e))return Hn;if(/^_stats/.test(e))return Un;if(/^_/.test(e))throw new Error(e+" is not a supported reduce function.")}(t);return n||Tn(t)}),(function(e,t){var n=e.views&&e.views[t];if("string"!=typeof n.map)throw new kn("ddoc "+e._id+" has no string view named "+t+", instead found object of type: "+typeof n.map)}));var Vn={query:function(e,t,n){return Fn.query.call(this,e,t,n)},viewCleanup:function(e){return Fn.viewCleanup.call(this,e)}};function Jn(e){return/^1-/.test(e)}function Kn(e,t){var n=Object.keys(t._attachments);return Promise.all(n.map((function(n){return e.getAttachment(t._id,n,{rev:t._rev})})))}function Wn(e,t,n,r){n=O(n);var i=[],o=!0;function s(t){return e.allDocs({keys:t,include_docs:!0,conflicts:!0}).then((function(e){if(r.cancelled)throw new Error("cancelled");e.rows.forEach((function(e){var t;e.deleted||!e.doc||!Jn(e.value.rev)||(t=e.doc,t._attachments&&Object.keys(t._attachments).length>0)||function(e){return e._conflicts&&e._conflicts.length>0}(e.doc)||(e.doc._conflicts&&delete e.doc._conflicts,i.push(e.doc),delete n[e.id])}))}))}return Promise.resolve().then((function(){var e=Object.keys(n).filter((function(e){var t=n[e].missing;return 1===t.length&&Jn(t[0])}));if(e.length>0)return s(e)})).then((function(){var s=function(e){var t=[];return Object.keys(e).forEach((function(n){e[n].missing.forEach((function(e){t.push({id:n,rev:e})}))})),{docs:t,revs:!0,latest:!0}}(n);if(s.docs.length)return e.bulkGet(s).then((function(n){if(r.cancelled)throw new Error("cancelled");return Promise.all(n.results.map((function(n){return Promise.all(n.docs.map((function(n){var r=n.ok;return n.error&&(o=!1),r&&r._attachments?function(e,t,n){var r=ce(t)&&!ce(e),i=Object.keys(n._attachments);return r?e.get(n._id).then((function(r){return Promise.all(i.map((function(i){return function(e,t,n){return!e._attachments||!e._attachments[n]||e._attachments[n].digest!==t._attachments[n].digest}(r,n,i)?t.getAttachment(n._id,i):e.getAttachment(r._id,i)})))})).catch((function(e){if(404!==e.status)throw e;return Kn(t,n)})):Kn(t,n)}(t,e,r).then((function(e){var t=Object.keys(r._attachments);return e.forEach((function(e,n){var i=r._attachments[t[n]];delete i.stub,delete i.length,i.data=e})),r})):r})))}))).then((function(e){i=i.concat(se(e).filter(Boolean))}))}))})).then((function(){return{ok:o,docs:i}}))}function Gn(e,t,n,r,i){return e.get(t).catch((function(n){if(404===n.status)return"http"!==e.adapter&&"https"!==e.adapter||I(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:r,_id:t,history:[],replicator:"pouchdb",version:1};throw n})).then((function(o){if(!i.cancelled&&o.last_seq!==n)return o.history=(o.history||[]).filter((function(e){return e.session_id!==r})),o.history.unshift({last_seq:n,session_id:r}),o.history=o.history.slice(0,5),o.version=1,o.replicator="pouchdb",o.session_id=r,o.last_seq=n,e.put(o).catch((function(o){if(409===o.status)return Gn(e,t,n,r,i);throw o}))}))}function Qn(e,t,n,r,i){this.src=e,this.target=t,this.id=n,this.returnValue=r,this.opts=i||{}}Qn.prototype.writeCheckpoint=function(e,t){var n=this;return this.updateTarget(e,t).then((function(){return n.updateSource(e,t)}))},Qn.prototype.updateTarget=function(e,t){return this.opts.writeTargetCheckpoint?Gn(this.target,this.id,e,t,this.returnValue):Promise.resolve(!0)},Qn.prototype.updateSource=function(e,t){if(this.opts.writeSourceCheckpoint){var n=this;return Gn(this.src,this.id,e,t,this.returnValue).catch((function(e){if(Zn(e))return n.opts.writeSourceCheckpoint=!1,!0;throw e}))}return Promise.resolve(!0)};var Xn={undefined:function(e,t){return 0===pt(e.last_seq,t.last_seq)?t.last_seq:0},1:function(e,t){return function(e,t){if(e.session_id===t.session_id)return{last_seq:e.last_seq,history:e.history};return function e(t,n){var r=t[0],i=t.slice(1),o=n[0],s=n.slice(1);if(!r||0===n.length)return{last_seq:0,history:[]};if(Yn(r.session_id,n))return{last_seq:r.last_seq,history:t};if(Yn(o.session_id,i))return{last_seq:o.last_seq,history:s};return e(i,s)}(e.history,t.history)}(t,e).last_seq}};function Yn(e,t){var n=t[0],r=t.slice(1);return!(!e||0===t.length)&&(e===n.session_id||Yn(e,r))}function Zn(e){return"number"==typeof e.status&&4===Math.floor(e.status/100)}Qn.prototype.getCheckpoint=function(){var e=this;return e.opts&&e.opts.writeSourceCheckpoint&&!e.opts.writeTargetCheckpoint?e.src.get(e.id).then((function(e){return e.last_seq||0})).catch((function(e){if(404!==e.status)throw e;return 0})):e.target.get(e.id).then((function(t){return e.opts&&e.opts.writeTargetCheckpoint&&!e.opts.writeSourceCheckpoint?t.last_seq||0:e.src.get(e.id).then((function(e){return t.version!==e.version?0:(n=t.version?t.version.toString():"undefined")in Xn?Xn[n](t,e):0;var n}),(function(n){if(404===n.status&&t.last_seq)return e.src.put({_id:e.id,last_seq:0}).then((function(){return 0}),(function(n){return Zn(n)?(e.opts.writeSourceCheckpoint=!1,t.last_seq):0}));throw n}))})).catch((function(e){if(404!==e.status)throw e;return 0}))};function er(e,t,n){var r=n.doc_ids?n.doc_ids.sort(pt):"",i=n.filter?n.filter.toString():"",o="",s="",a="";return n.selector&&(a=JSON.stringify(n.selector)),n.filter&&n.query_params&&(o=JSON.stringify(function(e){return Object.keys(e).sort(pt).reduce((function(t,n){return t[n]=e[n],t}),{})}(n.query_params))),n.filter&&"_view"===n.filter&&(s=n.view.toString()),Promise.all([e.id(),t.id()]).then((function(e){var t=e[0]+e[1]+i+s+o+r+a;return new Promise((function(e){Ee(t,e)}))})).then((function(e){return"_local/"+(e=e.replace(/\//g,".").replace(/\+/g,"_"))}))}function tr(e,t,n,r,i){var o,s,c,u=[],l={seq:0,changes:[],docs:[]},f=!1,d=!1,h=!1,p=0,v=n.continuous||n.live||!1,y=n.batch_size||100,g=n.batches_limit||10,m=!1,_=n.doc_ids,b=n.selector,w=[],k=$e();i=i||{ok:!0,start_time:(new Date).toISOString(),docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var A={};function x(){return c?Promise.resolve():er(e,t,n).then((function(i){s=i;var o={};o=!1===n.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:"source"===n.checkpoint?{writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:"target"===n.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:{writeSourceCheckpoint:!0,writeTargetCheckpoint:!0},c=new Qn(e,t,s,r,o)}))}function q(){if(w=[],0!==o.docs.length){var e=o.docs,s={timeout:n.timeout};return t.bulkDocs({docs:e,new_edits:!1},s).then((function(t){if(r.cancelled)throw $(),new Error("cancelled");var n=Object.create(null);t.forEach((function(e){e.error&&(n[e.id]=e)}));var o=Object.keys(n).length;i.doc_write_failures+=o,i.docs_written+=e.length-o,e.forEach((function(e){var t=n[e._id];if(t){i.errors.push(t);var o=(t.name||"").toLowerCase();if("unauthorized"!==o&&"forbidden"!==o)throw t;r.emit("denied",O(t))}else w.push(e)}))}),(function(t){throw i.doc_write_failures+=e.length,t}))}}function j(){if(o.error)throw new Error("There was a problem getting docs.");i.last_seq=p=o.seq;var e=O(i);return w.length&&(e.docs=w,"number"==typeof o.pending&&(e.pending=o.pending,delete o.pending),r.emit("change",e)),f=!0,c.writeCheckpoint(o.seq,k).then((function(){if(f=!1,r.cancelled)throw $(),new Error("cancelled");o=void 0,D()})).catch((function(e){throw I(e),e}))}function S(){return Wn(e,t,o.diffs,r).then((function(e){o.error=!e.ok,e.docs.forEach((function(e){delete o.diffs[e._id],i.docs_read++,o.docs.push(e)}))}))}function E(){var e;r.cancelled||o||(0!==u.length?(o=u.shift(),(e={},o.changes.forEach((function(t){"_user/"!==t.id&&(e[t.id]=t.changes.map((function(e){return e.rev})))})),t.revsDiff(e).then((function(e){if(r.cancelled)throw $(),new Error("cancelled");o.diffs=e}))).then(S).then(q).then(j).then(E).catch((function(e){C("batch processing terminated with error",e)}))):L(!0))}function L(e){0!==l.changes.length?(e||d||l.changes.length>=y)&&(u.push(l),l={seq:0,changes:[],docs:[]},"pending"!==r.state&&"stopped"!==r.state||(r.state="active",r.emit("active")),E()):0!==u.length||o||((v&&A.live||d)&&(r.state="pending",r.emit("paused")),d&&$())}function C(e,t){h||(t.message||(t.message=e),i.ok=!1,i.status="aborting",u=[],l={seq:0,changes:[],docs:[]},$(t))}function $(o){if(!(h||r.cancelled&&(i.status="cancelled",f)))if(i.status=i.status||"complete",i.end_time=(new Date).toISOString(),i.last_seq=p,h=!0,o){(o=re(o)).result=i;var s=(o.name||"").toLowerCase();"unauthorized"===s||"forbidden"===s?(r.emit("error",o),r.removeAllListeners()):function(e,t,n,r){if(!1===e.retry)return t.emit("error",n),void t.removeAllListeners();if("function"!=typeof e.back_off_function&&(e.back_off_function=z),t.emit("requestError",n),"active"===t.state||"pending"===t.state){t.emit("paused",n),t.state="stopped";var i=function(){e.current_back_off=0};t.once("paused",(function(){t.removeListener("active",i)})),t.once("active",i)}e.current_back_off=e.current_back_off||0,e.current_back_off=e.back_off_function(e.current_back_off),setTimeout(r,e.current_back_off)}(n,r,o,(function(){tr(e,t,n,r)}))}else r.emit("complete",i),r.removeAllListeners()}function T(e,t,i){if(r.cancelled)return $();"number"==typeof t&&(l.pending=t),oe(n)(e)&&(l.seq=e.seq||i,l.changes.push(e),a()((function(){L(0===u.length&&A.live)})))}function M(e){if(m=!1,r.cancelled)return $();if(e.results.length>0)A.since=e.results[e.results.length-1].seq,D(),L(!0);else{var t=function(){v?(A.live=!0,D()):d=!0,L(!0)};o||0!==e.results.length?t():(f=!0,c.writeCheckpoint(e.last_seq,k).then((function(){f=!1,i.last_seq=p=e.last_seq,t()})).catch(I))}}function P(e){if(m=!1,r.cancelled)return $();C("changes rejected",e)}function D(){if(!m&&!d&&u.length<g){m=!0,r._changes&&(r.removeListener("cancel",r._abortChanges),r._changes.cancel()),r.once("cancel",i);var t=e.changes(A).on("change",T);t.then(o,o),t.then(M).catch(P),n.retry&&(r._changes=t,r._abortChanges=i)}function i(){t.cancel()}function o(){r.removeListener("cancel",i)}}function B(){x().then((function(){if(!r.cancelled)return c.getCheckpoint().then((function(e){A={since:p=e,limit:y,batch_size:y,style:"all_docs",doc_ids:_,selector:b,return_docs:!0},n.filter&&("string"!=typeof n.filter?A.include_docs=!0:A.filter=n.filter),"heartbeat"in n&&(A.heartbeat=n.heartbeat),"timeout"in n&&(A.timeout=n.timeout),n.query_params&&(A.query_params=n.query_params),n.view&&(A.view=n.view),D()}));$()})).catch((function(e){C("getCheckpoint rejected with ",e)}))}function I(e){f=!1,C("writeCheckpoint completed with error",e)}r.ready(e,t),r.cancelled?$():(r._addedListeners||(r.once("cancel",$),"function"==typeof n.complete&&(r.once("error",n.complete),r.once("complete",(function(e){n.complete(null,e)}))),r._addedListeners=!0),void 0===n.since?B():x().then((function(){return f=!0,c.writeCheckpoint(n.since,k)})).then((function(){f=!1,r.cancelled?$():(p=n.since,B())})).catch(I))}function nr(){m.EventEmitter.call(this),this.cancelled=!1,this.state="pending";var e=this,t=new Promise((function(t,n){e.once("complete",t),e.once("error",n)}));e.then=function(e,n){return t.then(e,n)},e.catch=function(e){return t.catch(e)},e.catch((function(){}))}function rr(e,t){var n=t.PouchConstructor;return"string"==typeof e?new n(e,t):e}function ir(e,t,n,r){if("function"==typeof n&&(r=n,n={}),void 0===n&&(n={}),n.doc_ids&&!Array.isArray(n.doc_ids))throw re(Y,"`doc_ids` filter parameter is not a list.");n.complete=r,(n=O(n)).continuous=n.continuous||n.live,n.retry="retry"in n&&n.retry,n.PouchConstructor=n.PouchConstructor||this;var i=new nr(n);return tr(rr(e,n),rr(t,n),n,i),i}function or(e,t,n,r){return"function"==typeof n&&(r=n,n={}),void 0===n&&(n={}),(n=O(n)).PouchConstructor=n.PouchConstructor||this,new sr(e=rr(e,n),t=rr(t,n),n,r)}function sr(e,t,n,r){var i=this;this.canceled=!1;var o=n.push?N({},n,n.push):n,s=n.pull?N({},n,n.pull):n;function a(e){i.emit("change",{direction:"pull",change:e})}function c(e){i.emit("change",{direction:"push",change:e})}function u(e){i.emit("denied",{direction:"push",doc:e})}function l(e){i.emit("denied",{direction:"pull",doc:e})}function f(){i.pushPaused=!0,i.pullPaused&&i.emit("paused")}function d(){i.pullPaused=!0,i.pushPaused&&i.emit("paused")}function h(){i.pushPaused=!1,i.pullPaused&&i.emit("active",{direction:"push"})}function p(){i.pullPaused=!1,i.pushPaused&&i.emit("active",{direction:"pull"})}this.push=ir(e,t,o),this.pull=ir(t,e,s),this.pushPaused=!0,this.pullPaused=!0;var v={};function y(e){return function(t,n){("change"===t&&(n===a||n===c)||"denied"===t&&(n===l||n===u)||"paused"===t&&(n===d||n===f)||"active"===t&&(n===p||n===h))&&(t in v||(v[t]={}),v[t][e]=!0,2===Object.keys(v[t]).length&&i.removeAllListeners(t))}}function g(e,t,n){-1==e.listeners(t).indexOf(n)&&e.on(t,n)}n.live&&(this.push.on("complete",i.pull.cancel.bind(i.pull)),this.pull.on("complete",i.push.cancel.bind(i.push))),this.on("newListener",(function(e){"change"===e?(g(i.pull,"change",a),g(i.push,"change",c)):"denied"===e?(g(i.pull,"denied",l),g(i.push,"denied",u)):"active"===e?(g(i.pull,"active",p),g(i.push,"active",h)):"paused"===e&&(g(i.pull,"paused",d),g(i.push,"paused",f))})),this.on("removeListener",(function(e){"change"===e?(i.pull.removeListener("change",a),i.push.removeListener("change",c)):"denied"===e?(i.pull.removeListener("denied",l),i.push.removeListener("denied",u)):"active"===e?(i.pull.removeListener("active",p),i.push.removeListener("active",h)):"paused"===e&&(i.pull.removeListener("paused",d),i.push.removeListener("paused",f))})),this.pull.on("removeListener",y("pull")),this.push.on("removeListener",y("push"));var m=Promise.all([this.push,this.pull]).then((function(e){var t={push:e[0],pull:e[1]};return i.emit("complete",t),r&&r(null,t),i.removeAllListeners(),t}),(function(e){if(i.cancel(),r?r(e):i.emit("error",e),i.removeAllListeners(),r)throw e}));this.then=function(e,t){return m.then(e,t)},this.catch=function(e){return m.catch(e)}}g()(nr,m.EventEmitter),nr.prototype.cancel=function(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")},nr.prototype.ready=function(e,t){var n=this;function r(){n.cancel()}n._readyCalled||(n._readyCalled=!0,e.once("destroyed",r),t.once("destroyed",r),n.once("complete",(function(){e.removeListener("destroyed",r),t.removeListener("destroyed",r)})))},g()(sr,m.EventEmitter),sr.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())},nt.plugin((function(e){e.adapter("idb",fn,!0)})).plugin((function(e){e.adapter("http",bn,!1),e.adapter("https",bn,!1)})).plugin(Vn).plugin((function(e){e.replicate=ir,e.sync=or,Object.defineProperty(e.prototype,"replicate",{get:function(){var e=this;return void 0===this.replicateMethods&&(this.replicateMethods={from:function(t,n,r){return e.constructor.replicate(t,e,n,r)},to:function(t,n,r){return e.constructor.replicate(e,t,n,r)}}),this.replicateMethods}}),e.prototype.sync=function(e,t,n){return this.constructor.sync(this,e,t,n)}})),t.a=nt}).call(this,n(8),n(19))},function(e,t,n){var r=n(20),i=n(21),o=i;o.v1=r,o.v4=i,e.exports=o},function(e,t,n){"use strict";function r(e,t,n){var r=n[n.length-1];e===r.element&&(n.pop(),r=n[n.length-1]);var i=r.element,o=r.index;if(Array.isArray(i))i.push(e);else if(o===t.length-2){i[t.pop()]=e}else t.push(e)}t.stringify=function(e){var t=[];t.push({obj:e});for(var n,r,i,o,s,a,c,u,l,f,d="";n=t.pop();)if(r=n.obj,d+=n.prefix||"",i=n.val||"")d+=i;else if("object"!=typeof r)d+=void 0===r?null:JSON.stringify(r);else if(null===r)d+="null";else if(Array.isArray(r)){for(t.push({val:"]"}),o=r.length-1;o>=0;o--)s=0===o?"":",",t.push({obj:r[o],prefix:s});t.push({val:"["})}else{for(c in a=[],r)r.hasOwnProperty(c)&&a.push(c);for(t.push({val:"}"}),o=a.length-1;o>=0;o--)l=r[u=a[o]],f=o>0?",":"",f+=JSON.stringify(u)+":",t.push({obj:l,prefix:f});t.push({val:"{"})}return d},t.parse=function(e){for(var t,n,i,o,s,a,c,u,l,f=[],d=[],h=0;;)if("}"!==(t=e[h++])&&"]"!==t&&void 0!==t)switch(t){case" ":case"\t":case"\n":case":":case",":break;case"n":h+=3,r(null,f,d);break;case"t":h+=3,r(!0,f,d);break;case"f":h+=4,r(!1,f,d);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(n="",h--;;){if(i=e[h++],!/[\d\.\-e\+]/.test(i)){h--;break}n+=i}r(parseFloat(n),f,d);break;case'"':for(o="",s=void 0,a=0;'"'!==(c=e[h++])||"\\"===s&&a%2==1;)o+=c,"\\"===(s=c)?a++:a=0;r(JSON.parse('"'+o+'"'),f,d);break;case"[":u={element:[],index:f.length},f.push(u.element),d.push(u);break;case"{":l={element:{},index:f.length},f.push(l.element),d.push(l);break;default:throw new Error("unexpectedly reached end of input: "+t)}else{if(1===f.length)return f.pop();r(f.pop(),f,d)}}},function(e,t,n){var r=n(22),i=n(23),o=i;o.v1=r,o.v4=i,e.exports=o},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var c,u=[],l=!1,f=-1;function d(){l&&c&&(l=!1,c.length?u=c.concat(u):f=-1,u.length&&h())}function h(){if(!l){var e=a(d);l=!0;for(var t=u.length;t;){for(c=u,u=[];++f<t;)c&&c[f].run();f=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||l||a(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){var r,i,o=n(13),s=n(14),a=0,c=0;e.exports=function(e,t,n){var u=t&&n||0,l=t||[],f=(e=e||{}).node||r,d=void 0!==e.clockseq?e.clockseq:i;if(null==f||null==d){var h=o();null==f&&(f=r=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==d&&(d=i=16383&(h[6]<<8|h[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),v=void 0!==e.nsecs?e.nsecs:c+1,y=p-a+(v-c)/1e4;if(y<0&&void 0===e.clockseq&&(d=d+1&16383),(y<0||p>a)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=p,c=v,i=d;var g=(1e4*(268435455&(p+=122192928e5))+v)%4294967296;l[u++]=g>>>24&255,l[u++]=g>>>16&255,l[u++]=g>>>8&255,l[u++]=255&g;var m=p/4294967296*1e4&268435455;l[u++]=m>>>8&255,l[u++]=255&m,l[u++]=m>>>24&15|16,l[u++]=m>>>16&255,l[u++]=d>>>8|128,l[u++]=255&d;for(var _=0;_<6;++_)l[u+_]=f[_];return t||s(l)}},function(e,t,n){var r=n(13),i=n(14);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},function(e,t,n){var r,i,o=n(15),s=n(16),a=0,c=0;e.exports=function(e,t,n){var u=t&&n||0,l=t||[],f=(e=e||{}).node||r,d=void 0!==e.clockseq?e.clockseq:i;if(null==f||null==d){var h=o();null==f&&(f=r=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==d&&(d=i=16383&(h[6]<<8|h[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),v=void 0!==e.nsecs?e.nsecs:c+1,y=p-a+(v-c)/1e4;if(y<0&&void 0===e.clockseq&&(d=d+1&16383),(y<0||p>a)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=p,c=v,i=d;var g=(1e4*(268435455&(p+=122192928e5))+v)%4294967296;l[u++]=g>>>24&255,l[u++]=g>>>16&255,l[u++]=g>>>8&255,l[u++]=255&g;var m=p/4294967296*1e4&268435455;l[u++]=m>>>8&255,l[u++]=255&m,l[u++]=m>>>24&15|16,l[u++]=m>>>16&255,l[u++]=d>>>8|128,l[u++]=255&d;for(var _=0;_<6;++_)l[u+_]=f[_];return t||s(l)}},function(e,t,n){var r=n(15),i=n(16);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},function(e,t){!function(e){var t,n='<svg><symbol id="icon-user" viewBox="0 0 1024 1024"><path d="M1001.28 1002.624v-7.424c0-230.912-161.152-424.704-376.768-475.648a272.064 272.064 0 0 0 159.616-247.232A272.576 272.576 0 0 0 512 0a272.576 272.576 0 0 0-272.192 272.32 271.808 271.808 0 0 0 159.616 247.04C183.808 570.496 22.656 764.096 22.656 995.2c0 9.408 0.128 18.944 0.64 28.096h61.376a434.368 434.368 0 0 1-0.704-25.856c0-248.064 180.032-426.752 428.032-426.752 248.064 0 426.624 178.944 426.624 427.008v7.68c0 6.656 0.256 14.272 0 18.624l62.656-0.896v-20.48M302.784 272.32A209.408 209.408 0 0 1 512.064 63.104c115.2 0 209.088 93.888 209.088 209.216a209.408 209.408 0 0 1-209.088 209.152 209.408 209.408 0 0 1-209.28-209.152"  ></path></symbol><symbol id="icon-finished" viewBox="0 0 1024 1024"><path d="M918.35 676.25c7.2 7.2 7.2 19.35 0 27l-241.65 241.65c-7.2 7.2-19.35 7.2-27 0-7.2-7.2-7.2-19.35 0-27l241.65-241.65c7.65-7.2 19.35-7.2 27 0z"  ></path><path d="M663.2 954.8c-5.85 0-12.15-2.25-16.65-6.75s-6.75-10.35-6.75-16.65 2.25-12.15 6.75-16.65l241.65-241.65c4.5-4.5 10.35-6.75 16.65-6.75s12.15 2.25 16.65 6.75 6.75 10.35 6.75 16.65-2.25 12.15-6.75 16.65l-241.65 241.65c-4.5 4.5-10.35 6.75-16.65 6.75z m241.65-279.45c-4.05 0-7.65 1.35-10.35 4.05l-241.65 241.65c-2.7 2.7-4.05 6.3-4.05 10.35s1.35 7.65 4.05 10.35c5.85 5.85 14.85 5.85 20.25 0l241.65-241.65c2.7-2.7 4.05-6.3 4.05-10.35s-1.35-7.65-4.05-10.35c-2.25-2.7-6.3-4.05-9.9-4.05z"  ></path><path d="M675.35 944.45c-7.2 7.2-19.35 7.2-27 0L534.5 830.6c-7.2-7.2-7.2-19.35 0-27 7.2-7.2 19.35-7.2 27 0l113.85 113.85c7.65 7.65 7.65 19.8 0 27z"  ></path><path d="M662.3 954.8c-6.3 0-12.15-2.25-16.65-6.75l-113.85-113.85c-4.5-4.5-6.75-10.35-6.75-16.65s2.25-12.15 6.75-16.65c9-9 23.85-9 33.3 0l113.85 113.85c4.5 4.5 6.75 10.35 6.75 16.65s-2.25 12.15-6.75 16.65c-4.5 4.05-10.35 6.75-16.65 6.75zM548 802.7c-3.6 0-7.2 1.35-10.35 4.05-2.7 2.7-4.05 6.3-4.05 10.35s1.35 7.65 4.05 10.35l113.85 113.85c5.4 5.4 14.85 5.4 20.25 0 2.7-2.7 4.05-6.3 4.05-10.35s-1.35-7.65-4.05-10.35l-113.85-113.85c-2.25-2.7-6.3-4.05-9.9-4.05zM678.5 286.55c0 10.35-8.55 18.9-18.9 18.9H318.05c-10.35 0-18.9-8.55-18.9-18.9 0-10.35 8.55-18.9 18.9-18.9h341.55c10.35 0 18.9 8.55 18.9 18.9z"  ></path><path d="M659.6 309.95H318.05c-13.05 0-23.4-10.35-23.4-23.4 0-13.05 10.35-23.4 23.4-23.4h341.55c13.05 0 23.4 10.35 23.4 23.4 0 13.05-10.35 23.4-23.4 23.4z m-341.55-37.8c-8.1 0-14.4 6.3-14.4 14.4s6.3 14.4 14.4 14.4h341.55c8.1 0 14.4-6.3 14.4-14.4s-6.3-14.4-14.4-14.4H318.05z"  ></path><path d="M678.5 495.35c0 10.35-8.55 18.9-18.9 18.9H318.05c-10.35 0-18.9-8.55-18.9-18.9 0-10.35 8.55-18.9 18.9-18.9h341.55c10.35 0 18.9 8.55 18.9 18.9z"  ></path><path d="M659.6 518.75H318.05c-13.05 0-23.4-10.35-23.4-23.4 0-13.05 10.35-23.4 23.4-23.4h341.55c13.05 0 23.4 10.35 23.4 23.4 0 13.05-10.35 23.4-23.4 23.4z m-341.55-37.8c-8.1 0-14.4 6.3-14.4 14.4s6.3 14.4 14.4 14.4h341.55c8.1 0 14.4-6.3 14.4-14.4s-6.3-14.4-14.4-14.4H318.05z"  ></path><path d="M498.5 691.1c0 10.35-8.55 18.9-18.9 18.9H318.05c-10.35 0-18.9-8.55-18.9-18.9 0-10.35 8.55-18.9 18.9-18.9h161.1c10.8 0 19.35 8.55 19.35 18.9z"  ></path><path d="M479.6 714.5H318.05c-13.05 0-23.4-10.35-23.4-23.4s10.35-23.4 23.4-23.4h161.1c13.05 0 23.4 10.35 23.4 23.4s-10.35 23.4-22.95 23.4z m-161.55-37.8c-8.1 0-14.4 6.3-14.4 14.4s6.3 14.4 14.4 14.4h161.1c8.1 0 14.4-6.3 14.4-14.4s-6.3-14.4-14.4-14.4H318.05z"  ></path><path d="M767.6 73.7H211.85C150.2 73.7 100.25 124.1 100.25 185.75v652.95c0 61.65 49.95 111.6 111.6 111.6h306c10.8 0 19.35-8.55 19.35-19.35 0-10.35-8.1-18.9-18-19.35H211.85c-40.5 0-73.35-32.85-73.35-73.35v-652.5c0-40.5 32.85-73.35 73.35-73.35h555.75c40.5 0 73.35 32.85 73.35 73.35v401.85c0 10.8 8.55 19.35 19.35 19.35s19.35-8.55 19.35-19.35V185.75c-0.45-61.65-50.4-112.05-112.05-112.05z"  ></path><path d="M517.4 954.8H211.85c-63.9 0-116.1-52.2-116.1-116.1V185.75c0-63.9 52.2-116.1 116.1-116.1h555.75c63.9 0 116.1 52.2 116.1 116.1v401.85c0 13.05-10.8 23.85-23.85 23.85s-23.85-10.8-23.85-23.85V185.75c0-37.8-30.6-68.85-68.85-68.85H211.85C174.05 116.9 143 147.5 143 185.75v652.95c0 37.8 30.6 68.85 68.85 68.85h310.05v0.45c11.25 2.25 19.35 11.7 19.35 23.4 0 12.6-10.35 23.4-23.85 23.4zM211.85 78.2C152.9 78.2 104.75 126.35 104.75 185.75v652.95c0 58.95 48.15 107.1 107.1 107.1h306c8.1 0 14.85-6.75 14.85-14.85 0-7.65-6.3-14.4-13.95-14.85H212.3c-42.75 0-77.85-34.65-77.85-77.85v-652.5c0-42.75 34.65-77.85 77.85-77.85h555.75c42.75 0 77.85 34.65 77.85 77.85v401.85c0 8.1 6.75 14.85 14.85 14.85s14.85-6.75 14.85-14.85V185.75c0-58.95-48.15-107.1-107.1-107.1H211.85z"  ></path></symbol><symbol id="icon-play" viewBox="0 0 1024 1024"><path d="M953.82186667 891.56266667H692.224c-8.192 0-14.7456-4.9152-15.83786667-12.56106667l-14.7456-58.9824v-3.2768c0-12.56106667-11.4688-24.02986667-24.02986666-24.02986667H421.888c-12.56106667 0-24.02986667 11.4688-24.02986667 24.02986667v3.2768l-14.19946666 58.9824c-1.6384 6.5536-8.192 12.56106667-15.83786667 12.56106667H86.016c-30.58346667 0-55.7056-25.12213333-55.7056-55.7056V440.45653333c0-30.58346667 25.12213333-55.7056 55.7056-55.7056h869.9904c30.58346667 0 55.7056 25.12213333 55.7056 55.7056v394.8544c-2.73066667 30.58346667-26.2144 56.25173333-57.89013333 56.25173334z m-247.94453334-31.67573334H954.368c12.56106667 0 24.02986667-11.4688 24.02986667-24.02986666V440.45653333c0-12.56106667-11.4688-24.02986667-24.02986667-24.02986666H86.016c-12.56106667 0-24.02986667 11.4688-24.02986667 24.02986666v394.8544c0 12.56106667 11.4688 24.02986667 24.02986667 24.02986667h269.24373333l11.4688-46.42133333c1.6384-30.58346667 25.12213333-54.0672 55.7056-54.0672h216.81493334c30.58346667 0 54.0672 24.02986667 55.7056 54.0672l10.92266666 46.96746666z"  ></path><path d="M953.82186667 899.75466667H692.224c-12.01493333 0-21.84533333-7.64586667-24.02986667-19.11466667l-14.7456-60.6208v-3.2768c0-8.192-7.64586667-15.83786667-15.83786666-15.83786667H421.888c-8.192 0-15.83786667 7.64586667-15.83786667 15.83786667v5.46133333L391.85066667 881.18613333c-2.73066667 10.92266667-13.1072 18.56853333-24.02986667 18.56853334H86.016c-35.49866667 0-63.8976-28.39893333-63.8976-63.8976V440.45653333c0-35.49866667 28.39893333-63.8976 63.8976-63.8976h869.9904c35.49866667 0 63.8976 28.39893333 63.8976 63.8976v395.40053334c-3.2768 36.59093333-31.67573333 63.8976-66.08213333 63.8976z m-283.98933334-80.82773334l14.7456 58.9824c0.54613333 3.82293333 4.36906667 5.46133333 7.64586667 5.46133334h261.59786667c25.66826667 0 46.96746667-20.75306667 49.69813333-48.60586667V440.45653333c0-26.2144-21.2992-47.5136-47.5136-47.5136H86.016c-26.2144 0-47.5136 21.2992-47.5136 47.5136v395.40053334c0 26.2144 21.2992 47.5136 47.5136 47.5136h281.8048c3.82293333 0 7.09973333-3.2768 7.64586667-6.5536l14.19946666-57.89013334v-2.18453333c0-16.93013333 15.29173333-32.22186667 32.22186667-32.22186667H637.61066667c16.93013333 0 32.22186667 15.29173333 32.22186666 32.22186667v2.18453333z m284.53546667 49.152h-255.04426667l-12.56106666-54.61333333c-1.6384-26.2144-21.84533333-46.42133333-47.5136-46.42133333H422.43413333c-25.66826667 0-45.8752 19.6608-47.5136 46.42133333v1.6384l-13.1072 52.4288H86.016c-16.93013333 0-32.22186667-15.29173333-32.22186667-32.22186667V440.45653333c0-16.93013333 15.29173333-32.22186667 32.22186667-32.22186666h868.352c16.93013333 0 32.22186667 15.29173333 32.22186667 32.22186666v395.40053334c0 16.93013333-15.29173333 32.22186667-32.22186667 32.22186666z m-241.93706667-16.384H954.368c8.192 0 15.83786667-7.64586667 15.83786667-15.83786666V440.45653333c0-8.192-7.64586667-15.83786667-15.83786667-15.83786666H86.016c-8.192 0-15.83786667 7.64586667-15.83786667 15.83786666v394.8544c0 8.192 7.64586667 15.83786667 15.83786667 15.83786667h262.69013333l9.8304-39.3216c2.18453333-34.95253333 29.4912-61.16693333 63.8976-61.16693333h216.81493334c34.4064 0 61.71306667 26.2144 63.8976 61.16693333l9.28426666 39.86773333z"  ></path><path d="M516.9152 397.312h-31.67573333V259.14026667c0-9.28426667 6.5536-15.83786667 15.83786666-15.83786667h103.2192v-141.99466667h31.67573334v158.37866667c0 9.28426667-6.5536 15.83786667-15.83786667 15.83786667h-103.2192V397.312z"  ></path><path d="M525.1072 405.504h-48.05973333V259.14026667c0-13.65333333 10.37653333-24.02986667 24.02986666-24.02986667h95.0272v-141.99466667h48.05973334v166.57066667c0 13.65333333-10.37653333 24.02986667-24.02986667 24.02986667h-95.0272v121.78773333z m-31.67573333-16.384h15.29173333V267.33226667h111.4112c4.9152 0 7.64586667-2.73066667 7.64586667-7.64586667V109.49973333h-15.29173334v141.99466667H501.07733333c-4.9152 0-7.64586667 2.73066667-7.64586666 7.64586667v129.97973333z"  ></path><path d="M696.59306667 629.41866667c-40.96 0-74.82026667-33.31413333-74.82026667-74.82026667 0-40.96 33.31413333-74.82026667 74.82026667-74.82026667 40.96 0 74.27413333 33.31413333 74.27413333 74.82026667 0 39.86773333-33.86026667 74.82026667-74.27413333 74.82026667z m0-118.51093334c-24.02986667 0-43.14453333 19.11466667-43.14453334 43.14453334s19.11466667 42.5984 43.14453334 42.5984 43.14453333-19.11466667 43.14453333-42.5984c-0.54613333-24.02986667-19.6608-43.14453333-43.14453333-43.14453334z"  ></path><path d="M696.59306667 637.61066667c-45.8752 0-83.01226667-37.13706667-83.01226667-83.01226667 0-45.8752 37.13706667-83.01226667 83.01226667-83.01226667 45.32906667 0 82.46613333 37.13706667 82.46613333 83.01226667 0 44.78293333-37.6832 83.01226667-82.46613333 83.01226667z m0-149.64053334c-36.59093333 0-66.62826667 30.03733333-66.62826667 66.62826667 0 36.59093333 30.03733333 66.62826667 66.62826667 66.62826667 34.95253333 0 66.08213333-31.1296 66.08213333-66.62826667 0-36.59093333-29.4912-66.62826667-66.08213333-66.62826667z m0 116.87253334c-28.94506667 0-51.33653333-22.39146667-51.33653334-50.7904 0-28.94506667 22.39146667-51.33653333 51.33653334-51.33653334 28.39893333 0 50.7904 22.39146667 51.33653333 51.33653334 0 27.8528-22.9376 50.7904-51.33653333 50.7904z m0-85.74293334c-19.6608 0-34.95253333 15.29173333-34.95253334 34.95253334 0 19.11466667 15.29173333 34.4064 34.95253334 34.4064 19.11466667 0 34.95253333-15.29173333 34.95253333-34.4064-0.54613333-19.6608-15.83786667-34.95253333-34.95253333-34.95253334z"  ></path><path d="M850.60266667 779.60533333c-40.96 0-74.27413333-33.31413333-74.27413334-74.27413333s33.31413333-74.82026667 74.27413334-74.82026667 74.82026667 33.31413333 74.82026666 74.82026667c0 40.96-33.86026667 74.27413333-74.82026666 74.27413333z m0-117.41866666c-24.02986667 0-43.14453333 19.11466667-43.14453334 43.14453333 0 23.48373333 19.11466667 42.5984 43.14453334 42.5984s43.14453333-19.11466667 43.14453333-42.5984c0-24.02986667-19.11466667-43.14453333-43.14453333-43.14453333z"  ></path><path d="M850.60266667 787.79733333c-45.32906667 0-82.46613333-37.13706667-82.46613334-82.46613333 0-45.8752 37.13706667-83.01226667 82.46613334-83.01226667 45.8752 0 83.01226667 37.13706667 83.01226666 83.01226667 0 45.32906667-37.13706667 82.46613333-83.01226666 82.46613333z m0-149.0944c-36.59093333 0-66.08213333 30.03733333-66.08213334 66.62826667 0 36.59093333 29.4912 66.08213333 66.08213334 66.08213333 36.59093333 0 66.62826667-29.4912 66.62826666-66.08213333 0-36.59093333-30.03733333-66.62826667-66.62826666-66.62826667z m0 117.41866667c-28.39893333 0-51.33653333-22.9376-51.33653334-50.7904 0-28.94506667 22.39146667-51.33653333 51.33653334-51.33653333s51.33653333 22.39146667 51.33653333 51.33653333c0 27.8528-22.9376 50.7904-51.33653333 50.7904z m0-85.74293333c-19.6608 0-34.95253333 15.29173333-34.95253334 34.95253333 0 19.11466667 15.83786667 34.4064 34.95253334 34.4064s34.95253333-15.29173333 34.95253333-34.4064c0-19.6608-15.29173333-34.95253333-34.95253333-34.95253333z"  ></path><path d="M274.432 733.184H195.24266667c-9.28426667 0-15.83786667-6.5536-15.83786667-15.83786667v-42.5984h-43.14453333c-9.28426667 0-15.83786667-6.5536-15.83786667-15.83786666v-79.18933334c0-9.28426667 6.5536-15.83786667 15.83786667-15.83786666h43.14453333v-43.14453334c0-9.28426667 6.5536-15.83786667 15.83786667-15.83786666h79.18933333c9.28426667 0 15.83786667 6.5536 15.83786667 15.83786666v43.14453334h43.14453333c9.28426667 0 15.83786667 6.5536 15.83786667 15.83786666v79.18933334c0 9.28426667-6.5536 15.83786667-15.83786667 15.83786666h-42.5984v42.5984c-0.54613333 8.192-8.192 15.83786667-16.384 15.83786667z m-63.35146667-31.67573333h47.5136v-42.5984c0-9.28426667 6.5536-15.83786667 15.83786667-15.83786667h43.14453333v-47.5136h-43.14453333c-9.28426667 0-15.83786667-6.5536-15.83786667-15.83786667v-43.14453333h-47.5136v43.14453333c0 9.28426667-6.5536 15.83786667-15.83786666 15.83786667h-43.14453334v47.5136h42.5984c9.28426667 0 15.83786667 6.5536 15.83786667 15.83786667v42.5984h0.54613333z"  ></path><path d="M274.432 741.376H195.24266667c-13.65333333 0-24.02986667-10.37653333-24.02986667-24.02986667v-34.4064h-34.95253333c-13.65333333 0-24.02986667-10.37653333-24.02986667-24.02986666v-79.18933334c0-13.65333333 10.37653333-24.02986667 24.02986667-24.02986666h34.95253333v-34.95253334c0-13.65333333 10.37653333-24.02986667 24.02986667-24.02986666h79.18933333c13.65333333 0 24.02986667 10.37653333 24.02986667 24.02986666v34.95253334h34.95253333c13.65333333 0 24.02986667 10.37653333 24.02986667 24.02986666v79.18933334c0 13.65333333-10.37653333 24.02986667-24.02986667 24.02986666H299.008v34.4064c-1.09226667 13.1072-12.01493333 24.02986667-24.576 24.02986667z m-138.17173333-169.30133333c-4.9152 0-7.64586667 2.73066667-7.64586667 7.64586666v79.18933334c0 4.9152 2.73066667 7.64586667 7.64586667 7.64586666h51.33653333v50.7904c0 4.9152 2.73066667 7.64586667 7.64586667 7.64586667h79.18933333c3.82293333 0 8.192-4.36906667 8.192-8.192v-50.24426667h50.7904c4.9152 0 7.64586667-2.73066667 7.64586667-7.64586666v-79.18933334c0-4.9152-2.73066667-7.64586667-7.64586667-7.64586666h-51.33653333v-51.33653334c0-4.9152-2.73066667-7.64586667-7.64586667-7.64586666H195.24266667c-4.9152 0-7.64586667 2.73066667-7.64586667 7.64586666v51.33653334h-51.33653333z m130.52586666 137.6256H202.3424v-50.7904c0-4.9152-2.73066667-7.64586667-7.64586667-7.64586667h-50.7904v-63.8976H195.24266667c4.9152 0 7.64586667-2.73066667 7.64586666-7.64586667V528.384h63.8976v51.33653333c0 4.9152 2.73066667 7.64586667 7.64586667 7.64586667h51.33653333v63.8976h-51.33653333c-4.9152 0-7.64586667 2.73066667-7.64586667 7.64586667v50.7904z m-48.05973333-16.384h31.67573333v-34.4064c0-13.65333333 10.37653333-24.02986667 24.02986667-24.02986667h34.95253333v-31.1296h-34.95253333c-13.65333333 0-24.02986667-10.37653333-24.02986667-24.02986667V544.768h-31.1296v34.95253333c0 13.65333333-10.37653333 24.02986667-24.02986666 24.02986667h-34.95253334v31.1296h34.4064c13.65333333 0 24.02986667 10.37653333 24.02986667 24.02986667v34.4064z"  ></path></symbol><symbol id="icon-others" viewBox="0 0 1024 1024"><path d="M721.92 460.288c-18.432-10.752-41.472-10.752-60.416 0-18.432 10.752-30.208 30.72-30.208 52.224s11.264 41.472 30.208 52.224c18.432 10.752 41.472 10.752 60.416 0 18.432-10.752 30.208-30.72 30.208-52.224s-11.264-41.472-30.208-52.224z"  ></path><path d="M967.168 367.104c-10.24-32.256-23.552-62.976-40.448-92.672-11.264-19.968-37.888-21.504-50.688-3.072-8.192 11.264-6.656 23.04 0 34.816 55.808 101.888 69.632 208.896 37.376 320.512-64.512 225.792-299.008 353.792-523.264 286.72-164.864-49.152-284.16-197.632-296.96-369.664-5.12-70.144 6.656-137.728 34.816-202.24C204.8 163.84 402.432 60.928 592.384 100.352c43.52 9.216 84.992 24.064 123.904 46.08 6.656 3.584 13.312 6.144 21.504 5.12 12.8-2.048 23.04-11.776 25.6-24.064 2.56-13.312-3.584-25.6-16.384-33.28-108.032-59.392-222.208-76.8-342.528-50.176C186.88 93.184 32.256 288.256 32.256 511.488c0 35.84 3.584 71.168 11.776 105.984 60.928 269.824 336.896 432.64 602.112 354.816 187.392-54.784 322.56-218.112 342.016-413.184 6.144-65.024-1.024-129.024-20.992-192z"  ></path><path d="M480.768 460.288c-18.432 10.752-30.208 30.72-30.208 52.224 0 33.28 27.136 60.416 60.416 60.416s60.416-27.136 60.416-60.416c0-21.504-11.264-41.472-30.208-52.224-18.944-10.752-41.984-10.752-60.416 0zM299.52 460.288c-18.432 10.752-30.208 30.72-30.208 52.224s11.264 41.472 30.208 52.224c18.432 10.752 41.472 10.752 60.416 0 18.432-10.752 30.208-30.72 30.208-52.224S378.88 471.04 359.936 460.288c-18.432-10.752-41.472-10.752-60.416 0z"  ></path></symbol><symbol id="icon-level1" viewBox="0 0 1265 1024"><path d="M1138.447059 256c-69.812706 0-126.494118 57.404235-126.494118 128 0 16.865882 3.252706 32.888471 9.035294 47.585882L822.211765 512l-133.240471-269.613176C730.473412 221.605647 758.964706 178.115765 758.964706 128 758.964706 57.404235 702.283294 0 632.470588 0 562.657882 0 505.976471 57.404235 505.976471 128c0 50.115765 28.491294 93.605647 69.993412 114.386824L442.729412 512 243.892706 431.585882C249.735529 416.888471 252.988235 400.865882 252.988235 384c0-70.595765-56.681412-128-126.494118-128C56.681412 256 0 313.404235 0 384 0 454.776471 56.681412 512 126.494118 512c7.107765 0 14.215529-0.481882 21.082353-1.807059l67.403294 405.082353C221.364706 979.305412 278.226824 1024 335.149176 1024l588.318118 0c63.247059 0 113.724235-44.694588 126.494118-108.724706L1117.364706 510.192941c6.866824 1.325176 13.974588 1.807059 21.082353 1.807059 69.812706 0 126.494118-57.283765 126.494118-128C1264.941176 313.404235 1208.259765 256 1138.447059 256zM733.786353 876.122353 528.745412 876.122353l0-38.430118 80.112941 0L608.858353 570.428235 526.697412 593.799529 526.697412 552.899765l127.216941-36.382118 0 321.174588 79.872 0L733.786353 876.122353z"  ></path></symbol><symbol id="icon-level2" viewBox="0 0 1265 1024"><path d="M1138.447059 256c-69.812706 0-126.494118 57.404235-126.494118 128 0 16.865882 3.252706 32.888471 9.035294 47.585882L822.211765 512l-133.240471-269.613176C730.473412 221.605647 758.964706 178.115765 758.964706 128 758.964706 57.404235 702.283294 0 632.470588 0 562.657882 0 505.976471 57.404235 505.976471 128c0 50.115765 28.431059 93.605647 69.993412 114.386824L442.729412 512 243.892706 431.585882C249.735529 416.888471 252.988235 400.865882 252.988235 384c0-70.595765-56.681412-128-126.494118-128C56.681412 256 0 313.404235 0 384 0 454.776471 56.681412 512 126.494118 512c7.107765 0 14.215529-0.481882 21.082353-1.807059l67.403294 405.082353C221.364706 979.305412 278.226824 1024 335.149176 1024l588.318118 0c63.247059 0 113.724235-44.694588 126.494118-108.724706L1117.364706 510.192941c6.866824 1.325176 13.974588 1.807059 21.082353 1.807059 69.812706 0 126.494118-57.283765 126.494118-128C1264.941176 313.404235 1208.259765 256 1138.447059 256zM725.353412 836.547765l0 39.574588L507.843765 876.122353l0-38.671059 103.905882-102.038588c28.611765-28.190118 47.826824-50.537412 57.464471-66.921412 9.697882-16.444235 14.576941-33.490824 14.576941-51.019294 0-19.998118-5.722353-35.358118-17.106824-46.019765-11.384471-10.661647-27.888941-16.022588-49.392941-16.022588-31.864471 0-62.283294 13.372235-91.196235 39.996235L526.095059 550.189176c28.190118-21.383529 60.958118-32.045176 98.364235-32.045176 32.165647 0 57.584941 8.613647 76.197647 25.660235 18.612706 17.106824 27.949176 40.176941 27.949176 69.089882 0 21.805176-5.963294 43.248941-17.889882 64.210824-11.926588 20.961882-34.514824 47.706353-67.764706 80.112941l-81.498353 78.426353 0 0.903529L725.353412 836.547765z"  ></path></symbol><symbol id="icon-level3" viewBox="0 0 1265 1024"><path d="M1138.447059 256c-69.812706 0-126.494118 57.404235-126.494118 128 0 16.865882 3.252706 32.888471 9.035294 47.585882L822.211765 512l-133.180235-269.613176C730.473412 221.605647 758.964706 178.115765 758.964706 128 758.964706 57.404235 702.283294 0 632.470588 0 562.657882 0 505.976471 57.404235 505.976471 128c0 50.115765 28.431059 93.605647 69.993412 114.386824L442.729412 512 243.892706 431.585882C249.735529 416.888471 252.988235 400.865882 252.988235 384c0-70.595765-56.681412-128-126.494118-128C56.681412 256 0 313.404235 0 384 0 454.776471 56.681412 512 126.494118 512c7.107765 0 14.215529-0.481882 21.082353-1.807059l67.403294 405.082353C221.364706 979.305412 278.226824 1024 335.149176 1024l588.318118 0c63.247059 0 113.724235-44.694588 126.494118-108.724706L1117.364706 510.192941c6.866824 1.325176 13.974588 1.807059 21.082353 1.807059 69.812706 0 126.494118-57.283765 126.494118-128C1264.941176 313.404235 1208.259765 256 1138.447059 256zM735.111529 852.931765c-23.130353 19.395765-53.970824 29.093647-92.461176 29.093647-33.912471 0-61.199059-6.204235-81.980235-18.612706l0-46.140235c24.455529 18.612706 52.103529 27.949176 82.883765 27.949176 24.636235 0 44.152471-5.963294 58.548706-17.829647 14.396235-11.866353 21.564235-27.828706 21.564235-47.826824 0-44.574118-32.406588-66.800941-97.219765-66.800941L596.690824 712.764235 596.690824 675.84l28.370824 0c57.464471 0 86.136471-20.901647 86.136471-62.765176 0-38.610824-21.925647-57.946353-65.837176-57.946353-25.118118 0-48.730353 8.372706-70.896941 24.997647L574.464 538.142118c23.371294-13.372235 50.718118-19.998118 81.980235-19.998118 30.479059 0 54.934588 7.830588 73.426824 23.552 18.492235 15.661176 27.708235 36.020706 27.708235 61.018353 0 46.08-23.853176 75.715765-71.559529 88.847059l0 0.903529c25.840941 2.710588 46.260706 11.685647 61.319529 26.925176 14.998588 15.239529 22.528 34.213647 22.528 56.922353C769.867294 807.996235 758.302118 833.536 735.111529 852.931765z"  ></path></symbol><symbol id="icon-bin" viewBox="0 0 1024 1024"><path d="M491.539504 323.458903c0-9.339716 2.694365-17.008372 8.090259-23.01211 5.390777-5.996574 12.283768-9.001001 20.669762-9.001001 7.79043 0 14.530948 3.004427 20.222577 9.001001 5.690606 6.003737 8.538467 13.672394 8.538467 23.01211l0 485.171981c0 6.003737-1.347694 11.337209-4.044106 16.007579-2.696412 4.665253-6.291287 8.499581-10.785647 11.502985-4.494361 2.99931-9.139148 4.498454-13.930267 4.498454-8.385994 0-15.280008-3.166109-20.669762-9.500375-5.39487-6.335289-8.090259-13.83817-8.090259-22.508643L491.540528 323.458903 491.539504 323.458903zM326.481238 323.458903c0-9.339716 2.797719-17.008372 8.391111-23.01211 5.594415-5.996574 12.215206-9.001001 19.871583-9.001001 7.653307 0 14.277168 3.004427 19.869536 9.001001 5.592368 6.003737 8.387018 13.672394 8.387018 23.01211l0 485.171981c0 8.670473-2.793626 16.173354-8.387018 22.508643-5.591345 6.334265-12.215206 9.500375-19.869536 9.500375-7.656377 0-14.278191-3.166109-19.871583-9.500375-5.593392-6.335289-8.391111-13.83817-8.391111-22.508643L326.481238 323.458903 326.481238 323.458903zM642.593825 323.458903c0-3.335978 0.449231-6.336312 1.347694-9.002025 0.899486-2.671852 1.949398-5.173836 3.145643-7.502881 1.202385-2.336208 2.696412-4.504594 4.494361-6.507204 1.797949-1.997494 3.746324-3.667529 5.842055-5.001921 2.095731-1.333368 4.341888-2.329045 6.740518-2.998287 2.39863-0.669242 4.792143-1.001817 7.189749-1.001817 8.385994 0 15.278985 3.004427 20.670785 9.001001 5.393847 6.003737 8.089235 13.672394 8.089235 23.01211l0 485.171981c0 6.003737-1.197268 11.337209-3.595898 16.007579-2.39863 4.665253-5.842055 8.499581-10.335393 11.502985-4.494361 2.99931-9.437953 4.498454-14.829753 4.498454-7.79043 0-14.525831-3.166109-20.222577-9.500375-5.690606-6.335289-8.538467-13.83817-8.538467-22.508643L642.591779 323.458903 642.593825 323.458903zM897.684618 158.400636 725.62182 158.400636 725.62182 118.386294c0-15.337313-6.16849-28.511357-18.507516-39.515992-12.33391-11.004635-27.509541-16.504906-45.514613-16.504906L365.493763 62.365396c-18.004049 0-33.175587 5.500271-45.514613 16.504906-12.33698 11.004635-18.507516 24.178679-18.507516 39.515992l0 40.014342L123.412262 158.400636c-8.671497 0-16.173354 3.165086-22.508643 9.499351-6.335289 6.336312-9.506515 12.006452-9.506515 21.0095 0 9.001001 3.170203 16.503882 9.506515 22.50762 6.334265 6.003737 13.837146 9.002025 22.508643 9.002025l68.02121 0 0 675.239851c0 17.339924 6.169513 32.17991 18.507516 44.517913 12.338003 12.339026 27.509541 18.507516 45.514613 18.507516l516.184299 0c11.336186 0 22.00927-2.832512 32.013111-8.503675 10.002818-5.671163 17.838274-13.33982 23.50432-23.00597 5.671163-9.671267 8.504698-20.178575 8.504698-31.515784L835.662029 220.419132l62.023612 0c8.670473 0 16.173354-2.998287 22.50762-9.002025 6.335289-6.003737 9.500375-13.506619 9.500375-22.50762 0-9.002025-3.165086-14.673188-9.500375-21.0095C913.857972 161.564699 906.355091 158.400636 897.684618 158.400636L897.684618 158.400636zM354.488105 104.382349l319.118038 0 0 54.018288-319.118038 0L354.488105 104.382349 354.488105 104.382349zM751.852228 907.626549c-290.542212 0.678452-448.093505 1.020236-472.656947 1.020236-11.230786 0-19.650549-3.062755-25.2685-9.178033-5.613858-6.116301-8.773827-12.230556-9.472745-18.35095L244.454036 252.03213c0-10.878768 2.628874-19.035542 7.893784-24.472368 5.265934-5.435803 10.700713-7.814989 16.315594-7.136537l484.242819 0c1.401929 0 4.38589 0.509606 8.942673 1.529843 4.568039 1.020236 8.601912 2.550079 12.108782 4.586458 3.51301 2.041496 6.667863 5.270027 9.476839 9.685593 2.807952 4.420683 4.209882 9.685593 4.209882 15.807011l0 622.970394c0 9.514701-2.983961 16.98893-8.947789 22.429849s-11.757788 8.494465-17.365506 9.178033L751.852228 907.626549 751.852228 907.626549zM751.852228 907.626549"  ></path></symbol><symbol id="icon-remove" viewBox="0 0 1024 1024"><path d="M637.44 412.16c-10.24-10.24-25.6-10.24-35.84 0L512 501.76l-89.6-89.6c-10.24-10.24-25.6-10.24-35.84 0-10.24 10.24-10.24 25.6 0 35.84l89.6 89.6-89.6 89.6c-10.24 10.24-10.24 25.6 0 35.84 10.24 10.24 25.6 10.24 35.84 0l89.6-89.6 89.6 89.6c10.24 10.24 25.6 10.24 35.84 0s10.24-25.6 0-35.84L547.84 537.6l89.6-89.6c10.24-10.24 10.24-28.16 0-35.84zM819.2 128H204.8C148.48 128 102.4 174.08 102.4 230.4v614.4c0 56.32 46.08 102.4 102.4 102.4h614.4c56.32 0 102.4-46.08 102.4-102.4V230.4c0-56.32-46.08-102.4-102.4-102.4z m51.2 716.8c0 28.16-23.04 51.2-51.2 51.2H204.8c-28.16 0-51.2-23.04-51.2-51.2V230.4c0-28.16 23.04-51.2 51.2-51.2h614.4c28.16 0 51.2 23.04 51.2 51.2v614.4z"  ></path></symbol><symbol id="icon-work" viewBox="0 0 1024 1024"><path d="M925.75851031 164.41379281C925.73002438 164.41379281 925.79310313 714.57855406 925.79310313 714.57855406 925.79310313 714.63418438 98.24148969 714.61592844 98.24148969 714.61592844 98.26997562 714.61592844 98.20689687 164.45116719 98.20689687 164.45116719 98.20689687 164.39555281 925.75851031 164.41379281 925.75851031 164.41379281ZM32 714.57855406C32 751.08755281 61.67459281 780.82282437 98.24148969 780.82282437L925.75851031 780.82282437C962.39888 780.82282437 992 751.17678313 992 714.57855406L992 164.45116719C992 127.94218438 962.32540719 98.20689687 925.75851031 98.20689687L98.24148969 98.20689687C61.60112 98.20689687 32 127.85293812 32 164.45116719L32 714.57855406ZM820.20452375 935.6956025C838.48704594 935.6956025 853.30797219 920.87467625 853.30797219 902.59215406L853.30797219 901.0511225C853.30797219 882.76860125 838.48704594 867.94767406 820.20452375 867.94767406L203.79547625 867.94767406C185.51295406 867.94767406 170.69202781 882.76860125 170.69202781 901.0511225L170.69202781 902.59215406C170.69202781 920.87467625 185.51295406 935.6956025 203.79547625 935.6956025 222.07801344 935.6956025 820.20452375 935.6956025 820.20452375 935.6956025ZM478.12603625 868.71819031L544.33293219 868.71819031 544.33293219 780.82282437 479.66706781 780.82282437 478.12603625 868.71819031Z"  ></path></symbol><symbol id="icon-theme" viewBox="0 0 1024 1024"><path d="M348.16 477.866667h-218.453333A129.76128 129.76128 0 0 1 0 348.16v-218.453333A129.76128 129.76128 0 0 1 129.706667 0h218.453333A129.815893 129.815893 0 0 1 477.866667 129.706667v218.453333A129.870507 129.870507 0 0 1 348.16 477.866667z m-218.453333-409.6A61.549227 61.549227 0 0 0 68.266667 129.706667v218.453333a61.549227 61.549227 0 0 0 61.44 61.549227h218.453333a61.549227 61.549227 0 0 0 61.549227-61.44v-218.453334A61.549227 61.549227 0 0 0 348.269227 68.266667zM894.293333 477.866667h-218.453333A129.815893 129.815893 0 0 1 546.133333 348.16v-218.453333A129.815893 129.815893 0 0 1 675.84 0h218.453333a129.815893 129.815893 0 0 1 129.706667 129.706667v218.453333a129.870507 129.870507 0 0 1-129.706667 129.706667z m-218.453333-409.6a61.549227 61.549227 0 0 0-61.44 61.44v218.453333A61.549227 61.549227 0 0 0 675.84 409.6h218.453333A61.549227 61.549227 0 0 0 955.733333 348.16v-218.453333a61.549227 61.549227 0 0 0-61.330773-61.44z m-327.68 955.733333h-218.453333A129.815893 129.815893 0 0 1 0 894.293333v-218.453333A129.815893 129.815893 0 0 1 129.706667 546.133333h218.453333a129.815893 129.815893 0 0 1 129.706667 129.706667v218.453333a129.870507 129.870507 0 0 1-129.706667 129.706667z m-218.453333-409.6a61.549227 61.549227 0 0 0-61.44 61.44v218.453333A61.549227 61.549227 0 0 0 129.706667 955.733333h218.453333A61.549227 61.549227 0 0 0 409.6 894.293333v-218.453333a61.549227 61.549227 0 0 0-61.330773-61.44z m764.586666 409.6h-218.453333A129.815893 129.815893 0 0 1 546.133333 894.293333v-218.453333A129.815893 129.815893 0 0 1 675.84 546.133333h218.453333a129.815893 129.815893 0 0 1 129.706667 129.706667v218.453333a129.870507 129.870507 0 0 1-129.706667 129.706667z m-218.453333-409.6a61.549227 61.549227 0 0 0-61.44 61.44v218.453333A61.549227 61.549227 0 0 0 675.84 955.733333h218.453333A61.549227 61.549227 0 0 0 955.733333 894.293333v-218.453333a61.549227 61.549227 0 0 0-61.330773-61.44z"  ></path><path d="M279.237973 150.951253H198.73792a47.84128 47.84128 0 0 0-47.786667 47.786667v80.500053a47.84128 47.84128 0 0 0 47.786667 47.786667h80.44544a47.895893 47.895893 0 0 0 47.84128-47.786667V198.73792a47.895893 47.895893 0 0 0-47.786667-47.786667z"  ></path></symbol><symbol id="icon-theme1" viewBox="0 0 1024 1024"><path d="M546.133333 348.16l0-218.453333A129.76128 129.76128 0 0 1 675.84 0l218.453333 0A129.76128 129.76128 0 0 1 1024 129.706667l0 218.453333A129.815893 129.815893 0 0 1 894.293333 477.866667l-218.453333 0A129.870507 129.870507 0 0 1 546.133333 348.16z m409.6-218.453333A61.549227 61.549227 0 0 0 894.293333 68.266667l-218.453333 0a61.549227 61.549227 0 0 0-61.549227 61.44l0 218.453333a61.549227 61.549227 0 0 0 61.44 61.549227l218.453334 0A61.549227 61.549227 0 0 0 955.733333 348.269227zM546.133333 894.293333l0-218.453333A129.815893 129.815893 0 0 1 675.84 546.133333l218.453333 0A129.815893 129.815893 0 0 1 1024 675.84l0 218.453333a129.815893 129.815893 0 0 1-129.706667 129.706667l-218.453333 0a129.870507 129.870507 0 0 1-129.706667-129.706667z m409.6-218.453333a61.549227 61.549227 0 0 0-61.44-61.44l-218.453333 0A61.549227 61.549227 0 0 0 614.4 675.84l0 218.453333A61.549227 61.549227 0 0 0 675.84 955.733333l218.453333 0a61.549227 61.549227 0 0 0 61.44-61.330773z m-955.733333-327.68l0-218.453333A129.815893 129.815893 0 0 1 129.706667 0l218.453333 0A129.815893 129.815893 0 0 1 477.866667 129.706667l0 218.453333a129.815893 129.815893 0 0 1-129.706667 129.706667l-218.453333 0a129.870507 129.870507 0 0 1-129.706667-129.706667z m409.6-218.453333a61.549227 61.549227 0 0 0-61.44-61.44l-218.453333 0A61.549227 61.549227 0 0 0 68.266667 129.706667l0 218.453333A61.549227 61.549227 0 0 0 129.706667 409.6l218.453333 0a61.549227 61.549227 0 0 0 61.44-61.330773z m-409.6 764.586666l0-218.453333A129.815893 129.815893 0 0 1 129.706667 546.133333l218.453333 0A129.815893 129.815893 0 0 1 477.866667 675.84l0 218.453333a129.815893 129.815893 0 0 1-129.706667 129.706667l-218.453333 0a129.870507 129.870507 0 0 1-129.706667-129.706667z m409.6-218.453333a61.549227 61.549227 0 0 0-61.44-61.44l-218.453333 0A61.549227 61.549227 0 0 0 68.266667 675.84l0 218.453333A61.549227 61.549227 0 0 0 129.706667 955.733333l218.453333 0a61.549227 61.549227 0 0 0 61.44-61.330773z"  ></path><path d="M873.048747 279.237973L873.048747 198.73792a47.84128 47.84128 0 0 0-47.786667-47.786667l-80.500053 0a47.84128 47.84128 0 0 0-47.786667 47.786667l0 80.44544a47.895893 47.895893 0 0 0 47.786667 47.84128L825.26208 327.02464a47.895893 47.895893 0 0 0 47.786667-47.786667z"  ></path></symbol><symbol id="icon-theme3" viewBox="0 0 1024 1024"><path d="M477.866667 675.84l0 218.453333A129.76128 129.76128 0 0 1 348.16 1024l-218.453333 0A129.76128 129.76128 0 0 1 0 894.293333l0-218.453333A129.815893 129.815893 0 0 1 129.706667 546.133333l218.453333 0A129.870507 129.870507 0 0 1 477.866667 675.84z m-409.6 218.453333A61.549227 61.549227 0 0 0 129.706667 955.733333l218.453333 0a61.549227 61.549227 0 0 0 61.549227-61.44l0-218.453333a61.549227 61.549227 0 0 0-61.44-61.549227l-218.453334 0A61.549227 61.549227 0 0 0 68.266667 675.730773zM477.866667 129.706667l0 218.453333A129.815893 129.815893 0 0 1 348.16 477.866667l-218.453333 0A129.815893 129.815893 0 0 1 0 348.16l0-218.453333a129.815893 129.815893 0 0 1 129.706667-129.706667l218.453333 0a129.870507 129.870507 0 0 1 129.706667 129.706667z m-409.6 218.453333a61.549227 61.549227 0 0 0 61.44 61.44l218.453333 0A61.549227 61.549227 0 0 0 409.6 348.16l0-218.453333A61.549227 61.549227 0 0 0 348.16 68.266667l-218.453333 0a61.549227 61.549227 0 0 0-61.44 61.330773z m955.733333 327.68l0 218.453333A129.815893 129.815893 0 0 1 894.293333 1024l-218.453333 0A129.815893 129.815893 0 0 1 546.133333 894.293333l0-218.453333a129.815893 129.815893 0 0 1 129.706667-129.706667l218.453333 0a129.870507 129.870507 0 0 1 129.706667 129.706667z m-409.6 218.453333a61.549227 61.549227 0 0 0 61.44 61.44l218.453333 0A61.549227 61.549227 0 0 0 955.733333 894.293333l0-218.453333A61.549227 61.549227 0 0 0 894.293333 614.4l-218.453333 0a61.549227 61.549227 0 0 0-61.44 61.330773z m409.6-764.586666l0 218.453333A129.815893 129.815893 0 0 1 894.293333 477.866667l-218.453333 0A129.815893 129.815893 0 0 1 546.133333 348.16l0-218.453333a129.815893 129.815893 0 0 1 129.706667-129.706667l218.453333 0a129.870507 129.870507 0 0 1 129.706667 129.706667z m-409.6 218.453333a61.549227 61.549227 0 0 0 61.44 61.44l218.453333 0A61.549227 61.549227 0 0 0 955.733333 348.16l0-218.453333A61.549227 61.549227 0 0 0 894.293333 68.266667l-218.453333 0a61.549227 61.549227 0 0 0-61.44 61.330773z"  ></path><path d="M150.951253 744.762027L150.951253 825.26208a47.84128 47.84128 0 0 0 47.786667 47.786667l80.500053 0a47.84128 47.84128 0 0 0 47.786667-47.786667l0-80.44544a47.895893 47.895893 0 0 0-47.786667-47.84128L198.73792 696.97536a47.895893 47.895893 0 0 0-47.786667 47.786667z"  ></path></symbol><symbol id="icon-theme2" viewBox="0 0 1024 1024"><path d="M675.84 546.133333l218.453333 0A129.76128 129.76128 0 0 1 1024 675.84l0 218.453333A129.76128 129.76128 0 0 1 894.293333 1024l-218.453333 0A129.815893 129.815893 0 0 1 546.133333 894.293333l0-218.453333A129.870507 129.870507 0 0 1 675.84 546.133333z m218.453333 409.6A61.549227 61.549227 0 0 0 955.733333 894.293333l0-218.453333a61.549227 61.549227 0 0 0-61.44-61.549227l-218.453333 0a61.549227 61.549227 0 0 0-61.549227 61.44l0 218.453334A61.549227 61.549227 0 0 0 675.730773 955.733333zM129.706667 546.133333l218.453333 0A129.815893 129.815893 0 0 1 477.866667 675.84l0 218.453333A129.815893 129.815893 0 0 1 348.16 1024l-218.453333 0a129.815893 129.815893 0 0 1-129.706667-129.706667l0-218.453333a129.870507 129.870507 0 0 1 129.706667-129.706667z m218.453333 409.6a61.549227 61.549227 0 0 0 61.44-61.44l0-218.453333A61.549227 61.549227 0 0 0 348.16 614.4l-218.453333 0A61.549227 61.549227 0 0 0 68.266667 675.84l0 218.453333a61.549227 61.549227 0 0 0 61.330773 61.44z m327.68-955.733333l218.453333 0A129.815893 129.815893 0 0 1 1024 129.706667l0 218.453333A129.815893 129.815893 0 0 1 894.293333 477.866667l-218.453333 0a129.815893 129.815893 0 0 1-129.706667-129.706667l0-218.453333a129.870507 129.870507 0 0 1 129.706667-129.706667z m218.453333 409.6a61.549227 61.549227 0 0 0 61.44-61.44l0-218.453333A61.549227 61.549227 0 0 0 894.293333 68.266667l-218.453333 0A61.549227 61.549227 0 0 0 614.4 129.706667l0 218.453333a61.549227 61.549227 0 0 0 61.330773 61.44z m-764.586666-409.6l218.453333 0A129.815893 129.815893 0 0 1 477.866667 129.706667l0 218.453333A129.815893 129.815893 0 0 1 348.16 477.866667l-218.453333 0a129.815893 129.815893 0 0 1-129.706667-129.706667l0-218.453333a129.870507 129.870507 0 0 1 129.706667-129.706667z m218.453333 409.6a61.549227 61.549227 0 0 0 61.44-61.44l0-218.453333A61.549227 61.549227 0 0 0 348.16 68.266667l-218.453333 0A61.549227 61.549227 0 0 0 68.266667 129.706667l0 218.453333a61.549227 61.549227 0 0 0 61.330773 61.44z"  ></path><path d="M744.762027 873.048747L825.26208 873.048747a47.84128 47.84128 0 0 0 47.786667-47.786667l0-80.500053a47.84128 47.84128 0 0 0-47.786667-47.786667l-80.44544 0a47.895893 47.895893 0 0 0-47.84128 47.786667L696.97536 825.26208a47.895893 47.895893 0 0 0 47.786667 47.786667z"  ></path></symbol><symbol id="icon-eglass-finish" viewBox="0 0 1502 1024"><path d="M1148.73166697 128.15080524c-100.58044556-100.5833273-234.311157-155.97497646-376.55169023-155.97497648s-275.9712447 55.39309002-376.55169024 155.97497646C295.04784095 228.73125078 239.65619183 362.45908044 239.65619183 504.70105462c0 103.62934208 29.79734425 204.09451745 86.17167175 290.53707409 11.17544497 17.13635468 34.12718077 21.96617567 51.26497627 10.79505337 17.1349138-11.17544497 21.96905743-34.12718077 10.79217159-51.26353541-48.50281438-74.3766495-74.14034561-160.84802375-74.14034558-250.06859205 0-252.78032329 205.65498765-458.4367518 458.43819264-458.4367518S1230.6196103 251.91929044 1230.6196103 504.70105462 1024.96318177 963.13780639 772.17997674 963.13780639c-83.70488967 0-165.59715562-22.76153997-236.81972451-65.81927873-17.50666018-10.58756698-40.28260893-4.97534959-50.86729414 12.53275145-10.58468524 17.50954192-4.97390871 40.28260893 12.53563321 50.86585328 82.7856099 50.05175758 177.93250684 76.51058891 275.14994458 76.51058892 142.24341503 0 275.97268558-55.39309002 376.5531311-155.97497646 100.58044556-100.57900468 155.97209469-234.30971612 155.97209473-376.55024937-0.00144089-142.24197414-55.39164914-275.9712447-155.97209473-376.55169026zM-430.56503999 744.64171954c12.00683121 0 24.01654419-4.58343094 33.17764256-13.74452936l353.41264042-353.41119951c18.32219678-18.32219678 18.32219678-48.03164748-1e-8-66.35528514-18.32507853-18.32507853-48.03452925-18.32507853-66.35960778 0l-320.23067519 320.2321161-143.52867765-143.52579589c-18.32219678-18.32796028-48.03308835-18.32796028-66.35672599 0-18.32507853 18.32363764-18.32507853 48.03164748 0 66.35384424l176.70487932 176.7063202c9.16253927 9.16109838 21.17225222 13.74308846 33.18052432 13.74308847z"  ></path></symbol><symbol id="icon-eglass-finish1" viewBox="0 0 1024 1024"><path d="M772.588 249.362c-69.805-69.807-162.617-108.25-261.335-108.25s-191.53 38.444-261.335 108.25C180.113 319.167 141.67 411.977 141.67 510.696c0 71.921 20.68 141.646 59.805 201.639 7.756 11.893 23.685 15.245 35.579 7.492 11.892-7.756 15.247-23.685 7.49-35.578-33.662-51.619-51.455-111.632-51.455-173.553 0-175.435 142.729-318.165 318.166-318.165S829.42 335.26 829.42 510.696 686.69 828.861 511.253 828.861c-58.093 0-114.928-15.797-164.358-45.68-12.15-7.348-27.957-3.453-35.303 8.698-7.346 12.152-3.452 27.957 8.7 35.302 57.455 34.737 123.489 53.1 190.96 53.1 98.72 0 191.531-38.444 261.336-108.25 69.805-69.804 108.248-162.616 108.248-261.334-0.001-98.719-38.443-191.53-108.248-261.335z"  ></path><path d="M451.157 677.22c8.333 0 16.668-3.181 23.026-9.539L719.46 422.406c12.716-12.716 12.716-33.335 0-46.052-12.718-12.718-33.337-12.718-46.054 0L451.157 598.602l-99.611-99.61c-12.716-12.72-33.337-12.72-46.054 0-12.718 12.717-12.718 33.335 0 46.051L428.13 667.681c6.36 6.358 14.694 9.538 23.028 9.538z"  ></path></symbol><symbol id="icon-delete" viewBox="0 0 1024 1024"><path d="M512 560.239l265.817 265.817c13.325 13.324 34.913 13.322 48.237-0.002s13.326-34.912 0.002-48.237L560.24 512l265.817-265.817c13.324-13.325 13.322-34.913-0.002-48.237s-34.912-13.326-48.237-0.002L512 463.76 246.183 197.944c-13.325-13.324-34.912-13.323-48.236 0-6.663 6.664-9.995 15.392-9.995 24.12s3.33 17.456 9.992 24.118L463.76 512 197.944 777.817c-6.663 6.663-9.992 15.39-9.992 24.119s3.333 17.456 9.995 24.118c13.324 13.324 34.911 13.326 48.236 0.002L512 560.24z"  ></path></symbol><symbol id="icon-ADD" viewBox="0 0 1024 1024"><path d="M876.089 439.182H584.818V147.911c0-40.268-32.549-72.818-72.818-72.818s-72.818 32.549-72.818 72.818v291.271H147.911c-40.268 0-72.818 32.549-72.818 72.818s32.549 72.818 72.818 72.818h291.271v291.271c0 40.268 32.549 72.818 72.818 72.818s72.818-32.549 72.818-72.818V584.818h291.271c40.268 0 72.818-32.549 72.818-72.818s-32.549-72.818-72.818-72.818z"  ></path></symbol><symbol id="icon-leibieguanli" viewBox="0 0 1025 1024"><path d="M390.4 512H185.6C118.5 512 64 457.5 64 390.4V185.6C64 118.5 118.5 64 185.6 64h204.9c67 0 121.6 54.5 121.6 121.6v204.9c-0.1 67-54.6 121.5-121.7 121.5zM185.6 128c-31.7 0-57.6 25.8-57.6 57.6v204.9c0 31.7 25.8 57.6 57.6 57.6h204.9c31.7 0 57.6-25.8 57.6-57.6V185.6c0-31.7-25.8-57.6-57.6-57.6H185.6z"  ></path><path d="M902.4 512H697.6c-67 0-121.6-54.5-121.6-121.6V185.6c0-67 54.5-121.6 121.6-121.6h204.9c67 0 121.6 54.5 121.6 121.6v204.9c-0.1 67-54.6 121.5-121.7 121.5zM697.6 128c-31.7 0-57.6 25.8-57.6 57.6v204.9c0 31.7 25.8 57.6 57.6 57.6h204.9c31.7 0 57.6-25.8 57.6-57.6V185.6c0-31.7-25.8-57.6-57.6-57.6H697.6zM390.4 1024H185.6c-67 0-121.6-54.5-121.6-121.6V697.6c0-67 54.5-121.6 121.6-121.6h204.9c67 0 121.6 54.5 121.6 121.6v204.9c-0.1 67-54.6 121.5-121.7 121.5zM185.6 640c-31.7 0-57.6 25.8-57.6 57.6v204.9c0 31.7 25.8 57.6 57.6 57.6h204.9c31.7 0 57.6-25.8 57.6-57.6V697.6c0-31.7-25.8-57.6-57.6-57.6H185.6zM902.4 1024H697.6c-67 0-121.6-54.5-121.6-121.6V697.6c0-67 54.5-121.6 121.6-121.6h204.9c67 0 121.6 54.5 121.6 121.6v204.9c-0.1 67-54.6 121.5-121.7 121.5zM697.6 640c-31.7 0-57.6 25.8-57.6 57.6v204.9c0 31.7 25.8 57.6 57.6 57.6h204.9c31.7 0 57.6-25.8 57.6-57.6V697.6c0-31.7-25.8-57.6-57.6-57.6H697.6z"  ></path></symbol><symbol id="icon-circle" viewBox="0 0 1024 1024"><path d="M896 512q0 104.5-51.5 192.75T704.75 844.5 512 896t-192.75-51.5T179.5 704.75 128 512t51.5-192.75T319.25 179.5 512 128t192.75 51.5T844.5 319.25 896 512z"  ></path></symbol><symbol id="icon-search" viewBox="0 0 1024 1024"><path d="M348.943 207.721c-17.98 7.68-34.153 16.535-49.784 26.895-15.3 10.632-30.028 22.74-42.978 36.051-13.854 13.583-25.63 28.341-35.93 43.731-10.602 15.36-19.728 32.497-26.805 49.634-5.602 13.01 0.602 27.196 13.251 32.497 12.379 5.33 27.076-0.602 32.407-13.01 5.903-14.186 13.553-28.372 22.377-41.383 8.825-12.98 18.553-25.389 29.455-36.02 11.174-11.234 23.251-21.293 36.232-30.148 13.252-8.855 26.805-16.264 40.93-22.468 12.98-5.33 18.854-19.516 13.553-32.497-5.331-12.408-20.059-18.612-32.708-13.282z m640.542 739.96l-179.35-179.38c29.153-35.177 52.705-73.878 70.385-116.435 22.377-53.79 34.153-112.308 34.153-173.778 0-60.296-11.776-118.212-33.581-171.099l-0.603-2.078c-22.407-54.663-55.356-103.725-96.015-145.408l-2.319-2.018c-41.23-41.683-91.286-75.354-146.673-98.394-53.278-22.197-111.917-34.304-172.875-34.304-124.567 0-237.658 50.838-319.548 132.698-41.502 41.653-75.355 91.89-98.033 147.456-22.106 53.49-34.184 111.707-34.184 173.177 0 60.867 12.078 118.814 33.28 171.4l0.874 2.378c22.678 54.965 56.53 105.201 98.063 146.854 41.833 41.954 91.889 75.656 146.673 98.425h0.602c53.007 22.467 111.315 34.575 172.273 34.575 61.53 0 119.567-12.108 172.875-34.575 42.406-17.137 81.59-41.382 116.044-70.325l179.651 180.284c15.903 15.962 42.406 15.962 58.308-0.602 16.203-16.294 15.902-42.587 0-58.85z m-265.637-207.75v0.3l-0.603 0.603c-33.852 33.702-74.21 61.169-119.266 79.48-43.309 18.312-90.985 28.371-141.372 28.371-50.086 0-97.792-10.06-141.071-28.37-45.357-18.312-85.715-46.11-119.567-80.083l-0.301-0.302h0.3c-34.183-33.972-61.86-75.053-80.714-120.29l-0.603-2.078c-17.317-42.526-27.045-89.81-27.045-139.444 0-50.237 9.728-98.124 27.678-141.553 18.853-44.635 46.532-85.986 80.715-120.29C268.56 149.474 361.02 107.82 462.637 107.82c50.357 0 98.063 10.06 141.372 28.07 45.056 18.311 85.715 46.11 119.839 80.384l2.379 1.777c32.677 33.972 59.482 73.878 77.764 118.513l1.174 2.078c16.806 42.556 27.076 90.142 27.076 139.475 0 50.537-10.3 98.394-28.25 141.553-18.282 45.206-45.96 86.287-80.143 120.26z m6.475-286.66c-13.553 0-24.727 11.233-24.727 24.817 0 31.924-5.903 63.819-18.251 93.394l-0.602 1.175c-12.078 27.768-28.853 54.663-52.435 77.432-22.98 23.643-50.056 41.382-78.607 53.188-29.455 12.409-60.958 18.312-93.064 18.312-13.824 0-24.455 11.234-24.455 25.118s10.601 25.118 24.455 25.118c38.58 0 76.288-7.68 112.219-22.468 34.755-14.185 67.132-35.478 94.84-63.85 27.678-27.768 48.58-59.692 63.036-93.966v-0.904c15.3-36.05 22.98-74.752 22.98-112.58-0.06-13.553-11.535-24.786-25.39-24.786z"  ></path></symbol></svg>';if((t=document.getElementsByTagName("script"))[t.length-1].getAttribute("data-injectcss")&&!e.__iconfont__svg__cssinject__){e.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(t){console&&console.log(t)}}!function(t){if(document.addEventListener)if(~["complete","loaded","interactive"].indexOf(document.readyState))setTimeout(t,0);else{var n=function(){document.removeEventListener("DOMContentLoaded",n,!1),t()};document.addEventListener("DOMContentLoaded",n,!1)}else document.attachEvent&&(i=t,o=e.document,s=!1,(a=function(){try{o.documentElement.doScroll("left")}catch(e){return void setTimeout(a,50)}r()})(),o.onreadystatechange=function(){"complete"==o.readyState&&(o.onreadystatechange=null,r())});function r(){s||(s=!0,i())}var i,o,s,a}((function(){var e,t,r,i,o,s;(e=document.createElement("div")).innerHTML=n,n=null,(t=e.getElementsByTagName("svg")[0])&&(t.setAttribute("aria-hidden","true"),t.style.position="absolute",t.style.width=0,t.style.height=0,t.style.overflow="hidden",r=t,(i=document.body).firstChild?(o=r,(s=i.firstChild).parentNode.insertBefore(o,s)):i.appendChild(r))}))}(window)},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(9),i=n(17);function o(e,t,n){Error.call(this,n),this.status=e,this.name=t,this.message=n,this.error=!0}n.n(i)()(o,Error),o.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};new o(401,"unauthorized","Name or password is incorrect."),new o(400,"bad_request","Missing JSON list of 'docs'"),new o(404,"not_found","missing"),new o(409,"conflict","Document update conflict"),new o(400,"bad_request","_id field must contain a string"),new o(412,"missing_id","_id is required for puts"),new o(400,"bad_request","Only reserved document ids may start with underscore."),new o(412,"precondition_failed","Database not open");var s=new o(500,"unknown_error","Database encountered an unknown error");new o(500,"badarg","Some query argument is invalid"),new o(400,"invalid_request","Request was invalid"),new o(400,"query_parse_error","Some query parameter is invalid"),new o(500,"doc_validation","Bad special document member"),new o(400,"bad_request","Something wrong with the request"),new o(400,"bad_request","Document must be a JSON object"),new o(404,"not_found","Database not found"),new o(500,"indexed_db_went_bad","unknown"),new o(500,"web_sql_went_bad","unknown"),new o(500,"levelDB_went_went_bad","unknown"),new o(403,"forbidden","Forbidden by design doc validate_doc_update function"),new o(400,"bad_request","Invalid rev format"),new o(412,"file_exists","The database could not be created, the file already exists."),new o(412,"missing_stub","A pre-existing attachment stub wasn't found"),new o(413,"invalid_url","Provided URL is invalid");function a(e){if("object"!=typeof e){var t=e;(e=s).data=t}return"error"in e&&"conflict"===e.error&&(e.name="conflict",e.status=409),"name"in e||(e.name=e.error||"unknown"),"status"in e||(e.status=500),"message"in e||(e.message=e.message||e.reason),e}"undefined"!=typeof AbortController&&AbortController,fetch;var c,u,l=Headers;function f(e){return"$"+e}function d(e){return e.substring(1)}function h(){this._store={}}function p(e){if(this._store=new h,e&&Array.isArray(e))for(var t=0,n=e.length;t<n;t++)this.add(e[t])}h.prototype.get=function(e){var t=f(e);return this._store[t]},h.prototype.set=function(e,t){var n=f(e);return this._store[n]=t,!0},h.prototype.has=function(e){return f(e)in this._store},h.prototype.delete=function(e){var t=f(e),n=t in this._store;return delete this._store[t],n},h.prototype.forEach=function(e){for(var t=Object.keys(this._store),n=0,r=t.length;n<r;n++){var i=t[n];e(this._store[i],i=d(i))}},Object.defineProperty(h.prototype,"size",{get:function(){return Object.keys(this._store).length}}),p.prototype.add=function(e){return this._store.set(e,!0)},p.prototype.has=function(e){return this._store.has(e)},p.prototype.forEach=function(e){this._store.forEach((function(t,n){e(n)}))},Object.defineProperty(p.prototype,"size",{get:function(){return this._store.size}}),!function(){if("undefined"==typeof Symbol||"undefined"==typeof Map||"undefined"==typeof Set)return!1;var e=Object.getOwnPropertyDescriptor(Map,Symbol.species);return e&&"get"in e&&Map[Symbol.species]===Map}()?(c=p,u=h):(c=Set,u=Map);var v=n(6);function y(e,t){if(e===t)return 0;e=g(e),t=g(t);var n=k(e),r=k(t);if(n-r!=0)return n-r;switch(typeof e){case"number":return e-t;case"boolean":return e<t?-1:1;case"string":return function(e,t){return e===t?0:e>t?1:-1}(e,t)}return Array.isArray(e)?function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=y(e[r],t[r]);if(0!==i)return i}return e.length===t.length?0:e.length>t.length?1:-1}(e,t):function(e,t){for(var n=Object.keys(e),r=Object.keys(t),i=Math.min(n.length,r.length),o=0;o<i;o++){var s=y(n[o],r[o]);if(0!==s)return s;if(0!==(s=y(e[n[o]],t[r[o]])))return s}return n.length===r.length?0:n.length>r.length?1:-1}(e,t)}function g(e){switch(typeof e){case"undefined":return null;case"number":return e===1/0||e===-1/0||isNaN(e)?null:e;case"object":var t=e;if(Array.isArray(e)){var n=e.length;e=new Array(n);for(var r=0;r<n;r++)e[r]=g(t[r])}else{if(e instanceof Date)return e.toJSON();if(null!==e)for(var i in e={},t)if(t.hasOwnProperty(i)){var o=t[i];void 0!==o&&(e[i]=g(o))}}}return e}function m(e){if(null!==e)switch(typeof e){case"boolean":return e?1:0;case"number":return function(e){if(0===e)return"1";var t=e.toExponential().split(/e\+?/),n=parseInt(t[1],10),r=e<0,i=r?"0":"2",o=(s=((r?-n:n)- -324).toString(),a="0",c=3,function(e,t,n){for(var r="",i=n-e.length;r.length<i;)r+=t;return r}(s,a,c)+s);var s,a,c;i+=""+o;var u=Math.abs(parseFloat(t[0]));r&&(u=10-u);var l=u.toFixed(20);return l=l.replace(/\.?0+$/,""),i+=""+l}(e);case"string":return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var t=Array.isArray(e),n=t?e:Object.keys(e),r=-1,i=n.length,o="";if(t)for(;++r<i;)o+=_(n[r]);else for(;++r<i;){var s=n[r];o+=_(s)+_(e[s])}return o}return""}function _(e){return k(e=g(e))+""+m(e)+"\0"}function b(e,t){var n,r=t;if("1"===e[t])n=0,t++;else{var i="0"===e[t];t++;var o="",s=e.substring(t,t+3),a=parseInt(s,10)+-324;for(i&&(a=-a),t+=3;;){var c=e[t];if("\0"===c)break;o+=c,t++}n=1===(o=o.split(".")).length?parseInt(o,10):parseFloat(o[0]+"."+o[1]),i&&(n-=10),0!==a&&(n=parseFloat(n+"e"+a))}return{num:n,length:t-r}}function w(e,t){var n=e.pop();if(t.length){var r=t[t.length-1];n===r.element&&(t.pop(),r=t[t.length-1]);var i=r.element,o=r.index;if(Array.isArray(i))i.push(n);else if(o===e.length-2){i[e.pop()]=n}else e.push(n)}}function k(e){var t=["boolean","number","string","object"].indexOf(typeof e);return~t?null===e?1:Array.isArray(e)?5:t<3?t+2:t+3:Array.isArray(e)?5:void 0}var A=n(2),x=n.n(A),q=n(18),O=n.n(q),j=n(1),S=n.n(j),E=n(0),L=n(12),C=n.n(L),$=n(5);function T(e){if(e instanceof ArrayBuffer)return function(e){if("function"==typeof e.slice)return e.slice(0);var t=new ArrayBuffer(e.byteLength),n=new Uint8Array(t),r=new Uint8Array(e);return n.set(r),t}(e);var t=e.size,n=e.type;return"function"==typeof e.slice?e.slice(0,t,n):e.webkitSlice(0,t,n)}var M=Function.prototype.toString,P=M.call(Object);function D(e){var t,n,r;if(!e||"object"!=typeof e)return e;if(Array.isArray(e)){for(t=[],n=0,r=e.length;n<r;n++)t[n]=D(e[n]);return t}if(e instanceof Date)return e.toISOString();if(function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer||"undefined"!=typeof Blob&&e instanceof Blob}(e))return T(e);if(!function(e){var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&M.call(n)==P}(e))return e;for(n in t={},e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=D(e[n]);void 0!==i&&(t[n]=i)}return t}function B(e){return x()((function(t){t=D(t);var n=this,r="function"==typeof t[t.length-1]&&t.pop(),i=new Promise((function(r,i){var o,s,a;try{var c=(s=function(e,t){e?i(e):r(t)},a=!1,x()((function(e){if(a)throw new Error("once called more than once");a=!0,s.apply(this,e)})));t.push(c),(o=e.apply(n,t))&&"function"==typeof o.then&&r(o)}catch(e){i(e)}}));return r&&i.then((function(e){r(null,e)}),r),i}))}function z(e,t){for(var n={},r=0,i=t.length;r<i;r++){var o=t[r];o in e&&(n[o]=e[o])}return n}var I;try{localStorage.setItem("_pouch_check_localstorage",1),I=!!localStorage.getItem("_pouch_check_localstorage")}catch(e){I=!1}function N(){return I}function R(){var e;E.EventEmitter.call(this),this._listeners={},e=this,N()&&addEventListener("storage",(function(t){e.emit(t.key)}))}function H(e){if("undefined"!=typeof console&&"function"==typeof console[e]){var t=Array.prototype.slice.call(arguments,1);console[e].apply(console,t)}}O()(R,E.EventEmitter),R.prototype.addListener=function(e,t,n,r){if(!this._listeners[t]){var i=this,o=!1;this._listeners[t]=s,this.on(e,s)}function s(){if(i._listeners[t])if(o)o="waiting";else{o=!0;var e=z(r,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary","return_docs"]);n.changes(e).on("change",(function(e){e.seq>r.since&&!r.cancelled&&(r.since=e.seq,r.onChange(e))})).on("complete",(function(){"waiting"===o&&S()(s),o=!1})).on("error",(function(){o=!1}))}}},R.prototype.removeListener=function(e,t){t in this._listeners&&(E.EventEmitter.prototype.removeListener.call(this,e,this._listeners[t]),delete this._listeners[t])},R.prototype.notifyLocalWindows=function(e){N()&&(localStorage[e]="a"===localStorage[e]?"b":"a")},R.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)};var U="function"==typeof Object.assign?Object.assign:function(e){for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t};function F(e){for(var t=[],n=0,r=e.length;n<r;n++)t=t.concat(e[n]);return t}function V(e){return"boolean"==typeof e._remote?e._remote:"function"==typeof e.type&&(H("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===e.type())}function J(e,t,n){return new Promise((function(r,i){e.get(t,(function(o,s){if(o){if(404!==o.status)return i(o);s={}}var a=s._rev,c=n(s);if(!c)return r({updated:!1,rev:a});c._id=t,c._rev=a,r(function(e,t,n){return e.put(t).then((function(e){return{updated:!0,rev:e.rev}}),(function(r){if(409!==r.status)throw r;return J(e,t._id,n)}))}(e,c,n))}))}))}C.a.v4;var K=n(7),W=n.n(K);function G(e){this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,G)}catch(e){}}function Q(e){this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,Q)}catch(e){}}function X(e){this.status=500,this.name="invalid_value",this.message=e,this.error=!0;try{Error.captureStackTrace(this,X)}catch(e){}}function Y(e,t){return t&&e.then((function(e){S()((function(){t(null,e)}))}),(function(e){S()((function(){t(e)}))})),e}function Z(e,t){return function(){var n=arguments,r=this;return e.add((function(){return t.apply(r,n)}))}}function ee(e){var t=new c(e),n=new Array(t.size),r=-1;return t.forEach((function(e){n[++r]=e})),n}function te(e){var t=new Array(e.size),n=-1;return e.forEach((function(e,r){t[++n]=r})),t}function ne(){this.promise=new Promise((function(e){e()}))}function re(e){if(!e)return"undefined";switch(typeof e){case"function":case"string":return e.toString();default:return JSON.stringify(e)}}function ie(e,t,n,r,i,o){var s,a=function(e,t){return re(e)+re(t)+"undefined"}(n,r);if(!i&&(s=e._cachedViews=e._cachedViews||{})[a])return s[a];var c=e.info().then((function(c){var u=c.db_name+"-mrview-"+(i?"temp":Object($.a)(a));return J(e,"_local/"+o,(function(e){e.views=e.views||{};var n=t;-1===n.indexOf("/")&&(n=t+"/"+t);var r=e.views[n]=e.views[n]||{};if(!r[u])return r[u]=!0,e})).then((function(){return e.registerDependentDatabase(u).then((function(t){var i=t.db;i.auto_compaction=!0;var o={name:u,db:i,sourceDB:e,adapter:e.adapter,mapFun:n,reduceFun:r};return o.db.get("_local/lastSeq").catch((function(e){if(404!==e.status)throw e})).then((function(e){return o.seq=e?e.seq:0,s&&o.db.once("destroyed",(function(){delete s[a]})),o}))}))}))}));return s&&(s[a]=c),c}W()(G,Error),W()(Q,Error),W()(X,Error),ne.prototype.add=function(e){return this.promise=this.promise.catch((function(){})).then((function(){return e()})),this.promise},ne.prototype.finish=function(){return this.promise};var oe={},se=new ne;function ae(e){return-1===e.indexOf("/")?[e,e]:e.split("/")}function ce(e,t){try{e.emit("error",t)}catch(e){H("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),H("error",t)}}var ue=function(e,t,n,r){function i(e,t,n){try{t(n)}catch(t){ce(e,t)}}function o(e,t,n,r,i){try{return{output:t(n,r,i)}}catch(t){return ce(e,t),{error:t}}}function s(e,t){var n=y(e.key,t.key);return 0!==n?n:y(e.value,t.value)}function f(e,t,n){return n=n||0,"number"==typeof t?e.slice(n,t+n):n>0?e.slice(n):e}function d(e){var t=e.value;return t&&"object"==typeof t&&t._id||e.id}function h(e){return function(t){return e.include_docs&&e.attachments&&e.binary&&function(e){e.rows.forEach((function(e){var t=e.doc&&e.doc._attachments;t&&Object.keys(t).forEach((function(e){var n=t[e];t[e].data=Object(v.a)(n.data,n.content_type)}))}))}(t),t}}function p(e,t,n,r){var i=t[e];void 0!==i&&(r&&(i=encodeURIComponent(JSON.stringify(i))),n.push(e+"="+i))}function m(e){if(void 0!==e){var t=Number(e);return isNaN(t)||t!==parseInt(e,10)?e:t}}function k(e,t){var n=e.descending?"endkey":"startkey",r=e.descending?"startkey":"endkey";if(void 0!==e[n]&&void 0!==e[r]&&y(e[n],e[r])>0)throw new G("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(t.reduce&&!1!==e.reduce){if(e.include_docs)throw new G("{include_docs:true} is invalid for reduce");if(e.keys&&e.keys.length>1&&!e.group&&!e.group_level)throw new G("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach((function(t){var n=function(e){if(e){if("number"!=typeof e)return new G('Invalid value for integer: "'+e+'"');if(e<0)return new G('Invalid value for positive integer: "'+e+'"')}}(e[t]);if(n)throw n}))}function A(e){return function(t){if(404===t.status)return e;throw t}}function q(e,t,n){var r="_local/doc_"+e,i={_id:r,keys:[]},o=n.get(e),s=o[0];return(function(e){return 1===e.length&&/^1-/.test(e[0].rev)}(o[1])?Promise.resolve(i):t.db.get(r).catch(A(i))).then((function(e){return function(e){return e.keys.length?t.db.allDocs({keys:e.keys,include_docs:!0}):Promise.resolve({rows:[]})}(e).then((function(t){return function(e,t){for(var n=[],r=new c,i=0,o=t.rows.length;i<o;i++){var a=t.rows[i].doc;if(a&&(n.push(a),r.add(a._id),a._deleted=!s.has(a._id),!a._deleted)){var u=s.get(a._id);"value"in u&&(a.value=u.value)}}var l=te(s);return l.forEach((function(e){if(!r.has(e)){var t={_id:e},i=s.get(e);"value"in i&&(t.value=i.value),n.push(t)}})),e.keys=ee(l.concat(e.keys)),n.push(e),n}(e,t)}))}))}function O(e){var t="string"==typeof e?e:e.name,n=oe[t];return n||(n=oe[t]=new ne),n}function j(e){return Z(O(e),(function(){return function(e){var n,r;var o=t(e.mapFun,(function(e,t){var i={id:r._id,key:g(e)};null!=t&&(i.value=g(t)),n.push(i)})),a=e.seq||0;function c(t,n){return function(){return function(e,t,n){return e.db.get("_local/lastSeq").catch(A({_id:"_local/lastSeq",seq:0})).then((function(r){var i=te(t);return Promise.all(i.map((function(n){return q(n,e,t)}))).then((function(t){var i=F(t);return r.seq=n,i.push(r),e.db.bulkDocs({docs:i})}))}))}(e,t,n)}}var l=new ne;function f(){return e.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:a,limit:50}).then(d)}function d(t){var d=t.results;if(d.length){var p=function(t){for(var c=new u,l=0,f=t.length;l<f;l++){var d=t[l];if("_"!==d.doc._id[0]){n=[],(r=d.doc)._deleted||i(e.sourceDB,o,r),n.sort(s);var p=h(n);c.set(d.doc._id,[p,d.changes])}a=d.seq}return c}(d);if(l.add(c(p,a)),!(d.length<50))return f()}}function h(e){for(var t,n=new u,r=0,i=e.length;r<i;r++){var o=e[r],s=[o.key,o.id];r>0&&0===y(o.key,t)&&s.push(r),n.set(_(s),o),t=o.key}return n}return f().then((function(){return l.finish()})).then((function(){e.seq=a}))}(e)}))()}function E(e,t){return Z(O(e),(function(){return function(e,t){var r,i=e.reduceFun&&!1!==t.reduce,s=t.skip||0;void 0===t.keys||t.keys.length||(t.limit=0,delete t.keys);function a(t){return t.include_docs=!0,e.db.allDocs(t).then((function(e){return r=e.total_rows,e.rows.map((function(e){if("value"in e.doc&&"object"==typeof e.doc.value&&null!==e.doc.value){var t=Object.keys(e.doc.value).sort(),n=["id","key","value"];if(!(t<n||t>n))return e.doc.value}var r=function(e){for(var t=[],n=[],r=0;;){var i=e[r++];if("\0"!==i)switch(i){case"1":t.push(null);break;case"2":t.push("1"===e[r]),r++;break;case"3":var o=b(e,r);t.push(o.num),r+=o.length;break;case"4":for(var s="";;){var a=e[r];if("\0"===a)break;s+=a,r++}s=s.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),t.push(s);break;case"5":var c={element:[],index:t.length};t.push(c.element),n.push(c);break;case"6":var u={element:{},index:t.length};t.push(u.element),n.push(u);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+i)}else{if(1===t.length)return t.pop();w(t,n)}}}(e.doc._id);return{key:r[0],id:r[1],value:"value"in e.doc?e.doc.value:null}}))}))}function c(a){var c;if(c=i?function(e,t,r){0===r.group_level&&delete r.group_level;var i=r.group||r.group_level,s=n(e.reduceFun),a=[],c=isNaN(r.group_level)?Number.POSITIVE_INFINITY:r.group_level;t.forEach((function(e){var t=a[a.length-1],n=i?e.key:null;if(i&&Array.isArray(n)&&(n=n.slice(0,c)),t&&0===y(t.groupKey,n))return t.keys.push([e.key,e.id]),void t.values.push(e.value);a.push({keys:[[e.key,e.id]],values:[e.value],groupKey:n})})),t=[];for(var u=0,l=a.length;u<l;u++){var d=a[u],h=o(e.sourceDB,s,d.keys,d.values,!1);if(h.error&&h.error instanceof X)throw h.error;t.push({value:h.error?null:h.output,key:d.groupKey})}return{rows:f(t,r.limit,r.skip)}}(e,a,t):{total_rows:r,offset:s,rows:a},t.update_seq&&(c.update_seq=e.seq),t.include_docs){var l=ee(a.map(d));return e.sourceDB.allDocs({keys:l,include_docs:!0,conflicts:t.conflicts,attachments:t.attachments,binary:t.binary}).then((function(e){var t=new u;return e.rows.forEach((function(e){t.set(e.id,e.doc)})),a.forEach((function(e){var n=d(e),r=t.get(n);r&&(e.doc=r)})),c}))}return c}if(void 0!==t.keys){var l=t.keys.map((function(e){var n={startkey:_([e]),endkey:_([e,{}])};return t.update_seq&&(n.update_seq=!0),a(n)}));return Promise.all(l).then(F).then(c)}var h,p,v={descending:t.descending};if(t.update_seq&&(v.update_seq=!0),"start_key"in t&&(h=t.start_key),"startkey"in t&&(h=t.startkey),"end_key"in t&&(p=t.end_key),"endkey"in t&&(p=t.endkey),void 0!==h&&(v.startkey=t.descending?_([h,{}]):_([h])),void 0!==p){var g=!1!==t.inclusive_end;t.descending&&(g=!g),v.endkey=_(g?[p,{}]:[p])}if(void 0!==t.key){var m=_([t.key]),k=_([t.key,{}]);v.descending?(v.endkey=m,v.startkey=k):(v.startkey=m,v.endkey=k)}return i||("number"==typeof t.limit&&(v.limit=t.limit),v.skip=s),a(v).then(c)}(e,t)}))()}function L(t,n,i){if("function"==typeof t._query)return function(e,t,n){return new Promise((function(r,i){e._query(t,n,(function(e,t){if(e)return i(e);r(t)}))}))}(t,n,i);if(V(t))return function(e,t,n){var r,i,o,s=[],c="GET";if(p("reduce",n,s),p("include_docs",n,s),p("attachments",n,s),p("limit",n,s),p("descending",n,s),p("group",n,s),p("group_level",n,s),p("skip",n,s),p("stale",n,s),p("conflicts",n,s),p("startkey",n,s,!0),p("start_key",n,s,!0),p("endkey",n,s,!0),p("end_key",n,s,!0),p("inclusive_end",n,s),p("key",n,s,!0),p("update_seq",n,s),s=""===(s=s.join("&"))?"":"?"+s,void 0!==n.keys){var u="keys="+encodeURIComponent(JSON.stringify(n.keys));u.length+s.length+1<=2e3?s+=("?"===s[0]?"&":"?")+u:(c="POST","string"==typeof t?r={keys:n.keys}:t.keys=n.keys)}if("string"==typeof t){var f=ae(t);return e.fetch("_design/"+f[0]+"/_view/"+f[1]+s,{headers:new l({"Content-Type":"application/json"}),method:c,body:JSON.stringify(r)}).then((function(e){return i=e.ok,o=e.status,e.json()})).then((function(e){if(!i)throw e.status=o,a(e);return e.rows.forEach((function(e){if(e.value&&e.value.error&&"builtin_reduce_error"===e.value.error)throw new Error(e.reason)})),e})).then(h(n))}return r=r||{},Object.keys(t).forEach((function(e){Array.isArray(t[e])?r[e]=t[e]:r[e]=t[e].toString()})),e.fetch("_temp_view"+s,{headers:new l({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(r)}).then((function(e){return i=e.ok,o=e.status,e.json()})).then((function(e){if(!i)throw e.status=o,a(e);return e})).then(h(n))}(t,n,i);if("string"!=typeof n)return k(i,n),se.add((function(){return ie(t,"temp_view/temp_view",n.map,n.reduce,!0,e).then((function(e){return t=j(e).then((function(){return E(e,i)})),n=function(){return e.db.destroy()},t.then((function(e){return n().then((function(){return e}))}),(function(e){return n().then((function(){throw e}))}));var t,n}))})),se.finish();var o=n,s=ae(o),c=s[0],u=s[1];return t.get("_design/"+c).then((function(n){var s=n.views&&n.views[u];if(!s)throw new Q("ddoc "+n._id+" has no view named "+u);return r(n,u),k(i,s),ie(t,o,s.map,s.reduce,!1,e).then((function(e){return"ok"===i.stale||"update_after"===i.stale?("update_after"===i.stale&&S()((function(){j(e)})),E(e,i)):j(e).then((function(){return E(e,i)}))}))}))}var C;return{query:function(e,t,n){var r=this;"function"==typeof t&&(n=t,t={}),t=t?function(e){return e.group_level=m(e.group_level),e.limit=m(e.limit),e.skip=m(e.skip),e}(t):{},"function"==typeof e&&(e={map:e});var i=Promise.resolve().then((function(){return L(r,e,t)}));return Y(i,n),i},viewCleanup:(C=function(){var t=this;return"function"==typeof t._viewCleanup?function(e){return new Promise((function(t,n){e._viewCleanup((function(e,r){if(e)return n(e);t(r)}))}))}(t):V(t)?function(e){return e.fetch("_view_cleanup",{headers:new l({"Content-Type":"application/json"}),method:"POST"}).then((function(e){return e.json()}))}(t):function(t){return t.get("_local/"+e).then((function(e){var n=new u;Object.keys(e.views).forEach((function(e){var t=ae(e),r="_design/"+t[0],i=t[1],o=n.get(r);o||(o=new c,n.set(r,o)),o.add(i)}));var r={keys:te(n),include_docs:!0};return t.allDocs(r).then((function(r){var i={};r.rows.forEach((function(t){var r=t.key.substring(8);n.get(t.key).forEach((function(n){var o=r+"/"+n;e.views[o]||(o=n);var s=Object.keys(e.views[o]),a=t.doc&&t.doc.views&&t.doc.views[n];s.forEach((function(e){i[e]=i[e]||a}))}))}));var o=Object.keys(i).filter((function(e){return!i[e]})).map((function(e){return Z(O(e),(function(){return new t.constructor(e,t.__opts).destroy()}))()}));return Promise.all(o).then((function(){return{ok:!0}}))}))}),A({ok:!0}))}(t)},x()((function(e){var t=e.pop(),n=C.apply(this,e);return"function"==typeof t&&Y(n,t),n})))}};function le(e,t){for(var n=e,r=0,i=t.length;r<i;r++){if(!(n=n[t[r]]))break}return n}function fe(e,t,n){for(var r=0,i=t.length;r<i-1;r++){e=e[t[r]]={}}e[t[i-1]]=n}function de(e,t){return e<t?-1:e>t?1:0}function he(e){for(var t=[],n="",r=0,i=e.length;r<i;r++){var o=e[r];"."===o?r>0&&"\\"===e[r-1]?n=n.substring(0,n.length-1)+".":(t.push(n),n=""):n+=o}return t.push(n),t}var pe=["$or","$nor","$not"];function ve(e){return pe.indexOf(e)>-1}function ye(e){return Object.keys(e)[0]}function ge(e){return e[ye(e)]}function me(e){var t={};return e.forEach((function(e){Object.keys(e).forEach((function(n){var r=e[n];if("object"!=typeof r&&(r={$eq:r}),ve(n))t[n]=r instanceof Array?r.map((function(e){return me([e])})):me([r]);else{var i=t[n]=t[n]||{};Object.keys(r).forEach((function(e){var t=r[e];return"$gt"===e||"$gte"===e?function(e,t,n){if(void 0!==n.$eq)return;void 0!==n.$gte?"$gte"===e?t>n.$gte&&(n.$gte=t):t>=n.$gte&&(delete n.$gte,n.$gt=t):void 0!==n.$gt?"$gte"===e?t>n.$gt&&(delete n.$gt,n.$gte=t):t>n.$gt&&(n.$gt=t):n[e]=t}(e,t,i):"$lt"===e||"$lte"===e?function(e,t,n){if(void 0!==n.$eq)return;void 0!==n.$lte?"$lte"===e?t<n.$lte&&(n.$lte=t):t<=n.$lte&&(delete n.$lte,n.$lt=t):void 0!==n.$lt?"$lte"===e?t<n.$lt&&(delete n.$lt,n.$lte=t):t<n.$lt&&(n.$lt=t):n[e]=t}(e,t,i):"$ne"===e?function(e,t){"$ne"in t?t.$ne.push(e):t.$ne=[e]}(t,i):"$eq"===e?function(e,t){delete t.$gt,delete t.$gte,delete t.$lt,delete t.$lte,delete t.$ne,t.$eq=e}(t,i):void(i[e]=t)}))}}))})),t}function _e(e){var t=D(e),n=!1;(function e(t,n){for(var r in t){"$and"===r&&(n=!0);var i=t[r];"object"==typeof i&&(n=e(i,n))}return n})(t,!1)&&("$and"in(t=function e(t){for(var n in t){if(Array.isArray(t))for(var r in t)t[r].$and&&(t[r]=me(t[r].$and));var i=t[n];"object"==typeof i&&e(i)}return t}(t))&&(t=me(t.$and)),n=!0),["$or","$nor"].forEach((function(e){e in t&&t[e].forEach((function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var r=t[n],i=e[r];"object"==typeof i&&null!==i||(e[r]={$eq:i})}}))})),"$not"in t&&(t.$not=me([t.$not]));for(var r=Object.keys(t),i=0;i<r.length;i++){var o=r[i],s=t[o];"object"!=typeof s||null===s?s={$eq:s}:"$ne"in s&&!n&&(s.$ne=[s.$ne]),t[o]=s}return t}function be(e,t,n){if(e=e.filter((function(e){return we(e.doc,t.selector,n)})),t.sort){var r=function(e){function t(t){return e.map((function(e){var n=he(ye(e));return le(t,n)}))}return function(e,n){var r=y(t(e.doc),t(n.doc));return 0!==r?r:de(e.doc._id,n.doc._id)}}(t.sort);e=e.sort(r),"string"!=typeof t.sort[0]&&"desc"===ge(t.sort[0])&&(e=e.reverse())}if("limit"in t||"skip"in t){var i=t.skip||0,o=("limit"in t?t.limit:e.length)+i;e=e.slice(i,o)}return e}function we(e,t,n){return n.every((function(n){var r=t[n],i=he(n),o=le(e,i);return ve(n)?function(e,t,n){if("$or"===e)return t.some((function(e){return we(n,e,Object.keys(e))}));if("$not"===e)return!we(n,t,Object.keys(t));return!t.find((function(e){return we(n,e,Object.keys(e))}))}(n,r,e):ke(r,e,i,o)}))}function ke(e,t,n,r){return!e||("object"==typeof e?Object.keys(e).every((function(i){var o=e[i];return function(e,t,n,r,i){if(!Oe[e])throw new Error('unknown operator "'+e+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return Oe[e](t,n,r,i)}(i,t,o,n,r)})):e===r)}function Ae(e){return null!=e}function xe(e){return void 0!==e}function qe(e,t){return t.some((function(t){return e instanceof Array?e.indexOf(t)>-1:e===t}))}var Oe={$elemMatch:function(e,t,n,r){return!!Array.isArray(r)&&(0!==r.length&&("object"==typeof r[0]?r.some((function(e){return we(e,t,Object.keys(t))})):r.some((function(r){return ke(t,e,n,r)}))))},$allMatch:function(e,t,n,r){return!!Array.isArray(r)&&(0!==r.length&&("object"==typeof r[0]?r.every((function(e){return we(e,t,Object.keys(t))})):r.every((function(r){return ke(t,e,n,r)}))))},$eq:function(e,t,n,r){return xe(r)&&0===y(r,t)},$gte:function(e,t,n,r){return xe(r)&&y(r,t)>=0},$gt:function(e,t,n,r){return xe(r)&&y(r,t)>0},$lte:function(e,t,n,r){return xe(r)&&y(r,t)<=0},$lt:function(e,t,n,r){return xe(r)&&y(r,t)<0},$exists:function(e,t,n,r){return t?xe(r):!xe(r)},$mod:function(e,t,n,r){return Ae(r)&&function(e,t){var n=t[0],r=t[1];if(0===n)throw new Error("Bad divisor, cannot divide by zero");if(parseInt(n,10)!==n)throw new Error("Divisor is not an integer");if(parseInt(r,10)!==r)throw new Error("Modulus is not an integer");return parseInt(e,10)===e&&e%n===r}(r,t)},$ne:function(e,t,n,r){return t.every((function(e){return 0!==y(r,e)}))},$in:function(e,t,n,r){return Ae(r)&&qe(r,t)},$nin:function(e,t,n,r){return Ae(r)&&!qe(r,t)},$size:function(e,t,n,r){return Ae(r)&&function(e,t){return e.length===t}(r,t)},$all:function(e,t,n,r){return Array.isArray(r)&&function(e,t){return t.every((function(t){return e.indexOf(t)>-1}))}(r,t)},$regex:function(e,t,n,r){return Ae(r)&&function(e,t){return new RegExp(t).test(e)}(r,t)},$type:function(e,t,n,r){return function(e,t){switch(t){case"null":return null===e;case"boolean":return"boolean"==typeof e;case"number":return"number"==typeof e;case"string":return"string"==typeof e;case"array":return e instanceof Array;case"object":return"[object Object]"==={}.toString.call(e)}throw new Error(t+" not supported as a type.Please use one of object, string, array, number, boolean or null.")}(r,t)}};function je(e){return(e=D(e)).index||(e.index={}),["type","name","ddoc"].forEach((function(t){e.index[t]&&(e[t]=e.index[t],delete e.index[t])})),e.fields&&(e.index.fields=e.fields,delete e.fields),e.type||(e.type="json"),e}function Se(e,t,n,r){var i,o;n.headers=new l({"Content-type":"application/json"}),e.fetch(t,n).then((function(e){return i=e.status,o=e.ok,e.json()})).then((function(e){if(o)r(null,e);else{e.status=i;var t=a(e);r(t)}})).catch(r)}function Ee(e,t,n){t=je(t),Se(e,"_index",{method:"POST",body:JSON.stringify(t)},n)}function Le(e,t,n){Se(e,"_find",{method:"POST",body:JSON.stringify(t)},n)}function Ce(e,t,n){Se(e,"_explain",{method:"POST",body:JSON.stringify(t)},n)}function $e(e,t){Se(e,"_index",{method:"GET"},t)}function Te(e,t,n){var r=t.ddoc,i=t.type||"json",o=t.name;return r?o?void Se(e,"_index/"+[r,i,o].map(encodeURIComponent).join("/"),{method:"DELETE"},n):n(new Error("you must provide an index's name")):n(new Error("you must provide an index's ddoc"))}function Me(e){return function(){for(var t=arguments.length,n=new Array(t),r=-1;++r<t;)n[r]=arguments[r];return e.call(this,n)}}function Pe(e){return Me((function(t){var n=t.pop(),r=e.apply(this,t);return function(e,t){e.then((function(e){S()((function(){t(null,e)}))}),(function(e){S()((function(){t(e)}))}))}(r,n),r}))}var De=Me((function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];Array.isArray(i)?t=t.concat(De.apply(null,i)):t.push(i)}return t}));function Be(e){for(var t={},n=0,r=e.length;n<r;n++)t=U(t,e[n]);return t}function ze(e,t){for(var n=0,r=Math.min(e.length,t.length);n<r;n++)if(e[n]!==t[n])return!1;return!0}function Ie(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Ne(e,t){var n=function(e){for(var t=0,n=e.length;t<n;t++){if(-1!==e[t].indexOf("."))return!1}return!0}(e),r=1===e.length;return n?r?function(e,t){return function(n){t(n[e])}}(e[0],t):function(e,t){return function(n){for(var r=[],i=0,o=e.length;i<o;i++)r.push(n[e[i]]);t(r)}}(e,t):r?function(e,t){var n=he(e);return function(e){for(var r=e,i=0,o=n.length;i<o;i++){if(void 0===(r=r[n[i]]))return}t(r)}}(e[0],t):function(e,t){return function(n){for(var r=[],i=0,o=e.length;i<o;i++){for(var s=he(e[i]),a=n,c=0,u=s.length;c<u;c++){if(void 0===(a=a[s[c]]))return}r.push(a)}t(r)}}(e,t)}var Re=ue("indexes",(function(e,t){return Ne(Object.keys(e.fields),t)}),(function(){throw new Error("reduce not supported")}),(function(e,t){var n=e.views[t];if(!n.map||!n.map.fields)throw new Error("ddoc "+e._id+" with view "+t+" doesn't have map.fields defined. maybe it wasn't created by this plugin?")}));function He(e){return e._customFindAbstractMapper||Re}function Ue(e){return e.fields=e.fields.map((function(e){if("string"==typeof e){var t={};return t[e]="asc",t}return e})),e}function Fe(e,t){for(var n=[],r=0;r<t.def.fields.length;r++){var i=ye(t.def.fields[r]);n.push(e[i])}return n}function Ve(e){return e.allDocs({startkey:"_design/",endkey:"_design/￿",include_docs:!0}).then((function(e){var t={indexes:[{ddoc:null,name:"_all_docs",type:"special",def:{fields:[{_id:"asc"}]}}]};return t.indexes=De(t.indexes,e.rows.filter((function(e){return"query"===e.doc.language})).map((function(e){return(void 0!==e.doc.views?Object.keys(e.doc.views):[]).map((function(t){var n=e.doc.views[t];return{ddoc:e.id,name:t,type:"json",def:Ue(n.options.def)}}))}))),t.indexes.sort((function(e,t){return de(e.name,t.name)})),t.total_rows=t.indexes.length,t}))}var Je={"￿":{}};function Ke(e,t){for(var n=e.def.fields.map(ye),r=0,i=n.length;r<i;r++){if(t===n[r])return!0}return!1}function We(e,t){return"$eq"!==ye(e[t])}function Ge(e,t){var n=t.def.fields.map(ye);return e.slice().sort((function(e,t){var r=n.indexOf(e),i=n.indexOf(t);return-1===r&&(r=Number.MAX_VALUE),-1===i&&(i=Number.MAX_VALUE),de(r,i)}))}function Qe(e,t,n,r){var i=De(e,function(e,t,n){for(var r=!1,i=0,o=(n=Ge(n,e)).length;i<o;i++){var s=n[i];if(r||!Ke(e,s))return n.slice(i);i<o-1&&We(t,s)&&(r=!0)}return[]}(t,n,r),function(e){var t=[];return Object.keys(e).forEach((function(n){var r=e[n];Object.keys(r).forEach((function(e){"$ne"===e&&t.push(n)}))})),t}(n));return Ge(function(e){for(var t={},n=0;n<e.length;n++)t["$"+e[n]]=!0;return Object.keys(t).map((function(e){return e.substring(1)}))}(i),t)}function Xe(e,t,n){if(t){var r=(s=e,!((o=t).length>s.length)&&ze(o,s)),i=ze(n,e);return r&&i}var o,s;return function(e,t){e=e.slice();for(var n=0,r=t.length;n<r;n++){var i=t[n];if(!e.length)break;var o=e.indexOf(i);if(-1===o)return!1;e.splice(o,1)}return!0}(n,e)}var Ye=["$eq","$gt","$gte","$lt","$lte"];function Ze(e){return-1===Ye.indexOf(e)}function et(e,t,n,r){var i=e.def.fields.map(ye);return!!Xe(i,t,n)&&function(e,t){var n=t[e[0]];return void 0===n||!(1===Object.keys(n).length&&"$ne"===ye(n))}(i,r)}function tt(e,t,n,r,i){var o=function(e,t,n,r){return r.reduce((function(r,i){return et(i,n,t,e)&&r.push(i),r}),[])}(e,t,n,r);if(0===o.length){if(i)throw{error:"no_usable_index",message:"There is no index available for this selector."};var s=r[0];return s.defaultUsed=!0,s}if(1===o.length&&!i)return o[0];var a=function(e){for(var t={},n=0,r=e.length;n<r;n++)t[e[n]]=!0;return t}(t);if(i){var c="_design/"+i[0],u=2===i.length&&i[1],l=o.find((function(e){return!(!u||e.ddoc!==c||u!==e.name)||e.ddoc===c}));if(!l)throw{error:"unknown_error",message:"Could not find that index or could not use that index for the query"};return l}return function(e,t){for(var n=null,r=-1,i=0,o=e.length;i<o;i++){var s=e[i],a=t(s);a>r&&(r=a,n=s)}return n}(o,(function(e){for(var t=e.def.fields.map(ye),n=0,r=0,i=t.length;r<i;r++){var o=t[r];a[o]&&n++}return n}))}function nt(e,t){switch(e){case"$eq":return{startkey:t,endkey:t};case"$lte":return{endkey:t};case"$gte":return{startkey:t};case"$lt":return{endkey:t,inclusive_end:!1};case"$gt":return{startkey:t,inclusive_start:!1}}}function rt(e,t){return t.defaultUsed?function(e){return{queryOpts:{startkey:null},inMemoryFields:[Object.keys(e)]}}(e):1===t.def.fields.length?function(e,t){var n,r=ye(t.def.fields[0]),i=e[r]||{},o=[];return Object.keys(i).forEach((function(e){Ze(e)&&o.push(r);var t=function(e,t){switch(e){case"$eq":return{key:t};case"$lte":return{endkey:t};case"$gte":return{startkey:t};case"$lt":return{endkey:t,inclusive_end:!1};case"$gt":return{startkey:t,inclusive_start:!1}}return{startkey:null}}(e,i[e]);n=n?Be([n,t]):t})),{queryOpts:n,inMemoryFields:o}}(e,t):function(e,t){var n,r,i=t.def.fields.map(ye),o=[],s=[],a=[];function c(e){!1!==n&&s.push(null),!1!==r&&a.push(Je),o=i.slice(e)}for(var u=0,l=i.length;u<l;u++){var f=e[i[u]];if(!f||!Object.keys(f).length){c(u);break}if(u>0){if(Object.keys(f).some(Ze)){c(u);break}var d="$gt"in f||"$gte"in f||"$lt"in f||"$lte"in f,h=Object.keys(e[i[u-1]]),p=Ie(h,["$eq"]),v=Ie(h,Object.keys(f));if(d&&!p&&!v){c(u);break}}for(var y=Object.keys(f),g=null,m=0;m<y.length;m++){var _=y[m],b=nt(_,f[_]);g=g?Be([g,b]):b}s.push("startkey"in g?g.startkey:null),a.push("endkey"in g?g.endkey:Je),"inclusive_start"in g&&(n=g.inclusive_start),"inclusive_end"in g&&(r=g.inclusive_end)}var w={startkey:s,endkey:a};return void 0!==n&&(w.inclusive_start=n),void 0!==r&&(w.inclusive_end=r),{queryOpts:w,inMemoryFields:o}}(e,t)}function it(e,t){var n=e.selector,r=function(e,t){var n,r=Object.keys(e),i=t?t.map(ye):[];return n=r.length>=i.length?r:i,0===i.length?{fields:n}:{fields:n=n.sort((function(e,t){var n=i.indexOf(e);-1===n&&(n=Number.MAX_VALUE);var r=i.indexOf(t);return-1===r&&(r=Number.MAX_VALUE),n<r?-1:n>r?1:0})),sortOrder:t.map(ye)}}(n,e.sort),i=r.fields,o=tt(n,i,r.sortOrder,t,e.use_index),s=rt(n,o);return{queryOpts:s.queryOpts,index:o,inMemoryFields:Qe(s.inMemoryFields,o,n,i)}}function ot(e,t,n){var r,i;return t.selector&&(t.selector=_e(t.selector)),t.sort&&(t.sort=function(e){if(!Array.isArray(e))throw new Error("invalid sort json - should be an array");return e.map((function(e){if("string"==typeof e){var t={};return t[e]="asc",t}return e}))}(t.sort)),t.use_index&&(t.use_index=(r=t.use_index,i=[],"string"==typeof r?i.push(r):i=r,i.map((function(e){return e.replace("_design/","")})))),function(e){if("object"!=typeof e.selector)throw new Error("you must provide a selector when you find()")}(t),Ve(e).then((function(r){e.constructor.emit("debug",["find","planning query",t]);var i=it(t,r.indexes);e.constructor.emit("debug",["find","query plan",i]);var o=i.index;!function(e,t){if(t.defaultUsed&&e.sort){var n=e.sort.filter((function(e){return"_id"!==Object.keys(e)[0]})).map((function(e){return Object.keys(e)[0]}));if(n.length>0)throw new Error('Cannot sort on field(s) "'+n.join(",")+'" when using the default index')}t.defaultUsed}(t,o);var s=U({include_docs:!0,reduce:!1},i.queryOpts);return"startkey"in s&&"endkey"in s&&y(s.startkey,s.endkey)>0?{docs:[]}:(t.sort&&"string"!=typeof t.sort[0]&&"desc"===ge(t.sort[0])&&(s.descending=!0,s=function(e){var t=D(e);return delete t.startkey,delete t.endkey,delete t.inclusive_start,delete t.inclusive_end,"endkey"in e&&(t.startkey=e.endkey),"startkey"in e&&(t.endkey=e.startkey),"inclusive_start"in e&&(t.inclusive_end=e.inclusive_start),"inclusive_end"in e&&(t.inclusive_start=e.inclusive_end),t}(s)),i.inMemoryFields.length||("limit"in t&&(s.limit=t.limit),"skip"in t&&(s.skip=t.skip)),n?Promise.resolve(i,s):Promise.resolve().then((function(){if("_all_docs"===o.name)return function(e,t){var n=D(t);return n.descending?("endkey"in n&&"string"!=typeof n.endkey&&(n.endkey=""),"startkey"in n&&"string"!=typeof n.startkey&&(n.limit=0)):("startkey"in n&&"string"!=typeof n.startkey&&(n.startkey=""),"endkey"in n&&"string"!=typeof n.endkey&&(n.limit=0)),"key"in n&&"string"!=typeof n.key&&(n.limit=0),e.allDocs(n).then((function(e){return e.rows=e.rows.filter((function(e){return!/^_design\//.test(e.id)})),e}))}(e,s);var t,n=(t=o).ddoc.substring(8)+"/"+t.name;return He(e).query.call(e,n,s)})).then((function(e){!1===s.inclusive_start&&(e.rows=function(e,t,n){for(var r=n.def.fields,i=0,o=e.length;i<o;i++){var s=Fe(e[i].doc,n);if(1===r.length)s=s[0];else for(;s.length>t.length;)s.pop();if(Math.abs(y(s,t))>0)break}return i>0?e.slice(i):e}(e.rows,s.startkey,o)),i.inMemoryFields.length&&(e.rows=be(e.rows,t,i.inMemoryFields));var n={docs:e.rows.map((function(e){var n=e.doc;return t.fields?function(e,t){for(var n={},r=0,i=t.length;r<i;r++){var o=he(t[r]),s=le(e,o);void 0!==s&&fe(n,o,s)}return n}(n,t.fields):n}))};return o.defaultUsed&&(n.warning="no matching index found, create an index to optimize query time"),n})))}))}var st=Pe((function(e,t){var n,r=D((t=je(t)).index);function i(){return n||(n=Object($.a)(JSON.stringify(t)))}t.index=Ue(t.index),function(e){var t=e.fields.filter((function(e){return"asc"===ge(e)}));if(0!==t.length&&t.length!==e.fields.length)throw new Error("unsupported mixed sorting")}(t.index);var o=t.name||"idx-"+i(),s=t.ddoc||"idx-"+i(),a="_design/"+s,c=!1,u=!1;return e.constructor.emit("debug",["find","creating index",a]),J(e,a,(function(e){return e._rev&&"query"!==e.language&&(c=!0),e.language="query",e.views=e.views||{},!(u=!!e.views[o])&&(e.views[o]={map:{fields:Be(t.index.fields)},reduce:"_count",options:{def:r}},e)})).then((function(){if(c)throw new Error('invalid language for ddoc with id "'+a+'" (should be "query")')})).then((function(){var t=s+"/"+o;return He(e).query.call(e,t,{limit:0,reduce:!1}).then((function(){return{id:a,name:o,result:u?"exists":"created"}}))}))})),at=Pe(ot),ct=Pe((function(e,t){return ot(e,t,!0).then((function(n){return{dbname:e.name,index:n.index,selector:t.selector,range:{start_key:n.queryOpts.startkey,end_key:n.queryOpts.endkey},opts:{use_index:t.use_index||[],bookmark:"nil",limit:t.limit,skip:t.skip,sort:t.sort||{},fields:t.fields,conflicts:!1,r:[49]},limit:t.limit,skip:t.skip||0,fields:t.fields}}))})),ut=Pe(Ve),lt=Pe((function(e,t){if(!t.ddoc)throw new Error("you must supply an index.ddoc when deleting");if(!t.name)throw new Error("you must supply an index.name when deleting");var n=t.ddoc,r=t.name;return J(e,n,(function(e){return 1===Object.keys(e.views).length&&e.views[r]?{_id:n,_deleted:!0}:(delete e.views[r],e)})).then((function(){return He(e).viewCleanup.apply(e)})).then((function(){return{ok:!0}}))})),ft={};ft.createIndex=B((function(e,t){if("object"!=typeof e)return t(new Error("you must provide an index to create"));(V(this)?Ee:st)(this,e,t)})),ft.find=B((function(e,t){if(void 0===t&&(t=e,e=void 0),"object"!=typeof e)return t(new Error("you must provide search parameters to find()"));(V(this)?Le:at)(this,e,t)})),ft.explain=B((function(e,t){if(void 0===t&&(t=e,e=void 0),"object"!=typeof e)return t(new Error("you must provide search parameters to explain()"));(V(this)?Ce:ct)(this,e,t)})),ft.getIndexes=B((function(e){(V(this)?$e:ut)(this,e)})),ft.deleteIndex=B((function(e,t){if("object"!=typeof e)return t(new Error("you must provide an index to delete"));(V(this)?Te:lt)(this,e,t)}));var dt=ft;const ht={get_input_element:()=>document.querySelector(".site-header__search-box__input"),get_level_element:()=>document.querySelector(".icon__level"),inActColor:e=>e.classList.toggle("act-color"),toggleLevel(e,t,n){ht.get_level_element().classList.remove(e),ht.get_level_element().classList.add(t),ht.get_level_element().setAttribute("level",n),ht.get_input_element().focus()}};r.a.plugin(dt);const pt=(new Date).toString(),vt=ht.get_input_element(),yt=ht.get_level_element(),gt=document.querySelector(".todolist"),mt=document.querySelector(".detail__paragraph");var _t=new r.a("todolist");const bt={addTask(e,t){const n=vt.value,r=yt.getAttribute("level"),i=(new Date).toLocaleDateString(),o=document.querySelector(".sidebar__act").getAttribute("taskType"),s=pt.slice.call(pt,0,3).toUpperCase();let a;a=arguments[0]?{_id:(new Date).toISOString(),title:e,level:t,taskTime:i,taskType:o,taskWeek:s,detail:null}:{_id:(new Date).toISOString(),title:n,level:r,taskTime:i,taskType:o,taskWeek:s,detail:null},_t.put(a).then(()=>{console.log("添加到数据库成功！")}).catch(e=>{console.log(e)})},showTask:(e,t)=>_t.createIndex({index:{fields:[e]}}).then(()=>"taskType"===e?_t.find({selector:{taskType:t},sort:[{taskType:"desc"}]}).then(e=>{bt.redrawTasksUI(e.docs)}):_t.find({selector:{level:t},sort:[{level:"desc"}]}).then(e=>{bt.redrawTasksUI(e.docs)})),redrawTasksUI(e){let t="";const n=document.createElement("ul");n.classList.add("todolist__list"),e.forEach(e=>{t!==e.taskTime&&(t=e.taskTime,n.appendChild(bt.createTimeStamp(e))),n.appendChild(bt.createTaskItem(e))}),gt.innerHTML="",gt.appendChild(n),n.firstChild?(n.firstChild.nextSibling.classList.add("todolist__focus"),bt.showDetail(e[length]._id)):bt.showDetail()},createTaskItem(e){const t=document.createElement("li");return t.setAttribute("id",`things_${e._id}`),t.setAttribute("class",`todolist__content ${e.level}`),t.setAttribute("idnum",e._id),t.innerHTML=`<div><span class='todolist__title' contenteditable='true' idnum=${e._id}> ${e.title} </span></div>\n            <div class='icon__todo'>\n              <svg class='icon icon__nofinish' aria-hidden='true' name='search' idnum=${e._id}>\n                <use class='icon__finish' xlink:href='#icon-eglass-finish1'></use>\n                <use xlink:href='#icon-eglass-finish'></use>\n              </svg>\n              <svg class='icon icon__delete' aria-hidden='true' name='search' idnum=${e._id}>\n                <use xlink:href='#icon-delete'></use>\n              </svg>\n            </div>`,t},createTimeStamp(e){const t=e.taskTime,n=e.taskWeek,r=document.createElement("li");return r.classList.add("todolist__time"),r.innerHTML="<span class='todolist__week'>"+n+"</span><span class='todolist__date'>"+t+"</span>",r},searchTask(e){let t;const n=document.createElement("ul");n.classList.add("todolist__list"),_t.allDocs({include_docs:!0,descending:!0}).then(r=>{if(r.rows.forEach(r=>{(r=r.doc).title&&-1!==r.title.indexOf(e)&&(t!==r.taskTime&&(t=r.taskTime,n.appendChild(bt.createTimeStamp(r))),n.appendChild(bt.createTaskItem(r)))}),gt.innerHTML="",gt.appendChild(n),n.firstChild){const e=n.firstChild.nextSibling;e.classList.add("todolist__focus"),bt.showDetail(e.getAttribute("idnum"))}else bt.showDetail()})},modifyTask(e,t,n){_t.get(e).then(e=>{e[t]=n,_t.put(e)})},showDetail(e){e?_t.get(e).then(e=>{const t=e.title,n=e.detail;mt.previousElementSibling.innerText=t,mt.value=n,mt.placeholder="添加任务详情..."}):(mt.previousElementSibling.innerText="",mt.value="",mt.placeholder="此分类目前没有任务哦~")},deleteAllTasks(){_t.allDocs().then(e=>Promise.all(e.rows.map(e=>_t.remove(e.id,e.value.rev)))).then(()=>{gt.innerHTML=""}).catch(e=>{console.log(e+"删除数据库失败！")})}};bt.showTask("taskType","work");const wt={addTask(e,t){bt.addTask(e,t)},showTask(e,t){bt.showTask(e,t)},searchTask(e){bt.searchTask(e)},modifyTask(e,t,n){bt.modifyTask(e,t,n)},showDetail(e){bt.showDetail(e)},deleteAllTasks(){bt.deleteAllTasks()}},kt=[0,1,2],At={navigation(e){const t=document.querySelectorAll(".sidebar__list-type"),n=e.target;if(n.classList.contains("sidebar__list-type")){t.forEach(e=>{e.classList.remove("sidebar__act")}),n.classList.add("sidebar__act");const e=n.getAttribute("taskType");wt.showTask("taskType",e)}else if(n.classList.contains("sidebar__list-level")){kt.push(kt.shift());const e=n.children,t=e[kt[0]],r=t.getAttribute("level");Array.prototype.forEach.call(e,e=>{e.classList.remove("active")}),t.classList.add("active"),wt.showTask("level",r)}}},xt={changeTaskTitle(e){if("SPAN"===e.target.tagName.toUpperCase()){const t=e.target.getAttribute("idnum"),n=e.target.innerText;wt.modifyTask(t,"title",n)}},finishTask(e){const t=document.querySelector(".todolist__list"),n=document.querySelector(".todolist__focus");if(e.target.classList.contains("icon__nofinish")){const r=e.target.getAttribute("idnum");wt.modifyTask(r,"taskType","finish");const i=e.target.parentNode.parentNode,o=i.previousSibling.classList.contains("todolist__content"),s=i.nextSibling;if((!o&&null==s||!o&&!s.classList.contains("todolist__content"))&&i.parentNode.removeChild(i.previousSibling),i.parentNode.removeChild(i),t.firstChild){if(i===n){const e=t.firstChild.nextSibling;e.classList.add("todolist__focus"),wt.showDetail(e.getAttribute("idnum"))}}else wt.showDetail()}},deleteTask(e){const t=document.querySelector(".todolist__list"),n=document.querySelector(".todolist__focus");if(e.target.classList.contains("icon__delete")){const r=e.target.getAttribute("idnum");wt.modifyTask(r,"taskType","bin");const i=e.target.parentNode.parentNode,o=i.previousSibling.classList.contains("todolist__content"),s=i.nextSibling;if((!o&&null==s||!o&&!s.classList.contains("todolist__content"))&&i.parentNode.removeChild(i.previousSibling),i.parentNode.removeChild(i),t.firstChild){if(i===n){const e=t.firstChild.nextSibling;e.classList.add("todolist__focus"),wt.showDetail(e.getAttribute("idnum"))}}else wt.showDetail()}},showTaskDetail(e){if(e.target.classList.contains("todolist__content")){const t=e.target.parentNode.childNodes,n=e.target.getAttribute("idnum");t.forEach(e=>{e.classList.remove("todolist__focus")}),e.target.classList.add("todolist__focus"),wt.showDetail(n)}}},qt={refreshDetail(){const e=document.querySelector(".todolist__focus").getAttribute("idnum"),t=this.value;wt.modifyTask(e,"detail",t)}},Ot=function(e){let t;return function(){return t||(t=e())}}(()=>{const e=document.createElement("div");return e.classList.add("modal","fade"),e.innerHTML="<div class='modal__box'>\n                             <p class='modal__aware'>删除全部数据</p>\n                             <div class='modal__delete'>\n                               <a class='modal__btn-yes'>是的</a>\n                               <a class='modal__btn-no'>再想想</a>\n                             </div>\n                           </div>",document.body.appendChild(e),e}),jt={createSingleDeleteModal(){Ot().classList.add("modal--visible")},deleteAllTasks(){wt.deleteAllTasks(),document.querySelector(".modal").classList.remove("modal--visible")},regretDeleteTasks(){document.querySelector(".modal").classList.remove("modal--visible")}},St=function(e){let t;return function(){return t||(t=e())}}(()=>{const e=document.createElement("div");return e.classList.add("login","fade"),e.innerHTML='<div class=\'login__box\'>\n                             <div class=\'login__signin\'>\n                               <p class=\'login__signin__welcome\'>欢迎登陆PureTodo!</p>\n                               <input class="login__signin__input" type="text" placeholder="用户名 / 邮箱"/>\n                               <div class="signinUsername-error error"></div>\n                               <input class="login__signin__input" type="text" placeholder="密码"/>\n                               <div class="signinPassword-error error"></div>\n                               <a class=\'login__signin__button\'>登陆</a>\n                               <div class="login__bottom">\n                                 <a class="login__exit" href="# ">退出</a>\n                                 <span>|</span>\n                                 <a class="login__changeState" href="# ">注册新账号</a>\n                               </div>\n                             </div>\n\n                             <div class=\'login__signup hidden\'>\n                               <p class=\'login__signup__welcome\'>欢迎注册新账户!</p>\n                               <input class="login__signup__input signupUsername" type="text" placeholder="用户名 / 邮箱设置"/>\n                               <div class="signupUsername-error error"></div>\n                               <input class="login__signup__input signupPassword" type="text" placeholder="密码设置"/>\n                               <div class="signupPassword-error error"></div>\n                               <a class=\'login__signup__button\'>注册</a>\n                               <div class="login__bottom">\n                                 <a class="login__exit" href="# ">退出</a>\n                                 <span>|</span>\n                                 <a class="login__changeState" href="# ">返回登陆栏</a>\n                               </div>\n                             </div>\n                           </div>',document.body.appendChild(e),e}),Et={createSingleLoginModal(){St().classList.add("login--visible")},changeState(e){const t=document.querySelector(".login__signin"),n=document.querySelector(".login__signup");e.target.classList.contains("login__changeState")&&(t.classList.toggle("hidden"),n.classList.toggle("hidden"))},exit(e){const t=document.querySelector(".login");e.target.classList.contains("login__exit")&&t.classList.remove("login--visible")}},Lt={vertify(e){const t=e.target,n=/(^\s+)|(\s+$)/g;if(t.classList.contains("signupUsername")){const e=document.querySelector(".signupUsername"),t=document.querySelector(".signupUsername-error");if(""==e.value)return e.style.border="1px solid #da635d",t.innerHTML="用户名不能为空",!1;if(n.test(e.value))return e.style.border="1px solid #da635d",t.innerHTML="不能包含空格",!1;if(e.value.length>=16||e.value.length<=3)return e.style.border="1px solid #da635d",t.innerHTML="长度为4-16个字符",!1;e.style.border="1px solid #ccc",t.innerHTML=""}else if(t.classList.contains("signupPassword")){const e=document.querySelector(".signupPassword"),t=document.querySelector(".signupPassword-error");if(""==e.value)return e.style.border="1px solid #da635d",t.innerHTML="密码不能为空",!1;if(n.test(e.value))return e.style.border="1px solid #da635d",t.innerHTML="不能包含空格",!1;if(e.value.length>=16||e.value.length<=3)return e.style.border="1px solid #da635d",t.innerHTML="长度为4-16个字符",!1;e.style.border="1px solid #ccc",t.innerHTML=""}}};!function(){const e=document.querySelector(".site-header__loginButton"),t=document.querySelector(".site-header__loginIcon"),n=document.querySelector(".sidebar__content"),r=document.querySelector(".sidebar__delete"),i=document.querySelector(".todolist"),o=document.querySelector(".detail__paragraph");function s(){var e=document.querySelector(".login__box");e.addEventListener("blur",Lt.vertify,!0),e.addEventListener("click",Lt.submit),e.addEventListener("click",Et.changeState),e.addEventListener("click",Et.exit)}e.addEventListener("click",Et.createSingleLoginModal),e.addEventListener("click",s),t.addEventListener("click",Et.createSingleLoginModal),t.addEventListener("click",s),n.addEventListener("click",At.navigation),r.addEventListener("click",jt.createSingleDeleteModal),r.addEventListener("click",(function(){var e=document.querySelector(".modal__btn-yes"),t=document.querySelector(".modal__btn-no");e.addEventListener("click",jt.deleteAllTasks),t.addEventListener("click",jt.regretDeleteTasks)})),i.addEventListener("focusout",xt.changeTaskTitle),i.addEventListener("click",xt.finishTask),i.addEventListener("click",xt.deleteTask),i.addEventListener("click",xt.showTaskDetail),o.addEventListener("focusout",qt.refreshDetail)}();class Ct{constructor(e,t,n){this.randomTaskBtn=e,this.randomContent=t,this.randomLevel=n,this.event()}event(){this.randomTaskBtn.addEventListener("click",this.randomTask.bind(this))}randomTask(){const e=parseInt(Math.random()*this.randomContent.length),t=parseInt(3*Math.random()),n=document.querySelector(".sidebar__act").getAttribute("taskType");wt.addTask(this.randomContent[e],this.randomLevel[t]),wt.showTask("taskType",n)}}new Ct(document.querySelector(".site-header__random-task__fire"),["读完那本英文原著","中午去睡个好觉","日语入门学习","尝试做些家常菜","了解一些设计常识"],["bgc-light","bgc-usual","bgc-heavy"]);class $t{constructor(e,t,n,r){this.searchBox=e,this.addBtn=t,this.input=n,this.inActColor=r,this.event()}event(){this.searchBox.addEventListener("click",this.openSearchTask.bind(this)),this.input.addEventListener("keyup",this.searchTask),this.input.addEventListener("keyup",this.addTask2.bind(this)),this.addBtn.addEventListener("click",this.addTask1.bind(this))}openSearchTask(e){const t=document.querySelector(".sidebar__act").getAttribute("taskType");e.target.classList.contains("icon__search")&&(this.inActColor(e.target),this.inActColor(this.input),this.inActColor(this.searchBox),this.input.focus(),this.input.value="",this.input.classList.contains("act-color")||wt.showTask("taskType",t))}searchTask(e){e.target.classList.contains("act-color")&&wt.searchTask(this.value)}addTask1(){const e=document.querySelector(".sidebar__act").getAttribute("taskType");this.input.value&&(wt.addTask(),wt.showTask("taskType",e),this.input.value="")}addTask2(e=window.event){const t=e.which||e.keyCode||e.charCode,n=document.querySelector(".sidebar__act").getAttribute("taskType");document.activeElement.value&&13==t&&"INPUT"===document.activeElement.tagName.toUpperCase()&&(wt.addTask(),wt.showTask("taskType",n),this.input.value="")}}new $t(document.querySelector(".site-header__search-box__content"),document.querySelector(".icon__add"),ht.get_input_element(),ht.inActColor);const Tt=ht.toggleLevel,Mt=ht.get_level_element(),Pt={green:{dotPressed:function(){Tt("level-light","level-usual","bgc-usual"),this.state=Pt.purple}},purple:{dotPressed:function(){Tt("level-usual","level-heavy","bgc-heavy"),this.state=Pt.red}},red:{dotPressed:function(){Tt("level-heavy","level-light","bgc-light"),this.state=Pt.green}}};class Dt{constructor(e,t){this.state=t,this.levelDot=e,this.event()}event(){this.levelDot.addEventListener("click",()=>{this.state.dotPressed.call(this)})}}new Dt(Mt,Pt.green);class Bt{constructor(e,t,n,r){this.theme=e,this.themeIconName=t,this.siteHeader=n,this.themeBtn=r,this.event()}event(){this.themeBtn.addEventListener("click",this.changeTheme.bind(this))}changeTheme(){const e=this.themeBtn.children[0].children[0];this.theme.push(this.theme.shift()),this.themeIconName.push(this.themeIconName.shift()),this.siteHeader.setAttribute("class","site-header "+this.theme[0]),e.setAttribute("xlink:href",this.themeIconName[0])}}new Bt(["","theme-green","theme-purple","theme-gradual"],["#icon-theme","#icon-theme1","#icon-theme2","#icon-theme3"],document.querySelector(".site-header"),document.querySelector(".site-header__theme-btn"));n(24),n(25)}]);